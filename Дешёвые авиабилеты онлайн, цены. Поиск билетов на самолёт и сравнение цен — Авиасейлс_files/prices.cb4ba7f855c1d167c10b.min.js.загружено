(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[6039],{94028:function(e,t,s){"use strict";s.r(t),s.d(t,{$isVisible:function(){return o},drawAttention:function(){return c},hide:function(){return u},initialized:function(){return i},show:function(){return l}});var a=s(34943),r=s(73114),n=s(84802);const i=n.u.createEvent({sid:"-1y56lx"}),c=n.u.createEvent({sid:"j3qen5"}),{$enabled:o,turnOn:l,turnOff:u}=(0,a.MR)({sid:"s9kvt9",fn:()=>(0,r.qs)()})},84802:function(e,t,s){"use strict";s.d(t,{u:function(){return a}});const a=(0,s(34943).Fj)({sid:"8r0uqk"})},4439:function(e,t,s){"use strict";s.r(t),s.d(t,{PricesWidget:function(){return Xs}});var a=s(67294),r=s(42657),n=s(29643);const i=(0,a.createContext)({});function c(){const e=(0,a.useContext)(i);if(!e)throw new Error("No access to prices context");return e}var o=s(34840),l=s(19347),u=s(12588),d=s(81468),p=s(41671),h=s(94660),m=s(84802);const v=m.u.createEvent({sid:"p3wzit"}),y=(0,o.Bq)({and:[{domain:m.u}],or:{sid:"ieq6jc"}});var x=s(85893);const{containers:{PriceChartContainer:g,TripTypeSwitchContainer:$}}=h.G,j=e=>{let{animated:t=!1}=e;(0,o.DD)(y);const{t:s}=(0,d.useTranslation)("service_price_chart");return(0,x.jsx)(u.A,{"data-test-id":"prices-price_chart",children:(0,x.jsxs)(p.fw,{in:!0,name:"drop",appear:t,children:[(0,x.jsx)(u.A.Header,{children:(0,x.jsx)(u.A.Title,{children:(0,x.jsx)(d.Trans,{defaults:s("priceChartWithControl"),components:{control:(0,x.jsx)($,{"data-testid":"prices-variant_switch"})}})})}),(0,x.jsx)(u.A.Block,{children:(0,x.jsx)(g,{"data-test-id":"prices-price_chart_wrapper"})})]})})};var f=s(866);const D=e=>{let{animated:t,promotedAction:s}=e;const{t:a}=(0,d.useTranslation)("widget_prices");return(0,x.jsx)(u.A,{"data-test-id":"prices-no_prices",children:(0,x.jsx)(p.fw,{in:!0,name:"fade",appear:t,children:(0,x.jsxs)(u.A.Block,{className:"wpOLKHuoqdIaE7ozGX6_",children:[(0,x.jsx)("span",{"aria-hidden":!0,className:"rrZM0p3z4AJwvbgp6Ahv"}),(0,x.jsx)(f.Text,{tag:"h3",transformOnMobile:!0,className:"NORA0kAUbmxQrjXhUpJw",type:f.TextType.Title3Semi,children:a(s)})]})})})};var k=s(55718),b=s(3400),N=s(80625);const _={cheapest:N.BadgeColor.Green,cheapestDirect:N.BadgeColor.Purple,cheapestConvenient:N.BadgeColor.Blue},P=e=>{let{type:t,className:s}=e;const{t:a}=(0,d.useTranslation)("component_ticket_badge");return(0,x.jsx)(N.Badge,{className:s,color:_[t],size:N.BadgeSize.S,children:a(t)})},C=(0,a.memo)(P);let T,S;!function(e){e.PriceChart="price chart",e.NoPrices="no prices",e.BestPrices="best prices"}(T||(T={})),function(e){e.StartSearch="startSearch",e.FillDates="fillDates"}(S||(S={}));var w=s(34943),A=s(53088),B=s(34242),F=s(82497),M=s(35629),E=s(66048),q=s(1445),U=s(79403),I=s(53788),O=s(8681),V=s(32166),z=s(91486);const L=(e,t,s,a)=>{if(!e)return null;const{value:r,departDate:n,returnDate:i,...c}=e;return{...c,departDate:new Date(n),returnDate:i?new Date(i):null,price:r*s,currency:a,hasDates:t}},{ariadneData:R}=O.a.inputs,H=m.u.createStore(null,{sid:"6jznll"}),W=m.u.createStore(null,{sid:"-g6iz3h"}),G=m.u.createStore(null,{sid:"-yq2ygu"}),J=(0,w.$e)({and:[H,W,G,function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.every((e=>null===e))}],or:{sid:"xneyr1"}}),K=m.u.createEvent({sid:"yg9n04"}),Z=m.u.createEvent({sid:"dl8bhd"}),Q=(0,w.$e)({and:[{brand:U.U.outputs.$brand,input:(0,w.$e)({and:[{currency:A.y.outputs.$currency,dates:M.l.outputs.$pricesDates.map((e=>({...e}))),origin:q.q.outputs.$origin.map((e=>(null==e?void 0:e.cityIata)??(null==e?void 0:e.iata)??null)),destination:q.q.outputs.$destination.map((e=>(null==e?void 0:e.cityIata)??(null==e?void 0:e.iata)??null)),one_way:V.P.outputs.$isOneWay,market:I.D.outputs.$market,filters:(0,w.$e)({and:[{no_visa_at_transfer:B.jm.outputs.$withoutVisaTransfersValue,with_baggage:B.jm.outputs.$baggageValue}],or:{sid:"m1ek2n"}})}],or:{sid:"trnq19"}})}],or:{sid:"-skxm3w"}}),X=R({graphQL:{query:F.rG,operationName:"best_prices",variables:Q},fetch:{clock:Z},contract:F.Fn,mapResult:{source:B.jm.outputs.$exploreFilters,fn:F.ie}}),{$status:Y}=X,ee=(0,o.Bq)({and:[],or:{sid:"-d20wie"}}),te=M.l.outputs.$dateScenario.map((e=>e!==z._5.ExactDates)),se=(0,w.$e)({and:[H,te,E.l.outputs.$seatCount,A.y.outputs.$currency,L],or:{sid:"-7km6iz"}}),ae=(0,w.$e)({and:[W,te,E.l.outputs.$seatCount,A.y.outputs.$currency,L],or:{sid:"-9n7yb0"}}),re=(0,w.$e)({and:[G,te,E.l.outputs.$seatCount,A.y.outputs.$currency,L],or:{sid:"-qbdp32"}});var ne=s(94184),ie=s.n(ne),ce=s(20658);const oe=e=>{let{className:t,onClick:s,icon:a}=e;const{t:r}=(0,d.useTranslation)("widget_prices");return(0,x.jsxs)("button",{className:ie()("XAtUdhqjSJLpPHGSIII1",t),onClick:s,children:[(0,x.jsx)("span",{className:ce.visuallyHidden,children:r("select")}),(0,x.jsx)("span",{className:"eSUE8BnLIvgtuVkgpyMj",children:a})]})};var le=s(26793),ue=s(72675),de=s(17514),pe=s(97331),he=s(85045),me=s(88057),ve=s(85839);const{$departDate:ye,$returnDate:xe}=me.J.outputs.exact,{$months:ge,$duration:$e}=me.J.outputs.months,{$flexibleDates:je}=me.J.outputs.flexible,{$periodDates:fe}=me.J.outputs.period,De=m.u.createEvent({sid:"-wdz4p0"}),ke=(0,w.$e)({and:[(0,ue.x)(de.B.outputs.$isAviaFormActive,pe.N.outputs.$isSimpleSearch),(0,ue.x)(de.B.outputs.$isAviaFormActive,pe.N.outputs.$isFlexibleSearch),q.q.outputs.$origin,q.q.outputs.$destination,he._.outputs.$isEconomy,ye,xe,ge,$e,je,fe],or:{sid:"-5g62m8"}}),be=m.u.createEvent({sid:"-4ocrpk"}),Ne=(0,w.UP)({and:[{clock:[ke.updates,be],source:ke}],or:{sid:"-a2ndfb"}}),{valid:_e,__:Pe}=(0,w.Vl)({and:[Ne,{valid:e=>{let[t,s,a,r]=e;return(t||s)&&(0,ve.bx)(a,r)}}],or:{sid:"-eggo32"}}),Ce=m.u.createEvent({sid:"-hzhf1m"});var Te="_L4RUB31KSvD4CkA93DS",Se="j7O8FoC8szonai0W7xAV",we="pqPOMzsNeOzFWWmFniaQ";const{TripTypeSwitchContainer:Ae}=h.G.containers,{BestPrice:Be}=h.G.components,Fe=e=>{let{mainAction:t,animated:s=!1,children:r}=e;const{t:n}=(0,d.useTranslation)("widget_prices"),{isMobile:i}=c(),{cheapestDirectTicket:h,cheapestConvenientTicket:m,cheapestTicket:v,status:y}=(0,o.eY)({cheapestDirectTicket:ae,cheapestConvenientTicket:re,cheapestTicket:se,status:Y}),{handleCardClick:g}=(e=>{const{origin:t,destination:s,currency:r,searchClickedEvent:n,fillAviaFormEvent:i}=(0,o.eY)({origin:q.q.outputs.$origin,destination:q.q.outputs.$destination,currency:A.y.outputs.$currency,searchClickedEvent:Ce,fillAviaFormEvent:De}),c=(0,a.useCallback)(((e,a,i)=>{if(!t||!s)throw new Error("No origin or direction");n({origin:t,destination:s,departDate:e,returnDate:a,price:i,currency:r,priceSource:le.fN.BestPrices,searchSource:le.MJ.BestPrices})}),[r,s,t,n]),l=(0,a.useCallback)(((e,t)=>{i({departDate:e,returnDate:t})}),[i]);return{handleCardClick:(0,a.useCallback)(((t,s,a)=>{const r=e===S.StartSearch?c:l;return()=>r(t,s,a)}),[l,c,e])}})(t);(0,o.DD)(ee);const $=t===S.StartSearch?(0,x.jsx)(k.Icon24ControlsSearch,{}):(0,x.jsx)(b.Icon24ControlsChevron,{className:"PGIYiM21P0Dd1TDI_kbO"});return(0,x.jsx)(u.A,{"data-test-id":"prices-widget_best_prices",children:(0,x.jsxs)(p.fw,{in:!0,name:"fade",appear:s,children:[(0,x.jsx)(u.A.Header,{children:(0,x.jsx)(u.A.Title,{children:(0,x.jsx)(d.Trans,{defaults:n("bestPrices"),components:{control:(0,x.jsx)(Ae,{"data-testid":"prices-variant_switch"})}})})}),"pending"===y?(0,x.jsx)(l.Spinner,{size:i?l.SpinnerSize.M:l.SpinnerSize.L}):(0,x.jsxs)(p.fw,{in:!0,name:"fade",appear:!0,className:"gIILFZmFuW0iduSeEdk5",children:[v&&(0,x.jsxs)(u.A.Block,{className:Te,"data-test-id":"prices-best_prices_ticket",children:[(0,x.jsx)(Be,{...v}),(0,x.jsx)(oe,{className:we,icon:$,onClick:g(v.departDate,v.returnDate,v.price)}),(0,x.jsx)(C,{className:Se,type:"cheapest"})]}),h&&(0,x.jsxs)(u.A.Block,{className:Te,"data-test-id":"prices-best_prices_ticket",children:[(0,x.jsx)(Be,{...h}),(0,x.jsx)(oe,{className:we,icon:$,onClick:g(h.departDate,h.returnDate,h.price)}),(0,x.jsx)(C,{className:Se,type:"cheapestDirect"})]}),m&&(0,x.jsxs)(u.A.Block,{className:Te,"data-test-id":"prices-best_prices_ticket",children:[(0,x.jsx)(Be,{...m}),(0,x.jsx)(oe,{className:we,icon:$,onClick:g(m.departDate,m.returnDate,m.price)}),(0,x.jsx)(C,{className:Se,type:"cheapestConvenient"})]}),r]})]})})};var Me=s(88956),Ee=s(82455),qe=s(60099),Ue=s(73114);const{$enabled:Ie,toggle:Oe}=(0,w.MR)({sid:"8m2re1",fn:()=>(0,Ue.qs)()});(0,w.UP)({and:[{source:B.jm.outputs.$directValue,target:Ie}],or:{sid:"-6ldcej"}});const Ve={outputs:{$direct:Ie},inputs:{touchedDirect:Oe},internals:{}};var ze=s(49317),Le=s(20466),Re=s(20631),He=s(77901),We=s(54423),Ge=s(51081),Je=s(10924),Ke=s(48695);const Ze=(0,w.yM)({sid:"-nawmtv"}),Qe=(0,w.yM)({sid:"-bus9kt"}),Xe=(0,w.yM)({sid:"-qmlwyq"}),Ye=(0,w.MT)([],{sid:"-nlerty"}).reset(Qe),et=(0,Ke.C)({source:Ye,clock:Xe}).reset(Qe),tt=et.map((e=>e.length>0));(0,w.UP)({and:[{clock:Ze,source:Ye,fn:(e,t)=>e.includes(t)?e.filter((e=>e!==t)):e.concat(t),target:Ye}],or:{sid:"-4lqxgc"}}),(0,w.UP)({and:[{source:et,filter:e=>7===e.length,target:Qe}],or:{sid:"-44pb25"}});const st={outputs:{$daysApplied:et,$applied:tt,$daysSelected:Ye},inputs:{dayTouched:Ze,applied:Xe,reset:Qe},internals:{}};var at=s(98913),rt=s.n(at);const{ariadneData:nt}=O.a.inputs,it=(0,w.yM)({sid:"-dkjmcn"}),{$enabled:ct,turnOn:ot,turnOff:lt}=(0,w.MR)({sid:"o1kpbm",fn:()=>(0,Ue.qs)()}),ut=(0,w.$e)({and:[{brand:U.U.outputs.$brand,input:(0,w.$e)({and:[{currency:A.y.outputs.$currency,dates:M.l.outputs.$pricesDates.map((e=>({...e}))),origin:q.q.outputs.$origin.map((e=>(null==e?void 0:e.cityIata)??(null==e?void 0:e.iata)??null)),destination:q.q.outputs.$destination.map((e=>(null==e?void 0:e.cityIata)??(null==e?void 0:e.iata)??null)),one_way:V.P.outputs.$isOneWay,market:I.D.outputs.$market,filters:(0,w.$e)({and:[{direct:Ve.outputs.$direct,no_visa_at_transfer:B.jm.outputs.$withoutVisaTransfersValue,with_baggage:B.jm.outputs.$baggageValue}],or:{sid:"g8brc1"}}),paging:{offset:0,limit:100}}],or:{sid:"-2pdjxx"}})}],or:{sid:"c0vyjr"}}),dt=nt({graphQL:{query:F.Jo,operationName:"latest_prices",variables:ut},fetch:{clock:it},contract:F.l3,mapResult:F.NF}),{$status:pt}=dt,ht=dt.$data.map((e=>(null==e?void 0:e.prices)??[])),mt=ht.map((e=>function(e){const t=rt()(7,(()=>!1));for(let s=0;s<e.length;s+=1){const a=new Date(e[s].departDate);if(t[(0,Le.Z)(a)]=!0,t.every((e=>e)))break}return t.map(((e,t)=>e?t:null)).filter((e=>null!==e))}(e))),vt=(0,w.$e)({and:[{departureDays:st.outputs.$daysApplied}],or:{sid:"-e25ejq"}}),yt=(0,w.$e)({and:[{direct:Ve.outputs.$direct}],or:{sid:"ww012u"}}),xt=(0,w.$e)({and:[ht,vt,(e,t)=>function(e,t){return function(e,t){return t.length?e.filter((e=>t.includes((0,Le.Z)(new Date(e.departDate))))):e}(e,t.departureDays)}(e,t)],or:{sid:"-t4vcxs"}}),gt=xt.map((e=>function(e){return e[0]??null}(e))),$t=(0,w.$e)({and:[xt,gt,(e,t)=>function(e,t){if(!t)return null;const s=e.find((e=>e.segments.every((e=>!e.transfers.length))));return s&&s.signature!==t.signature?s:null}(e,t)],or:{sid:"iu2389"}}),jt=(0,w.$e)({and:[xt,gt,$t,(e,t,s)=>function(e,t,s){if(!t||!s)return null;const a=e.find((e=>e.convenient));return a&&a.signature!==t.signature&&a.signature!==s.signature?a:null}(e,t,s)],or:{sid:"-ah6g40"}});(0,w.UP)({and:[{clock:[yt,ot],target:it}],or:{sid:"dufxt7"}});const ft=(0,w.yM)({sid:"uzuqzm"}),Dt=(0,w.yM)({sid:"1g7c3v"});(0,w.UP)({and:[{clock:ft,target:ot}],or:{sid:"edoqku"}}),(0,w.UP)({and:[{clock:Dt,target:De}],or:{sid:"erze08"}});const kt=Je.I.inputs.createReporter({data:{category:"all_prices",label:"all_prices",action:"opened",service:Ge.Service.Explore},payload:{pageName:"main",userEvent:!1,source:null}}),bt=Je.I.inputs.createReporter({data:{category:"all_prices",label:"all_prices",action:"clicked",service:Ge.Service.Explore},payload:{pageName:"main",userEvent:!0,source:null}});kt({clock:ot}),bt({clock:ft});const Nt={outputs:{$filteredPrices:xt,$status:pt,$cheapest:gt,$cheapestDirect:$t,$cheapestConvenient:jt,$possibleDepartureDays:mt,$isModalVisible:ct},inputs:{userClickedButton:ft,userClickedCard:Dt,openModal:ot,closeModal:lt},internals:{$allPrices:ht,requestLatestPrices:it,$clientFilters:vt,$backendFilters:yt,$isModalVisible:ct,latestPricesData:dt}};var _t=s(77349),Pt=s(35350);const Ct=(e,t)=>{const s=function(e){return e.slice(0,2)}(e);return`${s.map((e=>t((e=>{const t=new Date;return(0,_t.default)(t,e-(0,Le.Z)(t))})(e)))).join(", ")}${e.length>s.length?Pt.ELLIPSIS:""}`};var Tt=s(98580);const St=e=>{let{label:t,content:s,isContentVisible:a,onContentClose:r,isFilterApplied:n}=e;const{t:i}=(0,d.useTranslation)("widget_prices");return(0,x.jsxs)(x.Fragment,{children:[t,(0,x.jsx)(Tt.Dialog,{visible:a,children:(0,x.jsxs)("div",{className:"Uc056SK1evRSzeza7vzT",children:[(0,x.jsx)(f.Text,{type:f.TextType.Body1Bold,className:"XFp3zIOBR5FNoAnctX2r",children:i("departureDay.label")}),s,(0,x.jsx)(Me.Button,{className:"lCXvvk8QPwhFsU58Iiep",onClick:r,children:i(n?"departureDay.ok":"departureDay.allDays")})]})})]})};var wt=s(13911);const At=e=>{let{label:t,content:s,isContentVisible:a,onContentClose:r}=e;return(0,x.jsx)(wt.Dropdown,{hideArrow:!0,visible:a,onClose:r,contentClassName:"p_4xaQ9C3BgkwKpXwNQu",position:wt.DropdownPosition.BottomRight,content:(0,x.jsx)("div",{className:"_X_uJgdW3jTJoDXkPy0V",children:s}),children:t})},{$enabled:Bt,toggle:Ft,turnOff:Mt}=(0,w.MR)({sid:"-okmhca",fn:()=>(0,Ue.qs)()});(0,w.UP)({and:[{clock:st.inputs.dayTouched,source:We.l.$isMobile,filter:e=>!e,target:st.inputs.applied}],or:{sid:"-4xkdsc"}}),(0,w.UP)({and:[{clock:Mt,source:We.l.$isMobile,filter:Boolean,target:st.inputs.applied}],or:{sid:"-4tptmt"}});const Et={outputs:{$isOpen:Bt},inputs:{toggle:Ft,close:Mt},internals:{}};var qt=s(9005),Ut=s(584);const It=e=>{const t=(0,Ut.default)(new Date,{weekStartsOn:e??void 0});return(0,qt.default)({start:t,end:(0,_t.default)(t,6)})};const Ot=()=>{const{t:e}=(0,d.useTranslation)("widget_prices"),{isMobile:t,possibleDays:s,selectedDays:r,appliedDays:n,isApplied:i,dayTouched:c,reset:l,isOpen:u,toggle:p,close:h}=(0,o.eY)({isMobile:We.l.$isMobile,possibleDays:Nt.outputs.$possibleDepartureDays,selectedDays:st.outputs.$daysSelected,appliedDays:st.outputs.$daysApplied,isApplied:st.outputs.$applied,dayTouched:st.inputs.dayTouched,reset:st.inputs.reset,isOpen:Et.outputs.$isOpen,toggle:Et.inputs.toggle,close:Et.inputs.close}),m=i&&!u,v=(0,Re.useWeekStartsOn)(),y=(0,Re.useToken)("ts_day_short"),g=(0,a.useCallback)((e=>!!s&&!s.includes(e)),[s]),$=(0,x.jsx)(He.ChipArrow,{className:"vxWtAcuPNDTloBS59h7Q",isDisabled:!1,isActive:u,onClick:p,isSelected:i,onDeselect:l,children:m?e("departureDay.departureOn",{days:Ct(n,y)}):e("departureDay.label")}),j=(0,x.jsx)("div",{className:ie()("oOBw1a7V3zJYH_1Edt11",t&&"VcONmnFFnmmGqRGboUHU"),children:It(v).map((e=>{const t=(0,Le.Z)(e);return(0,x.jsx)(He.Chip,{isActive:!1,isSelected:r.includes(t),isDisabled:g(t),onClick:()=>c(t),children:(0,x.jsx)("span",{className:ie()("gpN7kTuoPp6eNGq5Otf1",(0,ze.Z)(e)&&"u41kGZ725Mm19bdNpIqg"),children:y(e)})},t)}))});return t?(0,x.jsx)(St,{label:$,content:j,isFilterApplied:i,isContentVisible:u,onContentClose:h}):(0,x.jsx)(At,{label:$,content:j,isContentVisible:u,onContentClose:h})};var Vt={item:"lN6rH5inZEi9NiOXmOzY"};const{DirectFilter:zt}=B.jm.components,Lt=e=>{let{className:t}=e;const{direct:s,touchedDirect:a}=(0,o.eY)({direct:Ve.outputs.$direct,touchedDirect:Ve.inputs.touchedDirect});return(0,x.jsx)("nav",{className:ie()(Vt.filters,t),children:(0,x.jsxs)(qe.e,{children:[(0,x.jsx)(qe.e.Item,{className:Vt.item,children:(0,x.jsx)(Ot,{})}),(0,x.jsx)(qe.e.Item,{className:Vt.item,children:(0,x.jsx)(zt,{isSelected:s,onChange:a})})]})})};var Rt=s(76540),Ht=s(26929),Wt=s(35292),Gt=s(3151),Jt=s(19502),Kt=s(313),Zt=s(42699),Qt=s(67090),Xt=s(6229),Yt=s(8400),es=s.n(Yt);const ts=e=>({day:e,dot:!0,inInterval:!1}),ss=e=>{let{start:t,end:s}=e;const{t:a}=(0,d.useTranslation)("component_calendar"),{dateFnsLocale:r}=(0,Jt.useLocaleContext)(),n=(()=>{const e=(0,Re.useWeekStartsOn)(),t=(0,Re.useToken)("ts_day_full");return It(e).map((e=>t(e)))})(),i=((e,t,s)=>{const a=((e,t,s)=>(0,qt.default)({start:(0,Ut.default)(e,{locale:s}),end:(0,Qt.default)(t,{locale:s})}).map((s=>(0,Kt.default)(s,e)||(0,Zt.default)(s,t)?ts(s):(e=>({day:e,dot:!1,inInterval:!0}))(s))))((0,Xt.getDateOnly)(e),(0,Xt.getDateOnly)(t),s),r=es()(a,7);if(1===r.length){const e=a[0].day,t=(0,qt.default)({start:(0,Xt.getPrevWeekDay)(e),end:(0,Xt.getPrevDay)(e)}).map(ts);r.unshift(t)}if(2===r.length){const e=a[a.length-1].day,t=(0,qt.default)({start:(0,Xt.getNextDay)(e),end:(0,Xt.getNextWeekDay)(e)}).map(ts);r.push(t)}return r.length>3&&(r.splice(2,r.length-3),r[1].forEach((e=>{e.dot=!0}))),r})(t,s,r),c=(0,Re.useToken)("ts_day_month_year");return(0,x.jsxs)(f.Text,{tag:"table",className:"_33yPRxVOEghJrQxNt0C_",type:f.TextType.CaptionSemi,children:[(0,x.jsx)("thead",{children:(0,x.jsx)("tr",{className:ce.visuallyHidden,children:n.map((e=>(0,x.jsx)("th",{children:e},e)))})}),(0,x.jsx)("tbody",{children:i.map(((e,r)=>(0,x.jsx)("tr",{className:"sLj_71xtrrQOfTMhyoHf",children:e.map(((e,n)=>{const o=e.inInterval?((e,t,s)=>{var a,r;const n=["_ddewe9ipY45o4jSL6wt"],i=e[t][s-1],c=e[t][s+1],o=null===(a=e[t-1])||void 0===a?void 0:a[s],l=null===(r=e[t+1])||void 0===r?void 0:r[s];return null!=o&&o.inInterval&&n.push("ybKiGSWsETUEZeDDNqj4"),null!=i&&i.inInterval&&n.push("cZMq_OrG5INeKTZ1_lcZ"),null!=i&&i.inInterval||null!=o&&o.inInterval||n.push("PLwIxrUPRUq4Zc5t4Dwe"),null!=i&&i.inInterval||null!=l&&l.inInterval||n.push("Tkm8KmH7MMmFh9jAOTFe"),null!=c&&c.inInterval||null!=o&&o.inInterval||n.push("eJa2FXn0wvm5f5WGzJfM"),null!=c&&c.inInterval||null!=l&&l.inInterval||n.push("nHcXhK_yLtdRU23e1FuT"),n})(i,r,n):[];return(0,x.jsx)("td",{className:ie()("En6lH1Lz0IkB1v2rf4IA",(0,ze.Z)(e.day)&&"n6b1SrEQkjjyr8Zy2iJk",...o),children:e.dot?(0,x.jsx)("span",{className:"tcGU0AZoREa3KrmmrUoV",children:"・"}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("strong",{className:ce.visuallyHidden,children:[(0,Gt.default)(t,e.day)&&a("intervalStart"),(0,Gt.default)(s,e.day)&&a("intervalEnd")]}),(0,x.jsx)("div",{className:ce.visuallyHidden,children:c(e.day)}),(0,x.jsx)("span",{"aria-hidden":!0,children:e.day.getDate()})]})},Number(e.day))}))},`${Number(e[0].day)}-${Number(e[e.length-1].day)}`)))})]})};var as="AU6wRXRRWxdB38RRwOsi",rs="MWfbh8IZwnvC4tIrAUXW",ns="Om3_G3KK9nQijrrT_Big",is="q8xUNGDckzuk8tvLFSpV",cs="TWEaPWebnNpx7PojjiTA",os="iy3QiWl3F12G7WtleauB",ls="MzYzhHtsELcMA4V6Vqvp";const us=e=>{let{departDate:t,returnDate:s,price:a,currency:r,segments:n,foundAt:i,className:c}=e;const{t:o}=(0,d.useTranslation)("widget_prices"),{duration:l,interval:u,date:p,weekday:h,year:m,timeAgo:v}=(0,Wt.e)(t,s,i);return(0,x.jsxs)("article",{className:ie()(as,c),children:[(0,x.jsxs)("div",{className:rs,children:[(0,x.jsx)(f.Text,{className:is,type:f.TextType.Title4Bold,tag:"h3",children:(0,x.jsx)(Rt.Price,{value:a,currency:r})}),(0,x.jsx)(Ht.F,{className:os,segments:n}),(0,x.jsx)(f.Text,{transformOnMobile:!0,className:cs,tag:"p",type:f.TextType.CaptionRegular,children:o("foundAt",{at:v})})]}),(0,x.jsx)("div",{className:ns,children:(0,x.jsxs)("div",{className:"rq_2UjX6uSygtcKskrAo",children:[(0,x.jsxs)("div",{className:"qwk70Z35yEMC7TbUCBbi",children:[(0,x.jsxs)(f.Text,{className:"TDJNZEUJ0HUqLohdyZV7",type:f.TextType.Body2Semi,tag:"p",children:[p||u," ",m&&(0,x.jsx)("span",{className:"MF4HwniR4ZR6rqc7lbsT",children:m})]}),(0,x.jsx)(f.Text,{className:"e7ofBU0IVHdqpKKYZS_j",type:f.TextType.Body3Regular,tag:"span",children:h||l})]}),(0,x.jsx)(ss,{start:t,end:s||t})]})})]})},ds=e=>{let{className:t}=e;const{t:s}=(0,d.useTranslation)("widget_prices");return(0,x.jsxs)("div",{className:ie()(as,"g3BYovLCSEvxxgHJE_qA",t),children:[(0,x.jsx)("p",{className:ce.visuallyHidden,children:s("loadingAllPrices")}),(0,x.jsxs)("div",{"aria-hidden":!0,className:rs,children:[(0,x.jsx)("div",{className:ie()(is,ls)}),(0,x.jsx)("div",{className:ie()(os,ls)}),(0,x.jsx)("div",{className:ie()(cs,ls)})]}),(0,x.jsx)("div",{"aria-hidden":!0,className:ie()(ns,ls)})]})};const ps=e=>{let{className:t,onClick:s}=e;const{t:a}=(0,d.useTranslation)("widget_prices");return(0,x.jsx)("button",{className:ie()("VIoNM3smUQt6dLLBmOPK",t),onClick:s,children:(0,x.jsx)("span",{className:ce.visuallyHidden,children:a("select")})})};var hs="BtdhdVGN4HlVOzR1Ldya";const ms=()=>{const{currency:e,numberOfTickets:t,cheapest:s,cheapestDirect:a,cheapestConvenient:r,prices:n,clickCard:i}=(0,o.eY)({currency:A.y.outputs.$currency,numberOfTickets:E.l.outputs.$seatCount,cheapest:Nt.outputs.$cheapest,cheapestDirect:Nt.outputs.$cheapestDirect,cheapestConvenient:Nt.outputs.$cheapestConvenient,prices:Nt.outputs.$filteredPrices,clickCard:Nt.inputs.userClickedCard});return(0,x.jsx)("ul",{className:"GkLr26V8M3pAA7m6YBLS",children:n.map((n=>{let{signature:c,value:o,segments:l,foundAt:u,...d}=n;const p=new Date(d.departDate),h=d.returnDate?new Date(d.returnDate):null;return(0,x.jsxs)("li",{className:"JpAj63yErlK2mEKQ1Wjl",children:[c===(null==s?void 0:s.signature)&&(0,x.jsx)(C,{className:hs,type:"cheapest"}),c===(null==a?void 0:a.signature)&&(0,x.jsx)(C,{className:hs,type:"cheapestDirect"}),c===(null==r?void 0:r.signature)&&(0,x.jsx)(C,{className:hs,type:"cheapestConvenient"}),(0,x.jsx)(us,{className:"DlKikR9GdreVY2nwbPnd",price:o*t,departDate:p,returnDate:h,segments:l,currency:e,foundAt:u}),(0,x.jsx)(ps,{className:"WyCOAfKiEjV16eDTLQk5",onClick:()=>i({departDate:p,returnDate:h})})]},c)}))})};const vs=()=>{const{t:e}=(0,d.useTranslation)("widget_prices");return(0,x.jsxs)("div",{className:"mJpDHJHxEv4x0r5_tZFH",children:[(0,x.jsx)(k.Icon24ControlsSearch,{className:"tmrAv9k1zIEvPBi0PiLK"}),(0,x.jsx)(f.Text,{transformOnMobile:!0,className:"jtnP8akTIsTr1rfqFz9h",type:f.TextType.Body1Semi,tag:"p",children:e("noResults")})]})};var ys={modal:"B6QMlASnoKX2oAUaiFh4",filters:"kC69uWOapuoJHuBh4Km2",content:"EbtsNvwhEqB02I97QteI"};const xs=()=>{const{t:e}=(0,d.useTranslation)("widget_prices"),{destination:t,numberOfPassengers:s,prices:a,status:r,isModalVisible:n,closeModal:i,clickButton:c}=(0,o.eY)({destination:q.q.outputs.$destination,numberOfPassengers:E.l.outputs.$paxCount,prices:Nt.outputs.$filteredPrices,status:Nt.outputs.$status,isModalVisible:Nt.outputs.$isModalVisible,closeModal:Nt.inputs.closeModal,clickButton:Nt.inputs.userClickedButton}),l=e("passengers",{count:s});return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(Me.Button,{size:Me.ButtonSize.M,priority:Me.ButtonPriority.Secondary,"data-test-id":"prices-all_prices_button",onClick:c,children:e("allPrices")}),(0,x.jsxs)(Ee.Modal,{visible:n,onClose:i,className:ys.modal,children:[(0,x.jsx)(Ee.Modal.Header,{title:null==t?void 0:t.name,subtitle:`${l}, ${e("economy")}`}),"done"===r&&(0,x.jsx)(Lt,{className:ys.filters}),(0,x.jsxs)("div",{className:ys.content,children:["pending"===r&&(0,x.jsx)(ds,{className:ys.card}),"done"===r&&(a.length>0?(0,x.jsx)(ms,{}):(0,x.jsx)(vs,{}))]})]})]})},gs=m.u.createEvent({sid:"-y9g6ef"});const $s=e=>{let{className:t}=e;const{t:s}=(0,d.useTranslation)("widget_prices"),a=(0,o.eY)(gs);return(0,x.jsx)(Me.Button,{className:ie()("RWSWs5rOJ3W3RRFy6_QS",t),size:Me.ButtonSize.M,priority:Me.ButtonPriority.Primary,"data-test-id":"prices-all_tickets_button",onClick:a,children:s("allTickets")})};var js=s(64441);const{pricesFlag:fs,autosearchFlag:Ds,howToGetFlag:ks}=js.i.outputs,bs=(0,w.$e)({and:[Ds.$value,(0,ue.x)(de.B.outputs.$isAviaFormActive,pe.N.outputs.$isFlexibleSearch),(e,t)=>!t&&e],or:{sid:"jkvk68"}}),Ns=fs.$value,_s=(0,w.$e)({and:[ks.$value,(0,ue.x)(de.B.outputs.$isAviaFormActive,pe.N.outputs.$isFlexibleSearch),(e,t)=>!t&&e],or:{sid:"ml3rhk"}}),Ps=(0,w.$e)({and:[M.l.outputs.$dateParams,M.l.outputs.$dateScenario,h.G.outputs.$fullnessPercentage,bs,Ns,_s,J,he._.outputs.$isEconomy,(e,t,s,a,r,n,i,c)=>{let{departMonths:o,departDateFrom:l,departDateTo:u,periodDateFrom:d,periodDateTo:p,oneWay:h}=e;if(!r)return null;if(!c)return null;switch(t){case z._5.NoDates:return n?null:s>50?{type:T.PriceChart,action:S.FillDates}:i?{type:T.NoPrices,action:S.FillDates}:{type:T.BestPrices,action:S.StartSearch};case z._5.FlexibleDates:return i?{type:T.NoPrices,action:S.FillDates}:!h&&o&&o.length>=1?{type:T.BestPrices,action:S.FillDates,showAllPrices:!0}:l&&u||d&&p?{type:T.BestPrices,action:S.StartSearch,showAllPrices:!0}:s>50?{type:T.PriceChart,action:S.FillDates}:{type:T.BestPrices,action:S.FillDates,showAllPrices:!0};case z._5.ExactDates:return a?null:i?{type:T.NoPrices,action:S.StartSearch}:{type:T.BestPrices,action:S.StartSearch,showAllTickets:!0};default:return null}}],or:{sid:"-9cq79d"}});var Cs=s(94028),Ts=s(59399);const{ariadneData:Ss}=O.a.inputs,ws=(0,w.$e)({and:[{priceChartInput:h.G.outputs.$priceChartVariables.map((e=>e.input)),bestPricesInput:Q.map((e=>e.input)),brand:U.U.outputs.$brand,fetchPriceChart:M.l.outputs.$dateParams.map((e=>(e=>{let{period:t,oneWay:s,departMonths:a}=e;return t===z.ae.FLEXIBLE?Boolean(s&&1===(null==a?void 0:a.length)):t!==z.ae.RANGES&&t!==z.ae.PERIOD})(e)))}],or:{sid:"nmhlf4"}}),As=m.u.createEvent({sid:"-r3lfrl"}),Bs=Ss({graphQL:{query:F.tk,operationName:"min_prices",variables:ws},fetch:{clock:As},contract:F.zT,mapResult:{source:B.jm.outputs.$exploreFilters,fn:F.cs}}),Fs=m.u.createEvent({sid:"-clv7va"}),Ms=(0,Ts.g)({source:Fs,timeout:500}),Es=(0,w.MT)("initial",{sid:"1xfdh2"}).on(Fs,(()=>"pending")).on(Ms,(()=>"done"));(0,w.UP)({and:[{clock:Bs.$status,target:Es}],or:{sid:"-99tg7r"}});const qs=(0,w.$e)({and:[q.q.outputs.$origin,q.q.outputs.$destination,M.l.outputs.$dateParams,(e,t,s)=>e&&t?((e,t,s)=>{const{departMonths:a,minTripDuration:r,maxTripDuration:n,departDate:i,departDateFrom:c,departDateTo:o,returnDate:l,returnDateFrom:u,returnDateTo:d,periodDateFrom:p,periodDateTo:h}=s;return`${e.iata}_${t.iata}_${a&&`${a.join(",")}_${r}_${n}`||p&&h&&`${p}_${h}_${r}_${n}`||c&&o||u&&d&&`${c}_${o}_${u}_${d}`||`${i}_${l}`}`})(e,t,s):"unknown direction"],or:{sid:"-4slgvv"}});const Us=()=>{const{isMobile:e}=c(),{isVisible:t,activeView:s,status:a,directionKey:r}=(0,o.eY)({isVisible:Cs.$isVisible,activeView:Ps,status:Es,directionKey:qs});if(!t)return null;if("pending"===a)return(0,x.jsx)(u.A,{className:"YU2DcuH8tM7XtZcUUjLi",children:(0,x.jsx)(l.Spinner,{className:"V4u8J4lAPdKVZdLND_KQ",size:e?l.SpinnerSize.M:l.SpinnerSize.L})});if("fail"===a||(null==s?void 0:s.type)===T.NoPrices)return(0,x.jsx)(D,{animated:!0,promotedAction:(null==s?void 0:s.action)??S.StartSearch},r);if("done"===a)switch(null==s?void 0:s.type){case T.PriceChart:return(0,x.jsx)(j,{animated:!0},r);case T.BestPrices:return(0,x.jsxs)(Fe,{animated:!0,mainAction:s.action,children:[s.showAllPrices&&(0,x.jsx)(xs,{}),s.showAllTickets&&(0,x.jsx)($s,{})]},r);default:return null}return null};var Is=s(74371);(0,w.UP)({and:[{clock:gs,source:{origin:q.q.outputs.$origin,destination:q.q.outputs.$destination,departDate:me.J.outputs.exact.$departDate,returnDate:me.J.outputs.exact.$returnDate},filter:Is.X.aviaForm.outputs.$isValidForSearch,fn:e=>({...e,requestSource:le.MJ.BestPrices}),target:le.u8.inputs.startSearch}],or:{sid:"jw2fu4"}});var Os=s(13099),Vs=s(77195),zs=s(6823);const Ls=Os.Q.inputs.datesSourceUpdated.prepend((()=>z.lW.PriceChart));(0,w.UP)({and:[{clock:De,target:[Vs.H,Ls]}],or:{sid:"us4v4r"}}),(0,w.UP)({and:[{clock:De,fn:e=>e.departDate,target:me.J.inputs.exact.fillDepartDate}],or:{sid:"ut8gbh"}}),(0,w.UP)({and:[{clock:De,fn:e=>e.returnDate,target:me.J.inputs.exact.changeReturnDate}],or:{sid:"v82wc8"}}),(0,w.UP)({and:[{clock:zs.Fs,source:Cs.$isVisible,filter:e=>!e,target:be}],or:{sid:"vokq52"}});var Rs=s(38032),Hs=s(49250);(0,w.UP)({and:[{source:Hs.Vx.aviaFormSubmitted,filter:e=>{let{origin:t,destination:s,departDate:a}=e;return Array.isArray(a)&&(0,ve.bx)(t,s)},target:Cs.drawAttention}],or:{sid:"xx587e"}}),(0,w.UP)({and:[{clock:Is.X.aviaForm.inputs.aviaFormSubmitted,filter:(0,ue.x)((0,Rs.f)(Is.X.aviaForm.outputs.$isValidForSearch),(0,w.$e)({and:[q.q.outputs.$origin,q.q.outputs.$destination,ve.bx],or:{sid:"-kkcaow"}})),target:Cs.drawAttention}],or:{sid:"ydn208"}}),(0,w.UP)({and:[{clock:_e,filter:Ns,target:Cs.show}],or:{sid:"yxfnd8"}}),(0,w.UP)({and:[{clock:Pe,filter:Ns,target:Cs.hide}],or:{sid:"za2x0j"}}),H.on(X.$data,((e,t)=>null==t?void 0:t.cheapest)).on(Bs.$data,((e,t)=>null==t?void 0:t.cheapest)),G.on(X.$data,((e,t)=>null==t?void 0:t.cheapestConvenient)).on(Bs.$data,((e,t)=>null==t?void 0:t.cheapestConvenient)),W.on(X.$data,((e,t)=>null==t?void 0:t.cheapestDirect)).on(Bs.$data,((e,t)=>null==t?void 0:t.cheapestDirect)),(0,w.UP)({and:[{clock:[A.y.outputs.$currency,h.G.inputs.userChangedTripType,B.jm.outputs.$exploreFilters],source:Ps,filter:e=>(null==e?void 0:e.type)===T.BestPrices,target:Z}],or:{sid:"alrs10"}}),(0,w.UP)({and:[{source:ee.open,target:K}],or:{sid:"b3d70k"}}),(0,w.UP)({and:[{clock:Cs.initialized,target:js.i.inputs.requestPricesFlags}],or:{sid:"xm2k4y"}});const{$exploreFilters:Ws}=B.jm.outputs,{$isEconomy:Gs}=he._.outputs;(0,w.UP)({and:[{clock:Cs.drawAttention,target:Fs}],or:{sid:"-6y9veb"}}),(0,w.UP)({and:[{clock:[Cs.show,Ws.updates],source:[Ps,Gs,Cs.$isVisible],filter:e=>{let[t,s,a]=e;return Boolean(t&&a&&s)},target:As}],or:{sid:"-6viwfi"}}),(0,w.UP)({and:[{clock:[A.y.outputs.$currency,h.G.inputs.userChangedTripType,B.jm.outputs.$exploreFilters],source:Ps,filter:e=>(null==e?void 0:e.type)===T.PriceChart,target:h.G.inputs.requestPriceChart}],or:{sid:"mortje"}}),(0,w.UP)({and:[{clock:y.open,target:v}],or:{sid:"n6d8iy"}}),(0,w.UP)({and:[{source:Bs.$data,fn:e=>(null==e?void 0:e.prices)??[],target:h.G.inputs.changePrices}],or:{sid:"n7gtpo"}}),(0,w.UP)({and:[{source:Cs.initialized,target:h.G.inputs.startPriceChartService}],or:{sid:"nmb9qf"}}),(0,w.UP)({and:[{source:Ce,fn:e=>{let{price:t,currency:s,departDate:a,returnDate:r,searchSource:n,priceSource:i,origin:c,destination:o}=e;return{origin:c,destination:o,departDate:a,returnDate:r||void 0,requestSource:n,expectedPrice:{value:t,currency:s,source:i}}},target:le.u8.inputs.startSearch}],or:{sid:"rm7me5"}});const{createReporter:Js}=Je.I.inputs,Ks={pageName:"main",source:null},Zs=Js({data:{category:"price_chart",label:"price_chart",action:"showed",service:Ge.Service.Explore},payload:{...Ks,userEvent:!1}}),Qs=Js({data:{category:"best_prices",label:"best_prices",action:"showed",service:Ge.Service.Explore},payload:{...Ks,userEvent:!1}});Zs({clock:v}),Qs({clock:K});const Xs=()=>{const e=function(){const e=(0,r.useCurrentBreakpoint)(n.breakpoints);return(0,a.useMemo)((()=>({breakpoint:e,isMobile:(null==e?void 0:e.is([n.BreakpointName.Mobile,n.BreakpointName.MobileLandscape]))||!1})),[e])}();return(0,x.jsx)(a.StrictMode,{children:(0,x.jsx)(i.Provider,{value:e,children:(0,x.jsx)(Us,{})})})}},8400:function(e,t,s){var a=s(14259),r=s(16612),n=s(40554),i=Math.ceil,c=Math.max;e.exports=function(e,t,s){t=(s?r(e,t,s):void 0===t)?1:c(n(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var l=0,u=0,d=Array(i(o/t));l<o;)d[u++]=a(e,l,l+=t);return d}}}]);