"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[4434],{3e3:function(e,t,i){i.d(t,{k:function(){return n}});const s=(0,i(34943).Fj)({sid:"2o9r92"}),n={inputs:{screenOpened:s.createEvent({sid:"-8o2m83"}),screenLoaded:s.createEvent({sid:"e8l7r7"}),screenClosed:s.createEvent({sid:"-j6dtv"}),screenLinkClicked:s.createEvent({sid:"-2jwne5"}),screenLinkClickedAnalytics:s.createEvent({sid:"nifvn3"}),peopleClicked:s.createEvent({sid:"ilpqhv"}),peopleClickedAnalytics:s.createEvent({sid:"f2sbpp"}),contentSharingClicked:s.createEvent({sid:"-ln33ut"}),hotelsClicked:s.createEvent({sid:"qincsy"}),districtPlacesClicked:s.createEvent({sid:"dm1xn0"})}}},82038:function(e,t,i){i.d(t,{v:function(){return r}});var s=i(34943);const n=(0,s.yM)({sid:"-h6c3h5"}),o=(0,s.MT)(!1,{sid:"-nnborc"}),r={inputs:{discoverButtonClicked:n},outputs:{$isButtonVisible:(0,s.MT)(!1,{sid:"-1k2jq4"})},internals:{$isPoiOpenedFromMainScreen:o}}},12230:function(e,t,i){i.r(t),i.d(t,{travelMapPublicApi:function(){return K}});var s=i(3e3),n=i(87083),o=i(55246),r=i(47285),a=i(82407),l=i(26870),c=i(34943),d=i(54423);const u=(0,c.$e)({and:[d.l.$isMobile,d.l.$isDesktop,(e,t)=>e?240:112],or:{sid:"-i2gucd"}}),p=(0,c.$e)({and:[d.l.$isMobile,d.l.$isDesktop,(e,t)=>e?64:140],or:{sid:"-xj2c0w"}}),m={outputs:{$size:(0,c.$e)({and:[u,p],or:{sid:"gh6th4"}}).map((e=>{let[t,i]=e;return{width:t,height:i}}))}};var h=i(36812),g=i(68131),v=i(34922),y=i(4028),x=i(31087);const b=(0,c.$e)({and:[{isUserHasPremium:h.b.outputs.$isAnyPremiumActive,tabs:g.vT.place.outputs.$tabs,hiddenLayer:v.IK.selected.outputs.$hiddenLayer,isPaywallEnabled:y.qF.outputs.$isPaywallEnabled},e=>{let{isUserHasPremium:t,tabs:i,hiddenLayer:s,isPaywallEnabled:n}=e;return i?i.filter((e=>{let{premium:i,is_hidden:o,id:r}=e;return!((null==i?void 0:i.availability)===x.oY.PAYWALLED&&!t&&!n||o&&s!==r)})):[]}],or:{sid:"-y2jvog"}}),f=b.map((e=>1===e.length)),T={outputs:{$tabs:b,$isSingleTab:f}};var P=i(82038),S=i(77349),j=i(49434),k=i(23446),M=i(23190),I=i(23927),w=i(53088);const C="yyyy-MM-dd",N=(0,c.yM)({sid:"7ue0o6"}),$=(0,c.$e)({and:[I.z.outputs.$localeDeprecated,w.y.outputs.$currency,(e,t)=>{const i=new Date,s=(0,S.default)(i,1);return new URLSearchParams({adults:"2",children:"0",locale:e,currency:t.toUpperCase(),checkIn:(0,k.x)(C,i),checkOut:(0,k.x)(C,s),source:j.H_.TrapHotels})}],or:{sid:"-w8laya"}});(0,c.UP)({and:[{clock:N,source:{searchParams:$},fn:(e,t)=>{let{searchParams:i}=e,{hotelId:s}=t;return{pathname:`hotels/${s}`,search:i}},target:M.D.inputs.navigateTo}],or:{sid:"wr7jiq"}});const _={inputs:{openHotel:N},outputs:{$searchParams:$}};var A=i(49116),L=i(95012),B=i(26074),D=i(83904),z=i(45810);const E=(0,c.MT)(null,{sid:"3iz8hb"}),O=(0,c.MT)(!1,{sid:"-9e5zgo"}),R=(0,c.yM)({sid:"1zi42j"}),H=(0,c.yM)({sid:"tkj5c0"}),U=e=>{const t=(0,B.vK)(e,((e,t)=>(0,L.Z)((0,B.II)(e.coordinates),(0,B.II)(t.coordinates))<D.s.MIN_DISTANCE_TO_CLUSTERIZE));return(0,B.Jc)(t)},W=g.vT.place.outputs.$data.map((e=>void 0!==(null==e?void 0:e.start_zoom)?e.start_zoom-D.s.MAX_ZOOM_TO_STOP_REPEL_OFFSET:0));(0,c.UP)({and:[{clock:[a.i.outputs.$placesWithImage.updates,A.h.outputs.$mapboxInstance.updates,a.i.outputs.$poisFromDistrict.updates,O.updates],source:{placesWithImage:a.i.outputs.$placesWithImage,isMobile:d.l.$isMobile,layerType:v.IK.selected.outputs.$layerType,map:A.h.outputs.$mapboxInstance,minZoomToRepel:W,poisFromDistrict:a.i.outputs.$poisFromDistrict,shouldHidePoisFromDistrict:O},filter:e=>{let{layerType:t,placesWithImage:i,map:s}=e;return null!==i&&null!==t&&null!==s},fn:e=>{let{placesWithImage:t,isMobile:i,layerType:s,map:n,minZoomToRepel:o,poisFromDistrict:r,shouldHidePoisFromDistrict:a}=e;if("districts"===s&&(!r.length||i||a))return[];const l=(0,B.Ss)({pins:"districts"===s?r:t,isMobile:Boolean(i),layerType:s,map:n});return(0,B.Zc)({pins:l,map:n,isMobile:Boolean(i),layerType:s,mainPins:U(l),minZoomToRepel:o})},target:E}],or:{sid:"hl7krs"}}),(0,c.UP)({and:[{clock:z.s.outputs.zoomChanged,target:H}],or:{sid:"-cds2vj"}}),(0,c.UP)({and:[{clock:z.s.outputs.zoomChanged,target:R}],or:{sid:"-bzhfg5"}}),(0,c.UP)({and:[{clock:R,source:{map:A.h.outputs.$mapboxInstance,pins:E,isMobile:d.l.$isMobile,layerType:v.IK.selected.outputs.$layerType,minZoomToRepel:W},filter:e=>{let{map:t,pins:i,layerType:s}=e;return Boolean(t&&i&&s)},fn:e=>{let{map:t,pins:i,isMobile:s,layerType:n,minZoomToRepel:o}=e;return(0,B.Zc)({map:t,isMobile:Boolean(s),layerType:n,pins:i,mainPins:U(i),minZoomToRepel:o})},target:E}],or:{sid:"-bwqghc"}}),(0,c.UP)({and:[{clock:H,source:{map:A.h.outputs.$mapboxInstance,layerType:v.IK.selected.outputs.$layerType,poisFromDistrict:a.i.outputs.$poisFromDistrict},filter:e=>{let{layerType:t,poisFromDistrict:i}=e;return"districts"===t&&i.length>0},fn:e=>{let{map:t}=e;return!!t&&t.getZoom()<=D.s.ZOOM_TO_HIDE_POIS_FROM_DISTRICT},target:O}],or:{sid:"-akck9k"}});const Y={outputs:{$layerMapPins:E,$minZoomToRepel:W},inputs:{recalculatePinsPosition:R}};var F=i(73892),Z=i(5157);i(23746);const K={content:s.k,modal:n.o,viewMode:o.w,widget:r.Z,selectedPlace:a.i,mapPoi:l.v,pinSize:m,visibleTabs:T,discoverDirection:P.v,hotelPoi:_,mapboxInstance:A.h,pinsPositioning:Y,zoom:z.s,mapDistrictPins:F.W,poiOpenSource:Z.V}},23746:function(e,t,i){var s=i(34943),n=i(34922),o=i(82407),r=i(3e3),a=i(26870),l=i(55246),c=i(5157),d=i(26210);const u=(0,s.yM)({sid:"-2htzz7"}),p=(0,s.yM)({sid:"-oqzeo1"}),m=(0,s.yM)({sid:"-62acme"}),h=(0,s.yM)({sid:"guttaz"});(0,s.UP)({and:[{source:o.i.outputs.$pin,filter:Boolean,target:u}],or:{sid:"uokkw4"}}),(0,s.UP)({and:[{source:o.i.outputs.$placeAlertPin,filter:Boolean,target:u}],or:{sid:"v3f0wv"}}),(0,s.UP)({and:[{clock:o.i.outputs.$prevPin,filter:Boolean,target:p}],or:{sid:"v6psh1"}}),(0,s.UP)({and:[{clock:o.i.outputs.$prevAlertPin,filter:Boolean,target:p}],or:{sid:"vlk8hs"}}),(0,s.UP)({and:[{source:a.v.outputs.$data,filter:Boolean,target:m}],or:{sid:"w0eoij"}}),(0,s.UP)({and:[{clock:u,source:{tab:o.i.outputs.$tab,viewModeValue:l.w.outputs.$value,openSource:n.IK.sources.outputs.$trapOpenSource,pin:o.i.outputs.$pin,alertPin:o.i.outputs.$placeAlertPin,trapSource:c.V.outputs.$poiOpenSource},fn:e=>{let{tab:t,viewModeValue:i,openSource:s,pin:n,alertPin:o,trapSource:r}=e;const a=(null==o?void 0:o.id)||(null==n?void 0:n.id)||"";return{tab:(null==t?void 0:t.type)??"",premium_type:(0,d.$)(t),view_mode:i,open_source:s,content_id:a,trap_source:r}},target:r.k.inputs.screenOpened}],or:{sid:"w3pg2p"}}),(0,s.UP)({and:[{clock:p,source:{tab:o.i.outputs.$tab,prevTab:o.i.outputs.$prevTab,pin:o.i.outputs.$prevPin,alertPin:o.i.outputs.$prevAlertPin,type:o.i.outputs.$layerType},fn:e=>{let{tab:t,prevTab:i,pin:s,alertPin:n}=e;const o=(null==n?void 0:n.id)||(null==s?void 0:s.id)||"",r=t??i,a=(null==n?void 0:n.name)||(null==s?void 0:s.name)||"";return{tab:(null==r?void 0:r.type)??"",premium_type:(0,d.$)(t),content_id:o,content_name:a}},target:r.k.inputs.screenClosed}],or:{sid:"xg3cah"}}),(0,s.UP)({and:[{clock:h,source:{tab:o.i.outputs.$tab,viewModeValue:l.w.outputs.$value,openSource:n.IK.sources.outputs.$trapOpenSource,pin:o.i.outputs.$pin,trapSource:c.V.outputs.$poiOpenSource},fn:e=>{let{tab:t,viewModeValue:i,openSource:s,pin:n,trapSource:o}=e;return{tab:(null==t?void 0:t.type)??"",premium_type:(0,d.$)(t),content_id:null==n?void 0:n.id,content_name:null==n?void 0:n.name,view_mode:i,open_source:s,trap_source:o}},target:r.k.inputs.screenLoaded}],or:{sid:"yhhcn1"}}),(0,s.UP)({and:[{clock:m,source:{tab:o.i.outputs.$tab,viewModeValue:l.w.outputs.$value,openSource:n.IK.sources.outputs.$trapOpenSource,pin:o.i.outputs.$pin,trapSource:c.V.outputs.$poiOpenSource},fn:e=>{let{tab:t,viewModeValue:i,openSource:s,pin:n,trapSource:o}=e;return{tab:(null==t?void 0:t.type)??"",premium_type:(0,d.$)(t),content_id:null==n?void 0:n.id,content_name:null==n?void 0:n.name,view_mode:i,open_source:s,trap_source:o}},target:r.k.inputs.screenLoaded}],or:{sid:"p4c6al"}}),(0,s.UP)({and:[{clock:r.k.inputs.screenLinkClicked,source:{tab:n.IK.selected.outputs.$layerType,pin:o.i.outputs.$pin,layerType:o.i.outputs.$layerType},fn:(e,t)=>{let{tab:i,pin:s}=e;return{click_url:t,tab:i,content_name:null==s?void 0:s.name}},target:r.k.inputs.screenLinkClickedAnalytics}],or:{sid:"qeiw4x"}}),(0,s.UP)({and:[{clock:r.k.inputs.peopleClicked,source:n.IK.selected.outputs.$layerType,fn:(e,t)=>{let{role:i,contacts:s}=t;return{click_url:s[0].url,tab:e??"",occupation:i,content_source:"direction-guides-content_screen",item_position:null}},target:r.k.inputs.peopleClickedAnalytics}],or:{sid:"qzf2on"}});var g=i(59399),v=i(75427),y=i(53088),x=i(52286),b=i(60229),f=i(79403),T=i(73114),P=i(36999),S=i(31087);(0,s.UP)({and:[{clock:[n.IK.selected.outputs.$poi.updates,y.y.outputs.$currency.updates],target:[a.v.inputs.reset,a.v.inputs.fetch]}],or:{sid:"ew0m29"}}),(0,s.UP)({and:[{clock:n.IK.selected.outputs.$poi,filter:e=>!e,target:a.v.inputs.reset}],or:{sid:"fbyn9q"}}),(0,s.UP)({and:[{source:a.v.outputs.$error,filter:e=>404===(null==e?void 0:e.status),target:[n.IK.wrongMapParamsAlert.inputs.show,v.Y.inputs.close]}],or:{sid:"fqt3ah"}});const{$enabled:j,turnOn:k,turnOff:M}=(0,s.MR)({sid:"xsekwg",fn:()=>(0,T.qs)(!0)});(0,s.UP)({and:[{clock:x.hv.outputs.$layer.updates,target:k}],or:{sid:"ga1w24"}});const I=(0,s.$e)({and:[{isEventEnabled:j,direction:P.Rn.outputs.$direction,isAviasalesBrand:f.U.outputs.$isAviasalesBrand,trapSource:x.YI.outputs.$trapSource,data:a.v.outputs.$data},e=>{let{isEventEnabled:t,direction:i,isAviasalesBrand:s,data:n}=e;return t&&Boolean(i)&&s&&Boolean(n)}],or:{sid:"-la672n"}});(0,s.UP)({and:[{clock:(0,g.g)({source:a.v.outputs.$data.updates,timeout:1500}),source:{shouldSendEvent:I,direction:P.Rn.outputs.$direction,trapSource:x.YI.outputs.$trapSource},filter:e=>{let{shouldSendEvent:t,trapSource:i}=e;return t&&i===S.Ur.DEEPLINK},fn:e=>{let{direction:t}=e;return{title:S.qb.TrapUse,props:{direction:t}}},target:[b.A.inputs.sendUxFeedback,M]}],or:{sid:"h6hr2f"}}),(0,s.UP)({and:[{clock:a.v.outputs.$data.updates,source:{shouldSendEvent:I,direction:P.Rn.outputs.$direction,trapSource:x.YI.outputs.$trapSource},filter:e=>{let{shouldSendEvent:t,trapSource:i}=e;return t&&i!==S.Ur.DEEPLINK},fn:e=>{let{direction:t}=e;return{title:S.qb.TrapUse,props:{direction:t}}},target:[b.A.inputs.sendUxFeedback,M]}],or:{sid:"hqu50s"}});var w=i(13099),C=i(49250),N=i(70161),$=i(3202),_=i(87083);l.w.outputs.$value.on(l.w.inputs.toggle,(e=>e===$.wO.MAP?$.wO.LIST:$.wO.MAP)),l.w.outputs.$value.reset(_.o.inputs.ModalGate.close),(0,s.UP)({and:[{clock:l.w.outputs.$value,source:{tab:n.IK.selected.outputs.$layer,trapSource:n.IK.sources.outputs.$trapSource,exploreId:w.Q.outputs.$exploreId,aviaForm:C.Vx.$aviaForm,direction:P.Rn.outputs.$direction,departDate:N.jR,returnDate:N.Fr},fn:(e,t)=>{var i;let{tab:s,trapSource:n,exploreId:o,aviaForm:r,direction:a,departDate:l,returnDate:c}=e;return{tab:s,view_mode:t,explore_id:o,origin:null==r||null===(i=r.origin)||void 0===i?void 0:i.cityIata,destination:a,depart_date:l,return_date:c,trap_source:n}},target:l.w.outputs.changed}],or:{sid:"-8wyovq"}});var A=i(29260),L=i(5923),B=i(47285);const D=(0,A.m)({events:{modalOpen:n.IK.modal.inputs.open,layerInited:n.IK.selected.outputs.layerInited},reset:n.IK.modal.inputs.close});(0,s.UP)({and:[{clock:D,source:{tab:o.i.outputs.$tab,openSource:n.IK.sources.outputs.$trapOpenSource},fn:(e,t)=>{let{tab:i,openSource:s}=e,{modalOpen:n}=t;return{tab:null==i?void 0:i.type,open_source:s,premium_type:(0,d.$)(i),...n.analytics}},target:B.Z.outputs.trapScreenOpened}],or:{sid:"-1na0n9"}}),(0,s.UP)({and:[{clock:n.IK.modal.outputs.guidesContentClosed,source:{tab:o.i.outputs.$tab,prevTab:(0,L.g)(o.i.outputs.$tab),openSource:n.IK.sources.outputs.$trapOpenSource},fn:e=>{let{tab:t,prevTab:i}=e;const s=t??i;return{tab:null==s?void 0:s.type,premium_type:(0,d.$)(t)}},target:B.Z.outputs.trapScreenClosed}],or:{sid:"-rxqto"}});var z=i(68131),E=i(81155),O=i(61199),R=i(26074);(0,s.UP)({and:[{clock:n.IK.modal.inputs.close,source:E.P.CitiesContentGate.status,filter:e=>e,target:[z.vT.mapStyle.inputs.reset]}],or:{sid:"-e4c32o"}});const H=(0,s.UP)({and:[{source:o.i.outputs.$polygon,filter:Boolean}],or:{sid:"-7h027c"}}),U=(0,s.UP)({and:[{clock:x.hv.inputs.setPoi,source:[x.hv.outputs.$poi,O.aj._1.$poiQuery],filter:e=>{let[t,i]=e;return Boolean(!t&&i)}}],or:{sid:"q44qo6"}}),W=(0,A.m)({events:{polygonChanged:H,byDirectLink:U}});(0,s.UP)({and:[{source:W,fn:e=>{let{polygonChanged:t}=e;const[i,s,n,o]=(0,R.A5)(t);return[[i,s],[n,o]]},target:x.A8.inputs.setInitialBounds}],or:{sid:"-d1uhje"}}),(0,s.UP)({and:[{source:{poi:n.IK.selected.outputs.$poi,tab:o.i.outputs.$tab,isDistrictsTab:o.i.outputs.$isDistrictsTab},filter:e=>{let{poi:t,tab:i,isDistrictsTab:s}=e;return s&&Boolean(null==i?void 0:i.places.some((e=>e.id===t)))},fn:e=>{let{poi:t}=e;return t},target:o.i.outputs.$selectedDistrictPinId}],or:{sid:"-c7lswj"}}),(0,s.UP)({and:[{source:{data:a.v.outputs.$data,pins:z.vT.place.outputs.$flatPinsWithImage,district:o.i.outputs.$selectedDistrictPinId,poi:n.IK.selected.outputs.$poi},filter:e=>{let{district:t,poi:i}=e;return t===i},fn:e=>{let{data:t,pins:i}=e;return t?t.blocks.reduce(((e,t)=>{if("places_list"===t.type){const s=t.block.items.reduce(((e,t)=>{const s=i.find((e=>e.id===t.id));return s&&e.push(s),e}),[]);e.push(...s)}if("places_carousel"===t.type){const s=t.block.items.reduce(((e,t)=>{if("place"!==t.type)return e;const s=i.find((e=>e.id===t.id));return s&&e.push(s),e}),[]);e.push(...s)}return e}),[]):[]},target:o.i.outputs.$poisFromDistrict}],or:{sid:"-bnt7jj"}}),(0,s.UP)({and:[{clock:v.Y.inputs.close,fn:()=>null,target:o.i.outputs.$selectedDistrictPinId}],or:{sid:"-oql94y"}});var Y=i(96799),F=i(1445),Z=i(23190),K=i(45160),q=i(77195),V=i(91486),G=i(82038);const{inputs:J,outputs:X,internals:Q}=G.v,ee=[S.Ur.ZERO_STATE_POI_BIG_CARD,S.Ur.ZERO_STATE_POI_COLLECTION];(0,s.UP)({and:[{clock:v.Y.inputs.open,fn:e=>{let{openSource:t}=e;return ee.some((e=>e===t))},target:Q.$isPoiOpenedFromMainScreen}],or:{sid:"5wan1s"}}),(0,s.UP)({and:[{clock:v.Y.inputs.open,source:F.q.outputs.$origin,fn:(e,t)=>{let{openSource:i,direction:s}=t;return(null==e?void 0:e.iata)!==s&&[...ee,S.Ur.DEEPLINK].some((e=>e===i))},target:X.$isButtonVisible}],or:{sid:"6b532j"}}),(0,s.UP)({and:[{clock:J.discoverButtonClicked,target:x.oC.inputs.close}],or:{sid:"6uxofj"}}),(0,s.UP)({and:[{clock:J.discoverButtonClicked,fn:()=>V.yh.TrapPoi,target:w.Q.inputs.directionSourceUpdated}],or:{sid:"798bux"}});const te=(0,A.m)({events:{pathRemoved:K.y.outputs.pathRemoved,clicked:J.discoverButtonClicked},reset:K.y.outputs.pathAdded});(0,s.UP)({and:[{clock:te,source:{shouldFillAviaForm:Q.$isPoiOpenedFromMainScreen,direction:P.Rn.outputs.$direction,isArkId:P.Rn.outputs.$isArkId},filter:e=>{let{shouldFillAviaForm:t,isArkId:i}=e;return t&&!i},fn:(e,t)=>{let{direction:i}=e,{clicked:{destinationName:s}}=t;return{name:s??"",iata:i??"",cityIata:i??"",type:Y.PlaceType.City}},target:[q.H,F.q.inputs.fillDestination]}],or:{sid:"7sh4mk"}}),(0,s.UP)({and:[{clock:J.discoverButtonClicked,source:{isArkId:P.Rn.outputs.$isArkId,slug:P.Rn.outputs.$slug},filter:e=>{let{isArkId:t,slug:i}=e;return t&&Boolean(i)},fn:e=>{let{slug:t}=e;return{pathname:`/parks/${t}`}},target:Z.D.inputs.navigateTo}],or:{sid:"8q0ktl"}});var ie=i(49116),se=i(54423),ne=i(73892),oe=i(88293);const re=[0,60],ae=[0,0],le=[0,107],ce=[0,0],de=[67,67],ue=[104,104],pe=[67,0],me=[0,67],he=[104,104],ge=(oe.B.Light,oe.B.Dark,oe.B.Light,oe.B.Dark,e=>{let{pin:t,map:i,mapPinRectToRect:s,mapPinToCoordinates:n,mapPinToSize:o}=e;const{x:r,y:a}=((e,t,i)=>i.project((0,R.kI)(t(e))))(t,n,i),{width:l,height:c}=o(t);return s({width:l,height:c,x:r,y:a})}),ve=e=>({...e,x:e.x-e.width/2,y:e.y-e.height}),ye=(e,t,i)=>{const s=ge({pin:e,mapPinToSize:e=>e.originalSize,mapPinRectToRect:ve,mapPinToCoordinates:e=>e.coordinates,map:i}),n=ge({pin:t,mapPinToSize:e=>e.originalSize,mapPinRectToRect:ve,mapPinToCoordinates:e=>e.coordinates,map:i});return(0,R.hH)(s,n)};function xe(e,t,i,s){const n=e.map((e=>function(e,t){const{pins:i,x:s,y:n,...o}=e,r=t.unproject([s,n]);return{originalSize:o,clusterSize:o,arrowSize:o,controlledCoordinates:(0,R.Tc)(r),coordinates:(0,R.Tc)(r),pins:i}}(fe(e,t,i),t)));return(0,R.vK)(n,((e,i)=>ye(e,i,t)),s).map((e=>{const s=e.map((e=>e.pins)).flat(),{pins:n,...o}=fe(s,t,i);return function(e,t,i,s){const n=e.length>1,o=s?28:34,r=t.x,a=t.y-t.height+o,l=r-t.width/2;return[...e].sort((e=>(t,i)=>{const{y:s}=e.project((0,R.kI)(t.coordinates)),{y:n}=e.project((0,R.kI)(i.coordinates));return s-n})(i)).map(((e,t)=>{let s={};if(n){const n=l+e.clusterSize.width/2,r=t%2?n+16:n,c=a+t*(o+4),d=i.unproject([r,c]);s=(0,R.Tc)(d)}else s=e.coordinates;return{...e,...be(n),controlledCoordinates:s}}))}(n,o,t,i)}))}const be=e=>({displayType:e?$.ZF.CLUSTER:$.ZF.PIN,anchor:e?$.yJ.NONE:$.yJ.BOTTOM});function fe(e,t,i){const s=i?28:34,n=e.length>1,o=n?e.filter((e=>e.type===S.AS.PLACE)):e,r=o.map((e=>{const i=t.project((0,R.kI)(e.coordinates)),s=n?e.clusterSize:e.originalSize;return{id:e.id,...i,...s}})),a=r.reduce(((e,t)=>e.x<t.x?e:t)),l=r.reduce(((e,t)=>e.x>t.x?e:t)),c=r.reduce(((e,t)=>e.y>t.y?e:t)).y,d=(l.x-a.x)/2+a.x,{width:u}=r.reduce(((e,t)=>e.width>t.width?e:t));return{x:d,y:c,width:u,height:r.length*(s+4),pins:o}}const Te=e=>e.type===S.AS.PLACE,Pe=(e,t,i)=>{const{x:s,y:n}=t.project((0,R.kI)(e.coordinates)),{width:o,height:r}=(e=>{const{clientWidth:t,clientHeight:i}=e.getContainer();return{width:t,height:i}})(t),a=i?68:0;return s+e.originalSize.width/3>=0&&s-e.originalSize.width/3<=o&&n-e.originalSize.height/3>=a&&n-2*e.originalSize.height/3<=r};var Se=i(41387),je=i(67075);const ke=e=>{let{pin:t,map:i,mapPinRectToRect:s,mapPinToCoordinates:n,mapPinToSize:o}=e;const{x:r,y:a}=((e,t,i)=>i.project((0,R.kI)(t(e))))(t,n,i),{width:l,height:c}=o(t);return s({width:l,height:c,x:r,y:a})},Me=e=>({...e,x:e.x,y:e.y-e.height/2}),Ie=e=>{const{clientWidth:t,clientHeight:i}=e.getContainer();return{width:t,height:i}};function we(e,t){const{width:i,height:s}=Ie(t),{x:n,y:o}=e,r=i/2,a=s/2;return 180*Math.atan2(o-a,n-r)/Math.PI}const Ce=(e,t)=>{const i=we(e,t);return i<=-45&&i>=-135},Ne=(e,t)=>{const i=we(e,t);return i>=45&&i<=135},$e=(e,t)=>{const i=we(e,t);return i>135||i<-135},_e=(e,t)=>{const i=we(e,t);return i>=-45&&i<=45},Ae=(e,t)=>{const i=we(e,t);return i>=-45&&i<=0},Le=(e,t)=>{const i=we(e,t);return i>=0&&i<=45},Be=(e,t)=>i=>{const s=((e,t,i)=>{const s=Ie(t),n=t.project((0,R.kI)(e.coordinates)),o={fy:void 0,fx:void 0},r=e.arrowSize.height,a=e.arrowSize.width,{width:l,height:c}=s;return Ce(n,t)&&(o.fy=i?68:14),Ne(n,t)&&(o.fy=i?c-r-12-56:c-r-14),$e(n,t)&&(o.fx=i?12+a/2:14+a/2),_e(n,t)&&(o.fx=i?l-a/2-12:l-a/2-14),o})(i,e,t),{x:n,y:o}=e.project((0,R.kI)(i.coordinates));return{id:i.id,originalPoint:{x:n,y:o-i.arrowSize.height/2},...ke({pin:i,mapPinToSize:e=>e.arrowSize,mapPinRectToRect:Me,mapPinToCoordinates:e=>e.controlledCoordinates,map:e}),...s}},De=(e,t)=>{const i=t.project((0,R.kI)(e.coordinates));return Ce(i,t)?$.VP.TOP:Ne(i,t)?$.VP.BOTTOM:$e(i,t)?$.VP.LEFT:$.VP.RIGHT},ze=(e,t)=>i=>{const s=e.find((e=>e.id===i.id)),n=t.unproject([s.x,s.y+s.height/2]);return{...i,anchor:De(i,t),controlledCoordinates:(0,R.Tc)(n)}},Ee=(e,t)=>e.originalPoint.x-t.originalPoint.x,Oe=(e,t)=>t.originalPoint.x-e.originalPoint.x,Re=(e,t)=>e.originalPoint.y-t.originalPoint.y,He=e=>{let{pins:t,map:i,isMobile:s,padding:n}=e;const[o,r]=n,a=[...t].map(Be(i,s)).sort(Ee),l=[...a].sort(Oe),c=(0,Se.Z)((e=>e.width/Math.sqrt(2))).iterations(10),d=(0,je.Z)(a).stop(),{width:u}=Ie(i);let p=u-r,m=o;return d.force("collide",c).force("boxingForce",(function(){for(const e of a)e.vx=0,e.x<=m+e.width/2&&(e.fx=m+e.width/2,m+=e.width-15);for(const e of l)e.vx=0,e.x>=p-e.width/2&&(e.fx=p-e.width/2,p-=e.width-15)})).force("recalculationBoundingBox",(function(){const e=a.reduce(((e,t)=>e+t.width),0),t=u-r;for(let s=0;s<a.length;s+=1){const n=a[s];if(n.vx=0,e>=u)if(0===s)n.fx=n.width/2;else{var i;const o=(null===(i=a[s-1])||void 0===i?void 0:i.fx)??0,r=n.width*t/e+o;n.fx=Math.min(r,t-n.width/2)}}})).force("x",(function(){for(const e of a)e.vx=0,e.fx||e.originalPoint.x<=m+e.width/2&&(e.fx=m+e.width/2,m+=e.width-15);for(const e of l)e.vx=0,e.fx||e.originalPoint.x>=p-e.width/2&&(e.x=p-e.width/2,p-=e.width-15)})).tick(1),t.map(ze(a,i))},Ue=e=>{let{pins:t,isMobile:i,map:s,padding:n}=e;const[o,r]=n,a=[...t].map(Be(s,i)).sort(Re),l=(0,Se.Z)((e=>e.height/Math.sqrt(2))).iterations(10),c=(0,je.Z)(a).stop(),d=Ie(s),u=o,p=d.height-r,{length:m}=a;return c.force("collide",l).force("boxing",(function(){for(let e=0;e<a.length;e+=1){const t=a[e];t.vy=0;const i=u+e*t.height,s=p-(m-1-e)*t.height-t.height;t.originalPoint.y<=i?t.fy=i:t.originalPoint.y>=s?t.fy=s:t.fy=t.originalPoint.y}})).tick(1),t.map(ze(a,s))},We=(e,t)=>i=>{const s=e.project((0,R.kI)(i.coordinates));return t(s,e)},Ye=(e,t)=>{const i=Ie(t).height/2+48;return{top:e?ae:re,bottom:e?ce:le,left:e?ue:de,rightTop:e?he:[pe[0],i],rightBottom:e?he:[i,me[1]],right:he}};ne.W.outputs.$mapDistrictPins.reset(n.IK.modal.inputs.close),(0,s.UP)({and:[{clock:ne.W.inputs.setDistrictPinSize,source:{pins:ne.W.outputs.$mapDistrictPins},filter:(e,t)=>{var i;let{pins:s}=e,{type:n,id:o}=t;const r=(null==s||null===(i=s.find((e=>e.id===o)))||void 0===i?void 0:i.originalSize.width)??0;return n===$.ZF.PIN&&0===r},fn:(e,t)=>t,target:ne.W.internals.initDistrictPinSize}],or:{sid:"rj7s0f"}}),(0,s.UP)({and:[{clock:ne.W.inputs.setDistrictPinSize,source:{pins:ne.W.outputs.$mapDistrictPins},filter:(e,t)=>{var i;let{pins:s}=e,{type:n,id:o}=t;const r=(null==s||null===(i=s.find((e=>e.id===o)))||void 0===i?void 0:i.clusterSize.width)??0;return n===$.ZF.CLUSTER&&0===r},fn:(e,t)=>t,target:ne.W.internals.setDistrctClusterPinSize}],or:{sid:"s1ws6p"}}),(0,s.UP)({and:[{clock:ne.W.inputs.setDistrictArrowSize,source:{pins:ne.W.outputs.$mapDistrictPins},filter:(e,t)=>{var i;let{pins:s}=e,{id:n}=t;return 0===((null==s||null===(i=s.find((e=>e.id===n)))||void 0===i?void 0:i.arrowSize.width)??0)},fn:(e,t)=>{let{pins:i}=e,{id:s,...n}=t;return i.map((e=>e.id===s?{...e,arrowSize:n}:e))},target:ne.W.outputs.$mapDistrictPins}],or:{sid:"sklscz"}}),(0,s.UP)({and:[{clock:ne.W.internals.initDistrictPinSize,source:{pins:ne.W.outputs.$mapDistrictPins},filter:e=>{let{pins:t}=e;return Boolean(t)},fn:(e,t)=>{let{pins:i}=e,{id:s,width:n,height:o}=t;return i.map((e=>e.id===s?{...e,originalSize:{width:n,height:o}}:e))},target:ne.W.outputs.$mapDistrictPins}],or:{sid:"th1nda"}}),(0,s.UP)({and:[{clock:ne.W.internals.setDistrctClusterPinSize,source:{pins:ne.W.outputs.$mapDistrictPins},filter:e=>{let{pins:t}=e;return Boolean(t)},fn:(e,t)=>{let{pins:i}=e,{id:s,...n}=t;return i.map((e=>e.id===s?{...e,clusterSize:n}:e))},target:ne.W.outputs.$mapDistrictPins}],or:{sid:"ue1ayy"}}),(0,s.UP)({and:[{clock:[z.vT.place.outputs.$districtPins.updates,ie.h.outputs.$mapboxInstance.updates],source:{districtPins:z.vT.place.outputs.$districtPins,map:ie.h.outputs.$mapboxInstance,pins:ne.W.outputs.$mapDistrictPins},filter:e=>{let{districtPins:t,map:i,pins:s}=e;return Boolean(t&&i)&&!s},fn:e=>{let{districtPins:t}=e;return(e=>e.map((e=>{const t=(e=>(0,z.VO)(e)?{width:40,height:42}:{width:0,height:0})(e);return{...e,controlledCoordinates:e.coordinates,originalSize:t,clusterSize:t,arrowSize:t}})))(t)},target:ne.W.outputs.$mapDistrictPins}],or:{sid:"uzha41"}}),(0,s.UP)({and:[{clock:[ne.W.inputs.recalculatePinsPosition,ne.W.outputs.$mapDistrictPins.updates,o.i.outputs.$isDistrictsTab.updates,o.i.outputs.$poisFromDistrict.updates],source:{pins:ne.W.outputs.$mapDistrictPins,map:ie.h.outputs.$mapboxInstance,isDistrictsTab:o.i.outputs.$isDistrictsTab,selectedDistrictPinId:o.i.outputs.$selectedDistrictPinId,poisFromDistrict:o.i.outputs.$poisFromDistrict,isMobile:se.l.$isMobile},filter:e=>{let{pins:t,map:i,isDistrictsTab:s}=e;return Boolean(t&&i)&&s},fn:e=>{let{pins:t,map:i,poisFromDistrict:s,selectedDistrictPinId:n,isMobile:o}=e;return t.filter((e=>(e.id!==n||!s.length)&&Pe(e,i,o)))},target:ne.W.internals.recalculatePins}],or:{sid:"-cvuquy"}}),(0,s.UP)({and:[{clock:[ne.W.inputs.recalculatePinsPosition,ne.W.outputs.$mapDistrictPins.updates,o.i.outputs.$isDistrictsTab.updates],source:{pins:ne.W.outputs.$mapDistrictPins,map:ie.h.outputs.$mapboxInstance,isDistrictsTab:o.i.outputs.$isDistrictsTab,isMobile:se.l.$isMobile},filter:e=>{let{pins:t,map:i,isDistrictsTab:s}=e;return Boolean(t&&i)&&s},fn:e=>{let{pins:t,map:i,isMobile:s}=e;return t.filter((e=>!Pe(e,i,s))).filter(Te)},target:ne.W.internals.recalculateArrows}],or:{sid:"-bhtgv3"}}),(0,s.UP)({and:[{clock:ne.W.internals.recalculatePins,source:{map:ie.h.outputs.$mapboxInstance,isMobile:se.l.$isMobile},filter:e=>{let{map:t}=e;return Boolean(t)},fn:(e,t)=>{let{map:i,isMobile:s}=e;return(e=>{let{districtPins:t,map:i,isMobile:s}=e;const n=function(e,t,i){let s=!1;const n=()=>{s=!0};let o=(0,R.vK)(e,((e,i)=>ye(e,i,t)),n);if(!s)return function(e){return e.flat().map((e=>({...e,displayType:$.ZF.PIN,anchor:$.yJ.BOTTOM,controlledCoordinates:e.coordinates})))}(o);for(;s;)s=!1,o=xe(o,t,i,n);return o.flat()}(t,i,s);return n})({districtPins:t,map:i,isMobile:s??!1})},target:ne.W.outputs.$pins}],or:{sid:"-aj6fhc"}}),(0,s.UP)({and:[{clock:ne.W.internals.recalculateArrows,source:{map:ie.h.outputs.$mapboxInstance,isMobile:se.l.$isMobile},filter:e=>{let{map:t}=e;return Boolean(t)},fn:(e,t)=>{let{map:i,isMobile:s}=e;return(e=>{let{districtPins:t,map:i,isMobile:s}=e;const n={map:i,isMobile:s},{topArrows:o,bottomArrows:r,leftArrows:a,rightArrows:l,rightTopArrows:c,rightBottomArrows:d}=function(e,t,i){return{topArrows:e.filter(We(i,Ce)),bottomArrows:e.filter(We(i,Ne)),leftArrows:e.filter(We(i,$e)),rightArrows:t?e.filter(We(i,_e)):[],rightTopArrows:t?[]:e.filter(We(i,Ae)),rightBottomArrows:t?[]:e.filter(We(i,Le))}}(t,s,i);return[...He({...n,pins:o,padding:Ye(s,i).top}),...He({...n,pins:r,padding:Ye(s,i).bottom}),...Ue({...n,pins:a,padding:Ye(s,i).left}),...Ue({...n,pins:c,padding:Ye(s,i).rightTop}),...Ue({...n,pins:d,padding:Ye(s,i).rightBottom}),...Ue({...n,pins:l,padding:Ye(s,i).right})]})({districtPins:t,map:i,isMobile:s??!1})},target:ne.W.outputs.$arrows}],or:{sid:"-9nad2e"}})},73892:function(e,t,i){i.d(t,{W:function(){return u}});var s=i(34943);const n=(0,s.MT)(null,{sid:"n7j7gl"}),o=(0,s.MT)([],{sid:"ycgfom"}),r=(0,s.MT)([],{sid:"ppjyk7"}),a=(0,s.yM)({sid:"-dnlg0l"}),l=(0,s.yM)({sid:"xw2wsd"}),c=(0,s.yM)({sid:"fyvza"}),d=(0,s.yM)({sid:"-amrrv5"}),u={inputs:{setDistrictPinSize:l,setDistrictArrowSize:c,recalculatePinsPosition:(0,s.yM)({sid:"fit6vg"})},outputs:{$mapDistrictPins:n,$arrows:r,$pins:o},internals:{initDistrictPinSize:a,setDistrctClusterPinSize:d,recalculateArrows:(0,s.yM)({sid:"t287gj"}),recalculatePins:(0,s.yM)({sid:"3ov2sw"})}}},26870:function(e,t,i){i.d(t,{v:function(){return G}});var s=i(34943),n=i(76588),o=i(80472),r=i(46627),a=i(53088),l=i(34922),c=i(81926),d=i(35529),u=i(95984);const p=(0,d.Record)({type:(0,d.Literal)("book_hotel"),payload:(0,d.Record)({hotel_id:d.String})}),m=(0,d.Record)({type:(0,d.Literal)("discover"),payload:(0,d.Record)({title:d.String})}),h=(0,d.Union)(p,m),g=(0,d.Record)({url:d.String,description:(0,d.Record)({text:d.String,expanded:d.String.optional()}).optional()}),v=(0,d.Record)({type:(0,d.Literal)("image_gallery"),block:(0,d.Record)({images:(0,d.Array)(g)})}),y=(0,d.Record)({type:(0,d.Literal)("title"),block:(0,d.Record)({title:d.String})}),x=(0,d.Record)({type:(0,d.Literal)("description"),block:(0,d.Record)({description:d.String})}),b=(0,d.Record)({type:(0,d.Literal)("advice"),block:(0,d.Record)({title:d.String,text:d.String,provider:u.zq})}),f=(0,d.Record)({type:(0,d.Literal)("restrictions"),block:(0,d.Record)({restriction:u.xE})}),T=(0,d.Record)({type:(0,d.Literal)("tags"),block:(0,d.Record)({tags:(0,d.Array)(d.String)})}),P=(0,d.Union)((0,d.Record)({type:(0,d.Literal)("instagram"),title:d.String,url:d.String}),(0,d.Record)({type:(0,d.Literal)("facebook"),title:d.String,url:d.String}),(0,d.Record)({type:(0,d.Literal)("browser"),title:d.String,url:d.String}),(0,d.Record)({type:(0,d.Literal)("map"),title:d.String,coordinates:u.i2})),S=(0,d.Record)({type:(0,d.Literal)("buttons"),block:(0,d.Record)({buttons:(0,d.Array)(P)})}),j=(0,d.Record)({header:d.String,places:(0,d.Array)(u.Bv),group_id:d.Number}),k=(0,d.Record)({type:(0,d.Literal)("poi_carousel"),block:j}),M=(0,d.Record)({type:(0,d.Literal)("bullets"),block:u.DL}),I=(0,d.Record)({text:d.String,header:d.String,emoji:u.pC}),w=(0,d.Record)({type:(0,d.Literal)("bullet_with_header"),block:(0,d.Record)({bullet:I})}),C=(0,d.Record)({type:(0,d.Literal)("landmark"),block:(0,d.Record)({landmark:d.String})}),N=(0,d.Record)({id:d.String,title:d.String,subtitle:d.String,image_url:d.String}),$=(0,d.Record)({type:(0,d.Literal)("places_list"),block:(0,d.Record)({header:d.String,items:(0,d.Array)(N)})}),_=(0,d.Record)({link:d.String,type:d.String}),A=(0,d.Record)({id:d.String,icon:u.pC,title:d.String,map_place:(0,d.Record)({coordinates:u.i2,links:(0,d.Array)(_)})}),L=(0,d.Record)({type:(0,d.Literal)("points_list"),block:(0,d.Record)({header:d.String,items:(0,d.Array)(A)})}),B=(0,d.Record)({id:d.String,title:d.String,subtitle:d.String.optional(),price:u.ti.optional(),image_url:d.String,badge:u.dX}),D=B.extend({type:(0,d.Literal)("place")}),z=B.extend({type:(0,d.Literal)("external"),link:d.String,link_v2:d.String.optional()}),E=(0,d.Union)(D,z),O=(0,d.Record)({type:(0,d.Literal)("places_carousel"),block:(0,d.Record)({header:d.String,items:(0,d.Array)(E)})}),R=(0,d.Union)(v,y,x,b,f,T,S,k,M,w,C,$,L,O),H=(0,d.Record)({city_map_ark_id:d.String,iata:d.String.optional(),city_map_title:d.String,action_button:h.optional(),group_type:d.String,blocks:(0,d.Array)(R)}),{$apiPrefix:U,$defaultQuery:W,$defaultHeaders:Y}=r.D.outputs,F=(0,s.MR)({sid:"-6xohh1",fn:()=>(0,n.s5)({name:"guides_poi_blocks",enabled:(0,s.$e)({and:[{poi:l.IK.selected.outputs.$poi,currency:a.y.outputs.$currency},e=>{let{poi:t,currency:i}=e;return Boolean(t)&&Boolean(i)}],or:{sid:"-b6u38g"}}),request:{method:"GET",url:(0,s.$e)({and:[{apiPrefix:U,poi:l.IK.selected.outputs.$poi},e=>{let{apiPrefix:t,poi:i}=e;return`${t}/blocks/${i}`}],or:{sid:"-dgs303"}}),query:(0,s.$e)({and:[{defaultQuery:W,currency:a.y.outputs.$currency,group_id:l.IK.selected.outputs.$layer,searchHotelParams:c.$o.outputs.$searchHotelParams},e=>{let{defaultQuery:t,currency:i,group_id:s,searchHotelParams:n}=e;const o={...t,...n,currency:i};return s&&(o.group_id=s),o}],or:{sid:"-vcta9"}}),headers:Y},response:{contract:(0,o.v)(H)}})}),{$data:Z,$error:K,$pending:q,reset:V}=F,G={inputs:{fetch:F.start,reset:V},outputs:{$data:Z,$pending:q,$error:K},internals:{mapPoiQuery:F}}},49116:function(e,t,i){i.d(t,{h:function(){return o}});var s=i(34943);const n=(0,s.yM)({sid:"-h3m6c"}),o={inputs:{setMapboxInstance:n},outputs:{$mapboxInstance:(0,s.nu)(n,null,{sid:"-64qqkh"})}}},87083:function(e,t,i){i.d(t,{o:function(){return o}});var s=i(34840);const n=(0,i(34943).Fj)({sid:"-jdg4qw"}),o={inputs:{ModalGate:(0,s.Bq)({and:[{domain:n}],or:{sid:"-tzek75"}})}}},83904:function(e,t,i){i.d(t,{s:function(){return n}});var s=i(3202);const n={MIN_DISTANCE_TO_CLUSTERIZE:3,MAIN_PINS_RATIO:.25,DEFAULT_PIN_WIDTH_RADIUS_MULTIPLIER:.5,BIG_PIN_WIDTH_RADIUS_MULTIPLIER:.85,MAX_ZOOM_TO_STOP_REPEL_OFFSET:.3,COLLISION_DETECTION_PADDING:40,SIMULATION_ITERATIONS_COUNT:5,COLLISION_FORCE_ITERATIONS_COUNT:10,X_FORCE_STRENGTH:.3,Y_FORCE_STRENGTH:.3,SIZES:{[s.Bz.Large]:{mobile:112,desktop:128},[s.Bz.Insta]:{mobile:72,desktop:88},[s.Bz.Default]:{mobile:72,desktop:88},[s.Bz.Small]:{mobile:48,desktop:56}},ZOOM_INTERVALS:{[s.Bz.Large]:[15,100],[s.Bz.Default]:[14,15],[s.Bz.Small]:[0,14]},ZOOM_TO_HIDE_POIS_FROM_DISTRICT:10.9}},5157:function(e,t,i){i.d(t,{V:function(){return a}});var s=i(34943),n=i(75427);const o=(0,s.Fj)({sid:"-96hwc1"}).createEvent({sid:"tty5zw"}),r=(0,s.nu)(o,null,{sid:"-6ylotu"});(0,s.UP)({and:[{clock:n.Y.inputs.close,fn:()=>null,target:o}],or:{sid:"yg1n2q"}}),(0,s.UP)({and:[{clock:n.Y.inputs.open,fn:e=>{let{trapSource:t}=e;return t??null},target:o}],or:{sid:"yjcemw"}});const a={inputs:{setPoiOpenSource:o},outputs:{$poiOpenSource:r}}},82407:function(e,t,i){i.d(t,{i:function(){return $}});var s=i(34943),n=i(5923),o=i(34922),r=i(68131),a=i(31087),l=i(26074),c=i(73892);const d=(0,s.$e)({and:[o.IK.selected.outputs.$layer,r.vT.place.outputs.$data,(e,t)=>{if(null===t)return null;const i=t.groups.find((t=>{let{id:i}=t;return i===e}));return i?{...i,places:[...i.places].sort(l.Wq)}:null}],or:{sid:"-u6vcg8"}}),u=d.map((e=>(null==e?void 0:e.type)===r.OR?a.Jg.district:a.Jg.poi)),p=d.map(r.Fq),m=p.map((e=>e&&(0,r.Qu)(e))),h=p.map((e=>(null==e?void 0:e.map((e=>e.coordinates)))||[])),g=(0,n.g)(d),v=d.map((e=>(null==e?void 0:e.type)===r.NT)),y=d.map((e=>(null==e?void 0:e.type)===r.OR)),x=(0,s.$e)({and:[o.IK.selected.outputs.$poi,r.vT.place.outputs.$flatPinsWithImage,(e,t)=>null===e?null:t.find((t=>t.id===e))||null],or:{sid:"12ea0s"}}),b=(0,n.g)(x),f=(0,s.$e)({and:[x,r.vT.mapStyle.outputs.$data,u,(e,t,i)=>i!==a.Jg.district||null===e||null===t?null:(0,l.cu)(t.polygonsSource,e.id)],or:{sid:"q19fo"}}),T=(0,s.$e)({and:[r.vT.mapStyle.outputs.$data,r.vT.place.outputs.$data,o.IK.selected.outputs.$layerType,(e,t,i)=>e&&t&&i===r.OR?e.layers.filter((e=>e.source===t.polygons_source_id)).map((e=>e.id)):[]],or:{sid:"-dwwcfq"}}),P=(0,s.$e)({and:[o.IK.selected.outputs.$placeAlert,d,(e,t)=>null===t||null===e?null:t.places.find((t=>t.id===e))||null],or:{sid:"uj47f9"}}),S=(0,n.g)(P),j=(0,s.yM)({sid:"-mgei2i"});let k=(0,s.nu)(j,null,{sid:"xn4err"});const M=(0,s.yM)({sid:"-uv8nld"}),I=(0,s.nu)(M,null,{sid:"24xmaa"});k=(0,s.$e)({and:[{hoveredDistrictPinId:k,hoveredPolygonDistrictPinId:I},e=>{let{hoveredDistrictPinId:t,hoveredPolygonDistrictPinId:i}=e;return t??i}],or:{sid:"-xlmo59"}});const w=P.map((e=>(null==e?void 0:e.id)??null)),C=(0,s.MT)(null,{sid:"bywm7k"}),N=(0,s.$e)({and:[C,c.W.outputs.$pins,(e,t)=>t.find((t=>t.id===e))??null],or:{sid:"-p63m2d"}}),$={outputs:{$layerType:u,$tab:d,$prevTab:g,$pin:x,$layerPins:p,$pinsCoordinates:h,$prevPin:b,$polygon:f,$isHotelsTab:v,$isDistrictsTab:y,$interactiveLayerIds:T,$placeAlertPin:P,$prevAlertPin:S,$placesWithImage:m,$hoveredLayerId:(0,s.$e)({and:[k,u,T,(e,t,i)=>t===a.Jg.district&&e?i.find((t=>t.includes(e)))??null:null],or:{sid:"jdekgr"}}),$hoveredDistrictPinId:k,$selectedDistrictPinId:C,$selectedLayerId:(0,s.$e)({and:[C,u,T,(e,t,i)=>t===a.Jg.district&&e?i.find((t=>t.includes(e)))??null:null],or:{sid:"-y46cyd"}}),$selectedDistrictPin:N,$selectedAlertLayerId:(0,s.$e)({and:[w,u,T,(e,t,i)=>t===a.Jg.district&&e?i.find((t=>t.includes(e)))??null:null],or:{sid:"-l13yur"}}),$selectedAlertId:w,$poisFromDistrict:(0,s.MT)([],{sid:"-jrmm5u"})},inputs:{setHoveredPolygonDistrictPinId:M,setHoveredDistrictPinId:j}}},55246:function(e,t,i){i.d(t,{w:function(){return r}});var s=i(34943),n=i(3202);const o=(0,s.Fj)({sid:"-an9s0h"}),r={inputs:{toggle:o.createEvent({sid:"-sa1ske"})},outputs:{changed:o.createEvent({sid:"-5havls"}),$value:o.createStore(n.wO.MAP,{sid:"a59m8c"})}}},47285:function(e,t,i){i.d(t,{Z:function(){return r}});const s=(0,i(34943).Fj)({sid:"jwey5k"}),n=s.createEvent({sid:"-c4zf3s"}),o=s.createEvent({sid:"-xin778"}),r={outputs:{initialized:s.createEvent({sid:"i9bxnf"}),trapScreenClosed:o,trapScreenOpened:n}}},45810:function(e,t,i){i.d(t,{s:function(){return u}});var s=i(34943),n=i(5923),o=i(49116);const r=(0,s.yM)({sid:"-djv6cg"}),a=(0,s.MT)(null,{sid:"-xj2eak"}),l=(0,s.yM)({sid:"9jcf4f"}),c=(0,s.MT)(null,{sid:"nc38l7"}),d=(0,n.g)(c);a.on(r,((e,t)=>t)),c.on(l,((e,t)=>t)),(0,s.UP)({and:[{source:o.h.outputs.$mapboxInstance,filter:Boolean,fn:e=>e.getZoom(),target:[a,c]}],or:{sid:"-xj4e24"}});const u={outputs:{zoomChanged:r,zoomEnded:l,$zoom:a,$zoomEnd:c,$prevZoomEnd:d}}},27570:function(e,t,i){i.r(t),i.d(t,{TravelMapWidgetIsomorphicFlags:function(){return A}});var s,n,o,r,a,l,c,d,u,p,m,h,g,v,y,x,b,f,T,P,S,j,k,M,I=i(7934),w=i(14581);function C(e,t,i,s){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(s):void 0})}function N(e,t,i,s,n){var o={};return Object.keys(s).forEach((function(e){o[e]=s[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=i.slice().reverse().reduce((function(i,s){return s(e,t,i)||i}),o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let $=(s=(0,I.si)(),n=(0,I.Xp)(),o=(0,I.dF)({example:!0}),r=Reflect.metadata("design:type",Boolean),l=N((a=class{constructor(){C(this,"enabled",l,this)}}).prototype,"enabled",[s,n,o,r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a),_=(c=(0,I.si)(),d=(0,I.Xp)(),u=(0,I.dF)({example:!0}),p=Reflect.metadata("design:type",Boolean),h=N((m=class{constructor(){C(this,"trapCategory",h,this)}}).prototype,"trapCategory",[c,d,u,p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m),A=(g=(0,I.jx)(),v=(0,I.Xp)(),y=(0,w.Type)((()=>$)),x=(0,I.dF)({type:()=>$}),b=Reflect.metadata("design:type",void 0===$?Object:$),f=(0,I.jx)(),T=(0,w.Type)((()=>_)),P=(0,I.dF)({type:_}),S=Reflect.metadata("design:type",void 0===_?Object:_),k=N((j=class{constructor(){C(this,"guides-feat-travelMapWidget",k,this),C(this,"prem-feat-showPremium",M,this)}}).prototype,"guides-feat-travelMapWidget",[g,v,y,x,b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),M=N(j.prototype,"prem-feat-showPremium",[f,T,P,S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),j)},51155:function(e,t,i){i.r(t),i.d(t,{TravelMapWidget:function(){return Mi}});var s=i(67294),n=i(34840),o=i(65092),r=i.n(o),a=i(68131),l=i(34922),c=i(54423),d=i(94184),u=i.n(d),p=i(81468),m=i(20631),h=i(41671),g=i(61199),v=i(75427),y=i(36999),x=i(31087),b=i(6158),f=i.n(b),T=i(26074),P=i(12230);const S="guides-map",j=()=>{const e=(0,o.useMap)(),t=(0,n.eY)(P.travelMapPublicApi.mapboxInstance.inputs.setMapboxInstance),i=e[S];return(0,s.useEffect)((()=>(i&&t(i.getMap()),()=>{t(null)})),[i,t]),i};var k=i(11423),M=i(85893);const I=e=>{let{pin:t,isHovered:i,isSelected:n,children:r}=e;const{ref:a,height:l}=(0,m.useResizeObserver)(),c=t.controlledSize.height,d=l===c?-l/2:l/2-c;return(0,M.jsx)(o.Marker,{style:{zIndex:(0,k.Y5)({isSelected:n,isHovered:i,type:t.displayType})},latitude:t.controlledCoordinates.latitude,longitude:t.controlledCoordinates.longitude,offset:[0,d],children:s.cloneElement(r,{ref:a})})};var w=i(3202),C=i(866),N=i(99641),$=i(28311);var _={pinMarker:"BcFZh0DjPK0u4VATwb9Q",pinMarkerSizeXL:"W2mn7KEAeGHq6mjtRnUd",pinMarkerImageWrapper:"vwBD4SR7yjLzfLzbDrYK",overlayImage:"dzwEJmQhz0EkBzlcfWpx",imageWrapperArrow:"VXX2nlxoLNoVs6BjXcx2",text:"LPNmHNlOzhyfB0mUM1Pb",pinMarkerSizeM:"SOJC7g00Rx8NQavbMa3k",pinMarkerSizeS:"RvZk1kWAItdg_AtnH7xe",pinMarkerWithoutArrow:"jiJSkqd13Ez0iCImaQOL",selected:"qHhVmoZdAE9faYQzxPAg",hovered:"otIWxxNjo9AgBGwY7xYs",pinMarkerImage:"g7yqazMLU6OSrlhh9ol3",textHidden:"Neijp5ILUSCWWqHwiBKc"};const A=(e,t)=>{var i;let{pin:n,className:o,classNames:r,children:l,isHovered:c,isSelected:d,showName:m,onClick:g,onMouseEnter:v,onMouseLeave:y}=e;const{t:b}=(0,p.useTranslation)("widget_travel_map"),f=(0,a.pu)(n.image_url,224,216),{isImageLoaded:T,onImageLoad:P}=(0,h.h3)(f),S=(0,s.useMemo)((()=>!d&&(0,k.Hj)(n)),[n,d]),j=(0,s.useMemo)((()=>{var e;return(null===(e=n.premium)||void 0===e?void 0:e.availability)!==x.oY.PAYWALLED}),[n]),I=(0,k.Hj)(n)?$.j.XS:$.j.XXS,w=(0,k.Hj)(n)?void 0:C.TruncateTextMode.TwoLines;return(0,M.jsx)(h.fw,{name:"fade",in:!0,appear:!0,children:(0,M.jsxs)("div",{"data-test-id":d?"pin-marker-selected":"pin-marker",className:u()(_.pinMarker,(0,k.UW)(n)&&_.pinMarkerSizeS,(0,k.z_)(n)&&_.pinMarkerSizeM,(0,k.Hj)(n)&&_.pinMarkerSizeXL,!S&&_.pinMarkerWithoutArrow,d&&_.selected,c&&_.hovered,o),onClick:e=>{e.stopPropagation(),g&&g(n)},ref:t,children:[(0,M.jsxs)("div",{style:{width:n.controlledSize.width,height:n.controlledSize.height},className:u()(_.pinMarkerImageWrapper,S&&_.imageWrapperArrow,null==r?void 0:r.image),onMouseEnter:()=>{v&&v(n.id)},onMouseLeave:()=>{y&&y(n.id)},children:[(null===(i=n.premium)||void 0===i?void 0:i.overlay)&&(0,M.jsx)(N.QI,{size:I}),(0,M.jsx)(N.vZ,{className:_.overlayImage,overlayClassName:u()(_.overlay),children:(0,M.jsx)("img",{className:u()(_.pinMarkerImage,!T&&_.hidden),src:f,onLoad:P,"aria-hidden":!0,alt:b("pinImageAlt",{pinImageAlt:n.name})})}),l]}),n.name&&j&&(0,M.jsx)(C.Text,{className:u()(_.text,!m&&!c&&!d&&_.textHidden),type:C.TextType.Body3Semi,truncateMode:w,pretty:!1,children:n.name})]})})},L=(0,s.forwardRef)(A);var B=i(80625);const D=(e,t)=>{const i=(0,k.Hj)(e.pin)?B.BadgeSize.M:void 0;return(0,M.jsx)(L,{...e,ref:t,children:e.pin.price&&(0,M.jsx)(N.w9,{withPrefix:!1,className:u()("w4M6V5l4OewcOWI454LL",!e.shouldShowPrice&&!e.isSelected&&!e.isHovered&&"sPCsqcbrPlwN2AO_V8Cg"),price:e.pin.price.amount,size:i})})},z=(0,s.forwardRef)(D),E=(e,t,i)=>{const s=(0,T.tu)({map:i,size:e=>({width:e.controlledSize.width/2+40,height:e.controlledSize.height+20}),offsetX:()=>0,offsetY:e=>-e.controlledSize.height});for(const i of t){var n,o;if(i.id===e.id)continue;const t=s(e),r=s(i),a=(null===(n=e.price)||void 0===n?void 0:n.amount)||0,l=(null===(o=i.price)||void 0===o?void 0:o.amount)||0;if((0,T.hH)(t,r)&&a>l)return!1}return!0};var O,R=i(31175),H={root:"ktJmTbS61IndUiiryAhC",anchor:"SIbVFubSGiCj6ENdKGfu",bottom:"T7OkkWyRB1kxvkKG4EkQ",none:"oV0kTh1f7YhoPR7rdTys",cluster:"WbYCWRULGoqdqxviFwWb",cluster_moving:"oDFdW4L0bUIde8QNkGOR",pin:"epKkTCnFFXzPqn1KfRnw",arrow:"HttHgwYp9FOWB8LTqPuu"};function U(){return U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},U.apply(this,arguments)}var W=function(e){return s.createElement("svg",U({width:15,height:5,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),O||(O=s.createElement("path",{d:"M.5 0c1.488 0 2.915.758 3.968 2.106l1.71 2.192c.73.936 1.914.936 2.645 0l1.71-2.192C11.584.758 13.011 0 14.5 0H.5z"})))};const Y=e=>{let{pin:t,isHovered:i,isSelected:o}=e;const{isMobile:r=!1,isNight:a}=(0,n.eY)({isMobile:c.l.$isMobile,isNight:R.H.outputs.$isNight}),{displayType:l,anchor:d}=t,p=(0,k.v6)(t.pin_colors,i,o,a),m=r?2:3,{width:h,ref:g}=function(e){const{defaultWidth:t="auto",defaultHeight:i="auto",paddingHeight:n=0,paddingWidth:o=0}=e??{},[r,a]=(0,s.useState)(null);return{ref:a,width:(0,s.useMemo)((()=>{const e=null==r?void 0:r.getBoundingClientRect().width;return e?e+o:t}),[r,t,o]),height:(0,s.useMemo)((()=>{const e=null==r?void 0:r.getBoundingClientRect().height;return e?e+n:i}),[r,i,n])}}({paddingWidth:20+2*m});return(0,M.jsxs)("div",{className:u()(H.root,H[l]),style:{border:`1px solid ${p}`,boxShadow:`0px ${m}px 0px ${p}`,width:l===w.ZF.CLUSTER?"100%":h,opacity:"auto"===h?0:1},children:[(0,M.jsx)(C.Text,{ref:g,tag:"span",className:H.text,type:C.TextType.Body2Bold,mobileType:C.TextType.Body2Bold,children:t.name}),(0,M.jsx)(W,{className:u()(H.anchor,H[d]),style:{filter:`drop-shadow(0px ${r?3:4}px 0px ${p})`}})]})},F=(0,s.memo)(Y),Z=e=>{let{pin:t,isHovered:i,onPinClick:r,isSelected:a}=e;const{setSize:l,setHoveredDistrictPinId:d,isMobile:u}=(0,n.eY)({setSize:P.travelMapPublicApi.mapDistrictPins.inputs.setDistrictPinSize,setHoveredDistrictPinId:P.travelMapPublicApi.selectedPlace.inputs.setHoveredDistrictPinId,isMobile:c.l.$isMobile}),{ref:p,height:h,width:g,isAlreadyRendered:v}=(0,m.useResizeObserver)(),y=t.displayType===w.ZF.PIN?-h/2:0,x=u?2:3;return(0,s.useEffect)((()=>{v&&l({type:t.displayType,id:t.id,width:g+x,height:h+x})}),[g,h,v,t.id,t.displayType,l,x]),(0,M.jsx)(o.Marker,{style:{zIndex:(0,k.wY)(i,t.displayType),pointerEvents:"auto"},latitude:t.controlledCoordinates.latitude,longitude:t.controlledCoordinates.longitude,offset:[0,y],children:(0,M.jsx)("div",{ref:p,onClick:e=>{e.stopPropagation(),r(t)},onMouseEnter:()=>{d(t.id)},onMouseLeave:()=>{d(null)},children:(0,M.jsx)(F,{pin:t,isHovered:i,isSelected:a})})})},K=(0,s.memo)(Z);var q,V={root:"WEkqFaEdYe19DRSgQij8",arrow:"QvhE5chXOUXfUDO6yaP5",anchor:"Sapq6z0viZ83NGK06Rdw",bottom:"rrhYgK9VEuLmmGU1YTd8",left:"qHbvd3rJandJHVRlIpSa",right:"QSmClBZCcYJIRfy5yS6R",top:"pvCkRlYJ20fjzWx_6iKK",none:"lDFRUNvCeIXtHQczeo9f"};function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},G.apply(this,arguments)}var J,X=function(e){return s.createElement("svg",G({width:14,height:8,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),q||(q=s.createElement("path",{d:"M7 8l6.293-6.293c.63-.63.184-1.707-.707-1.707H1.414C.524 0 .077 1.077.707 1.707L7 8z",fill:"#fff"})))};function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Q.apply(this,arguments)}var ee=function(e){return s.createElement("svg",Q({width:10,height:6,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),J||(J=s.createElement("path",{d:"M5 6L.707 1.707C.077 1.077.523 0 1.414 0h7.172c.89 0 1.337 1.077.707 1.707L5 6z",fill:"#fff"})))};const te=e=>{let{pin:t,isHovered:i,isSelected:s}=e;const{isMobile:o=!1,isNight:r}=(0,n.eY)({isMobile:c.l.$isMobile,isNight:R.H.outputs.$isNight}),{anchor:a,pin_colors:l}=t,d=(0,k.v6)(l,i,s,r),p=o?ee:X;return(0,M.jsxs)("div",{className:u()(V.root,V.arrow),style:{border:`1px solid ${d}`},children:[(0,M.jsx)(p,{className:u()(V.anchor,V[a]),style:{fill:d}}),(0,M.jsx)(C.Text,{className:V.text,type:C.TextType.CaptionSemi,mobileType:C.TextType.CaptionSemi,truncateMode:C.TruncateTextMode.SingleLine,children:t.name})]})},ie=(0,s.memo)(te),se=e=>{let{pin:t,onPinClick:i,isHovered:r,isSelected:a}=e;const{setSize:l,setHoveredDistrictPinId:c}=(0,n.eY)({setSize:P.travelMapPublicApi.mapDistrictPins.inputs.setDistrictArrowSize,setHoveredDistrictPinId:P.travelMapPublicApi.selectedPlace.inputs.setHoveredDistrictPinId}),{ref:d,height:u,width:p,isAlreadyRendered:h}=(0,m.useResizeObserver)();return(0,s.useEffect)((()=>{h&&l({id:t.id,width:p+1,height:u+1})}),[p,u,h,t.id,t.type,l]),(0,M.jsx)(o.Marker,{style:{zIndex:(0,k.wY)(r),pointerEvents:"auto"},latitude:t.controlledCoordinates.latitude,longitude:t.controlledCoordinates.longitude,offset:[0,0],children:(0,M.jsx)("div",{ref:d,onClick:e=>{e.stopPropagation(),i(t)},onMouseEnter:()=>{c(t.id)},onMouseLeave:()=>{c(null)},children:(0,M.jsx)(ie,{pin:t,isHovered:r,isSelected:a})})})},ne=(0,s.memo)(se);const oe=e=>(0,M.jsx)(h.fw,{name:"fade",in:!0,appear:!0,children:(0,M.jsx)("div",{"data-test-id":e.dataTestId||"pin-marker",className:u()("o3uKdnt9gC6ybVpzCuyO",e.className),onMouseEnter:()=>{e.onMouseEnter&&e.onMouseEnter(e.pin.id)},onMouseLeave:()=>{e.onMouseLeave&&e.onMouseLeave(e.pin.id)},onClick:()=>{e.onClick&&e.onClick(e.pin)},style:e.style,children:e.children})});const re=e=>{const t=(0,n.eY)(c.l.$isMobile);return(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)(oe,{...e,className:u()("nYOgdrSkNL4zuP3CxKtg",!t&&e.selected&&"vsAx7HCq3_urp05E6rBM",e.className,e.borderColor&&"W61bZRBI4RC9SpAxfFIN"),children:[(0,M.jsx)("img",{className:"I89kAGfTEohTyVic37GV",src:e.pin.icon.svg,alt:e.pin.name}),e.borderColor&&(0,M.jsx)(W,{className:"DyJ3uDnC12fvspE2fLay",style:{filter:`drop-shadow(0px ${t?3:4}px 0px ${e.borderColor})`}})]})})},ae=s.memo(re);var le=i(46845);const ce=e=>{const{isMobile:t=!1,resetPlaceAlert:i}=(0,n.eY)({isMobile:c.l.$isMobile,resetPlaceAlert:l.IK.selected.inputs.resetPlaceAlert});return(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)(oe,{...e,className:u()("pGVG4hZUZyQV84eiXjcg",!e.selected&&"rNWB68gyJDUOl3tAbNDh",e.className),children:[(0,M.jsxs)("div",{className:"qbOFDxpXwie_Nr_vv9Q1",children:[(0,M.jsx)("img",{className:"U6drQEKGlmYVrVdNm8gj",src:e.pin.icon.svg,alt:e.pin.name}),(0,M.jsx)(le.CloseButton,{className:"IOzb8uacSFGqmoij5L4c",onClick:e=>{e.stopPropagation(),i()},size:"large"})]}),(0,M.jsxs)("article",{className:"PaRkb90qRRQMgBvf6d79",children:[(0,M.jsx)(C.Text,{type:C.TextType.Body1Semi,className:"pXqjR2vlIeT2FYGPFpQc",children:e.pin.name}),(0,M.jsx)(N.Jv,{type:C.TextType.Body3Paragraph,children:e.pin.description})]}),e.borderColor&&(0,M.jsx)(W,{className:"mcW8Wzccg1Tk_JEW_UQG",style:{filter:`drop-shadow(0px ${t?3:4}px 0px ${e.borderColor})`}})]})})},de=s.memo(ce);var ue=i(60238),pe=i(77875);const me=e=>{let{isVisible:t,pin:i}=e;const s=(0,n.eY)(l.IK.selected.inputs.resetPlaceAlert);return(0,M.jsxs)(ue.Popup,{visible:t,onClose:s,stickToBottomOnMobile:!0,children:[(0,M.jsxs)(ue.Popup.Navigation,{customHeight:56,children:[(0,M.jsx)(pe.Navbar.LeftAccessory,{children:(0,M.jsx)("img",{className:"IU0FTuDD0EGduhuG0Bhk",src:i.icon.svg,alt:i.name})}),(0,M.jsx)(pe.Navbar.RightAccessory,{children:(0,M.jsx)(le.CloseButton,{className:"ujNS8MQd55PWJmmyc6IQ",onClick:s})})]}),(0,M.jsxs)("article",{className:"pINhT9v1xQvtxWuTtQh0",children:[(0,M.jsx)(C.Text,{type:C.TextType.Title4Bold,className:"EdK7vYpt_TX4wRJiBt8J",children:i.name}),(0,M.jsx)(N.Jv,{type:C.TextType.Body1Paragraph,children:i.description})]})]})},he=e=>{let{pin:t,isHovered:i,isSelected:s,onPinClick:r}=e;const{ref:a,height:l}=(0,m.useResizeObserver)(),{ref:d,height:u}=(0,m.useResizeObserver)(),p=-l/2,h=-u/2,{isMobile:g=!1,isNight:v}=(0,n.eY)({isMobile:c.l.$isMobile,isNight:R.H.outputs.$isNight}),y=(0,k.v6)(t.pin_colors,i,s,v),x={border:`1px solid ${y}`,boxShadow:`0px ${g?2:3}px 0px ${y}`};return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(o.Marker,{style:{zIndex:(0,k.Y5)({isSelected:s,isHovered:i}),pointerEvents:!g&&s?"none":"auto"},latitude:t.coordinates.latitude,longitude:t.coordinates.longitude,offset:[0,p],children:(0,M.jsx)("div",{ref:a,children:(0,M.jsx)(ae,{pin:t,selected:s,onClick:r,borderColor:y,style:x})})}),g&&(0,M.jsx)(me,{isVisible:s,pin:t}),!g&&(0,M.jsx)(o.Marker,{style:{zIndex:(0,k.Y5)({isSelected:s,isHovered:i}),pointerEvents:s?"auto":"none"},latitude:t.coordinates.latitude,longitude:t.coordinates.longitude,offset:[0,h],children:(0,M.jsx)("div",{ref:d,children:(0,M.jsx)(de,{pin:t,selected:s,onClick:r,borderColor:y,style:x})})})]})},ge=()=>{const[e,t]=(0,s.useState)(null),{direction:i,externalPins:o,isDistrictLayer:r,map:c,openSource:d,selectedLayer:u,selectedLayerType:p,selectedPin:m,pins:h,districtArrows:g,mapDistrictPins:b,hoveredDistrictPinId:f,selectedDistrictPinId:S,selectedAlertId:j,openPlaceAlert:C,openPoi:N}=(0,n.eY)({map:P.travelMapPublicApi.mapboxInstance.outputs.$mapboxInstance,isDistrictLayer:P.travelMapPublicApi.selectedPlace.outputs.$isDistrictsTab,openSource:l.IK.sources.outputs.$trapSource,externalPins:l.IK.pins.outputs.$externalPins,selectedPin:P.travelMapPublicApi.selectedPlace.outputs.$pin,selectedLayer:l.IK.selected.outputs.$layer,direction:y.Rn.outputs.$direction,selectedLayerType:l.IK.selected.outputs.$layerType,openPlaceAlert:l.IK.selected.inputs.setPlaceAlert,openPoi:v.Y.inputs.open,pins:P.travelMapPublicApi.pinsPositioning.outputs.$layerMapPins,mapDistrictPins:P.travelMapPublicApi.mapDistrictPins.outputs.$pins,districtArrows:P.travelMapPublicApi.mapDistrictPins.outputs.$arrows,districtPins:a.vT.place.outputs.$districtPins,hoveredDistrictPinId:P.travelMapPublicApi.selectedPlace.outputs.$hoveredDistrictPinId,selectedDistrictPinId:P.travelMapPublicApi.selectedPlace.outputs.$selectedDistrictPinId,selectedAlertId:P.travelMapPublicApi.selectedPlace.outputs.$selectedAlertId}),$=Boolean(r)&&b.length>0,_=Boolean(r)&&g.length>0,A=s.useCallback((e=>{t(e)}),[t]),B=s.useCallback((()=>{t(null)}),[t]),D=s.useCallback((e=>{(0,a.VO)(e)?C(e.id):N({poi:e.id,layer:u,direction:i,openSource:d,trapSource:x.lX.TAB})}),[N,u,i,d,C]);return p&&c?(0,M.jsxs)(M.Fragment,{children:[o,$&&(null==b?void 0:b.map((e=>{const t=f===e.id,i=S===e.id;return(0,a.VO)(e)?(0,M.jsx)(he,{pin:e,onPinClick:D,isHovered:t,isSelected:j===e.id},e.id):(0,M.jsx)(K,{pin:e,onPinClick:D,isHovered:t,isSelected:i},e.id)}))),_&&(null==g?void 0:g.map((e=>{const t=f===e.id,i=S===e.id;return(0,M.jsx)(ne,{pin:e,onPinClick:D,isHovered:t,isSelected:i},e.id)}))),null==h?void 0:h.map((t=>{const i=(0,k.hb)(t,p)===w.pe.Default,s=t.id===(null==m?void 0:m.id)&&t.name===(null==m?void 0:m.name),n=e===t.id;return t.pin_type!==x.Er.DISTRICTS?(0,M.jsx)(I,{isHovered:n,isSelected:s,pin:t,children:i?(0,M.jsx)(L,{isHovered:n,isSelected:s,pin:t,showName:(0,T.FN)({pin:t,pins:h,map:c}),onMouseEnter:A,onMouseLeave:B,onClick:D}):(0,M.jsx)(z,{isHovered:n,isSelected:s,pin:t,showName:(0,T.FN)({pin:t,pins:h,map:c}),onMouseEnter:A,onMouseLeave:B,onClick:D,shouldShowPrice:E(t,h,c)})},t.id):null}))]}):null},ve=(0,s.memo)(ge),ye=()=>(0,M.jsx)(o.NavigationControl,{showCompass:!1}),xe=()=>{var e;const{styles:t,polygonsSourceId:i,isDistrictLayer:s,hoveredLayerId:r,selectedLayerId:l,selectedAlertLayerId:c}=(0,n.eY)({styles:a.vT.mapStyle.outputs.$data,polygonsSourceId:a.vT.place.outputs.$data.map((e=>(null==e?void 0:e.polygons_source_id)||null)),isDistrictLayer:P.travelMapPublicApi.selectedPlace.outputs.$isDistrictsTab,hoveredLayerId:P.travelMapPublicApi.selectedPlace.outputs.$hoveredLayerId,selectedLayerId:P.travelMapPublicApi.selectedPlace.outputs.$selectedLayerId,selectedAlertLayerId:P.travelMapPublicApi.selectedPlace.outputs.$selectedAlertLayerId});return(0,M.jsx)(M.Fragment,{children:null==t||null===(e=t.layers)||void 0===e?void 0:e.map((e=>{const t=i===e.source,n=r===e.id,d=l===e.id||c===e.id,u=((e,t,i)=>e?t||i?1:a.wd:.2)(s,n,d),p=t?{...e.paint,"fill-opacity":u}:e.paint;return(0,M.jsx)(o.Layer,{...e,source:e.source?e.source.toString():"",paint:p||{},ref:void 0},e.id)}))})},be=e=>{let{className:t}=e;const[i,o]=(0,s.useState)("grab"),[d,p]=s.useState(!1),b=j(),k=(0,s.useRef)(null),{styleData:I,selectedLayerType:w,isMobile:C=!1,pinsCoordinates:N,isDistrictsTab:$,direction:_,initialBounds:A,openSource:L,interactiveLayerIds:B,mapSettings:D,poi:z,zoom:E,setMapParams:O,openPoi:R,recalculateDistrictPinsPosition:H,setHoveredPolygonDistrictPinId:U,setPlaceAlert:W,zoomChanged:Y,zoomEnded:F}=(0,n.eY)({styleData:a.vT.mapStyle.outputs.$data,selectedLayerType:l.IK.selected.outputs.$layer,isMobile:c.l.$isMobile,pinsCoordinates:P.travelMapPublicApi.selectedPlace.outputs.$pinsCoordinates,isDistrictsTab:P.travelMapPublicApi.selectedPlace.outputs.$isDistrictsTab,direction:y.Rn.outputs.$direction,openPoi:v.Y.inputs.open,initialBounds:l.IK.bounds.outputs.$initialBounds,openSource:l.IK.sources.outputs.$trapSource,setMapParams:g.aj.FU.setMapParams,interactiveLayerIds:P.travelMapPublicApi.selectedPlace.outputs.$interactiveLayerIds,mapSettings:a.vT.place.outputs.$mapSettings,recalculateDistrictPinsPosition:P.travelMapPublicApi.mapDistrictPins.inputs.recalculatePinsPosition,recalculatePinsPosition:P.travelMapPublicApi.pinsPositioning.inputs.recalculatePinsPosition,setHoveredPolygonDistrictPinId:P.travelMapPublicApi.selectedPlace.inputs.setHoveredPolygonDistrictPinId,poi:l.IK.selected.outputs.$poi,setPlaceAlert:l.IK.selected.inputs.setPlaceAlert,zoomChanged:P.travelMapPublicApi.zoom.outputs.zoomChanged,zoomEnded:P.travelMapPublicApi.zoom.outputs.zoomEnded,zoom:P.travelMapPublicApi.zoom.outputs.$zoomEnd}),Z=s.useCallback((()=>{p(!0)}),[p]),[K,q]=(0,s.useState)({latitude:D.initialViewState.latitude,longitude:D.initialViewState.longitude}),{debouncedCallback:V}=(0,h.y1)((()=>{if(!b)return;const{lat:e,lng:t}=b.getCenter();O({lat:e,lon:t,zoom:b.getZoom()})}),200);!function(e){let{bounds:t}=e;const i=j();(0,s.useEffect)((()=>{i&&t&&i.fitBounds(t,{padding:100})}),[i,t])}({bounds:A}),function(e){let{pinsCoordinates:t}=e;const i=(0,n.eY)(l.IK.selected.outputs.$layer),o=j();(0,s.useEffect)((()=>{if(0===t.length||!o||(0,T.j$)(o.getBounds(),t))return;const e=l.IK.utils.getPinsBounds(t),i=new(f().LngLatBounds)(e);o.fitBounds(i,{padding:100,duration:1800,easing:T.Vv})}),[i,t,o])}({pinsCoordinates:N}),function(e){let{mapContainer:t}=e;const{polygon:i}=(0,n.eY)({polygon:P.travelMapPublicApi.selectedPlace.outputs.$polygon}),o=j();(0,s.useEffect)((()=>{if(!t||!i||!o)return;const e=new(f().LngLatBounds)((0,T.A5)(i));o.fitBounds(e,{padding:100,duration:1200,easing:T.Vv})}),[t,i])}({mapContainer:k.current}),function(e){let{mapContainer:t}=e;const i=j(),{isMobile:o,pinSize:r,pin:a,layerType:l}=(0,n.eY)({isMobile:c.l.$isMobile,pinSize:P.travelMapPublicApi.pinSize.outputs.$size,pin:P.travelMapPublicApi.selectedPlace.outputs.$pin,layerType:P.travelMapPublicApi.selectedPlace.outputs.$layerType});(0,s.useEffect)((()=>{if(null==a||!a.coordinates||l!==x.Jg.poi||o||!t||!i)return;const e=t.clientWidth,s=t.clientHeight,n={lng:a.coordinates.longitude,lat:a.coordinates.latitude},c=i.project(n);!(0,T.A4)({pinSize:r,pinPosition:c,viewportSize:{width:e,height:s}})&&(i.resize(),i.easeTo({center:n,duration:400,easing:T.Vv}))}),[o,t,l,a,r,i])}({mapContainer:k.current});const G=s.useCallback((e=>{var t,i;if(!$)return;const{features:s}=e;if(!s)return;const n=null===(t=s[0])||void 0===t||null===(i=t.properties)||void 0===i?void 0:i.district_id;n&&(o("pointer"),U(n))}),[$,U]),J=s.useCallback((()=>{o("grabbing")}),[]),X=s.useCallback((()=>{o("grab")}),[]),Q=s.useCallback((()=>{U(null),o("grab")}),[U]);(0,s.useEffect)((()=>{null!=b&&b.isStyleLoaded()&&b.resize()}),[z,b]);const ee=s.useCallback((e=>{var t,i,s,n;const{features:o}=e;if(!o)return;const r=null===(t=o[0])||void 0===t||null===(i=t.properties)||void 0===i?void 0:i.district_id,a=null===(s=o[0])||void 0===s||null===(n=s.properties)||void 0===n?void 0:n.type;r&&a===x.AS.PLACE&&w&&R({poi:String(r),layer:w,direction:_,openSource:L}),r&&a===x.AS.ALERT&&w&&W(String(r))}),[R,L,_,w,W]),te=Boolean(d&&I);return(0,M.jsxs)("div",{"data-lat":K.latitude,"data-lon":K.longitude,"data-zoom":E,"data-test-id":"travel-map-map",className:u()("UB6HM0NpI0XmR52dZ4y5","OyBlqAkcE7obbD9lg7N2",t),ref:k,children:[!te&&(0,M.jsx)("div",{className:u()("piQkMOOEYodersD1bQBS",t),children:(0,M.jsx)(m.Spinner,{size:m.SpinnerSize.L})}),(0,M.jsxs)(r(),{...D,id:S,style:{opacity:te?1:0},mapStyle:null==I?void 0:I.style,attributionControl:!1,logoPosition:"bottom-right",onLoad:Z,cursor:i,interactiveLayerIds:B,onMoveEnd:V,onZoomEnd:e=>{V(),F(e.viewState.zoom)},onPitchEnd:V,onMouseMove:G,onMouseLeave:Q,onMouseDown:J,onMouseUp:X,onClick:ee,onDragEnd:e=>q({latitude:e.viewState.latitude,longitude:e.viewState.longitude}),onZoom:e=>{Y(e.viewState.zoom)},onMove:H,children:[te&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(ve,{}),!C&&(0,M.jsx)(ye,{})]}),(0,M.jsx)(xe,{})]})]})};var fe=i(4762),Te=i(88946);const Pe=e=>{let{id:t,title:i,image_url:n,subtitle:o,className:r,onClick:l,withArrow:c}=e;const d=(0,a.pu)(n,160,160),p=(0,s.useCallback)((()=>{l(t)}),[t,l]);return(0,M.jsxs)("button",{className:u()(r,"snvCDtbzhZKI6SlrH9xq"),onClick:p,children:[(0,M.jsxs)("div",{className:"BGe9Z31iEiF_wcOqqiAv",children:[(0,M.jsx)(Te.E,{className:"WjYzDiEZ6OOKO_tx_AlZ",caption:i,source:d,size:80,transition:!1}),(0,M.jsx)("div",{className:"Msp6e23FhZalC7IL2Vkg"})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)(C.Text,{className:"USKnhn1OznLhbdp4bTea",tag:"span",type:C.TextType.Body1Semi,truncateMode:C.TruncateTextMode.TwoLines,children:i}),o&&(0,M.jsx)(C.Text,{className:"yFihqtEPp1a6mvqfSLKJ",type:C.TextType.Body2Regular,tag:"span",truncateMode:C.TruncateTextMode.TwoLines,children:o})]}),c&&(0,M.jsx)(fe.Icon16ControlsChevron,{className:"KMLVzlYm74SjfUNGckdz"})]})};var Se="Obh76oNu67h9cnbH34eg";const je=e=>{var t,i;let{pin:n,onClick:o}=e;const{t:r}=(0,p.useTranslation)("widget_travel_map"),l=(0,a.pu)(n.image_url,670,380),c=(0,a.pu)(n.image_url,670,380),{isImageLoaded:d,onImageLoad:m}=(0,h.h3)(),g=(0,s.useCallback)((()=>{o(n.id)}),[n.id,o]);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("button",{onClick:g,className:"gTnOyE1vdUEHHOumYAMp",children:(0,M.jsx)(N.vZ,{radius:14,className:"FLW1s7HtDR87GHKZFq5R",children:(0,M.jsx)("img",{className:u()("PYEy2em9wxqmXHOzgNMs","gQVZZ4mfVSRL9gsvsPGc",d&&"lAyFJioWXHvGm9MTZkQo"),alt:"",onLoad:m,src:l,srcSet:`${l} 1x, ${c} 2x`})})}),(0,M.jsxs)("div",{className:"wG7Z9O_XqNg_y42dBfDu",children:[(0,M.jsx)(C.Text,{className:Se,type:C.TextType.Body1Semi,onClick:g,children:n.name}),(0,M.jsx)(N.AT,{type:C.TextType.Body3Regular,children:n.description}),(null===(t=n.price)||void 0===t?void 0:t.amount)&&(0,M.jsxs)("div",{className:"w80KUwoR2zExyK8akGQo",children:[(0,M.jsxs)(C.Text,{className:Se,type:C.TextType.Title4Semi,onClick:g,children:[`${r("hotels.priceFrom")} `,(0,M.jsx)(N.fE,{price:null===(i=n.price)||void 0===i?void 0:i.amount})]}),(0,M.jsx)(N.AT,{type:C.TextType.CaptionRegular,children:r("hotels.priceForPeriod")})]})]})]})};const ke=e=>{let{pin:t,onClick:i}=e;const o=(0,n.eY)(c.l.$isMobile)?350:160,r=(0,a.pu)(t.image_url,2*o,2*o),l=(0,s.useCallback)((()=>{i(t.id)}),[t,i]);return(0,M.jsx)(N.ek,{className:"tVHyRsZERqcZQ6zDzEcF",onClick:l,image:e=>{var i,s;let{className:n}=e;return(0,M.jsxs)(N.vZ,{radius:14,className:u()(n),children:[(null===(i=t.premium)||void 0===i?void 0:i.badge)&&(0,M.jsx)(N.lB,{type:t.premium.badge,className:"RfxSVgWIkrjOUy74_1mW"}),(null===(s=t.premium)||void 0===s?void 0:s.overlay)&&(0,M.jsx)(N.QI,{className:"J8LHxC2MXu1WJx3p_6hk"}),(0,M.jsx)(Te.E,{source:r,size:o,caption:"",className:"B3gWbSh_tU2rY_XuN_s6",transition:!1})]})},content:()=>(0,M.jsxs)("div",{className:"Fdw7_cp6Hp6m6i6DYDnp",children:[(0,M.jsx)(C.Text,{className:"vxG9jF24OJg3htCUSm7E",type:C.TextType.Body2Semi,truncateMode:t.description?C.TruncateTextMode.SingleLine:C.TruncateTextMode.TwoLines,children:t.name}),t.description&&(0,M.jsx)(N.AT,{className:"WdFTTlIqAZcpTBMQkEL4",type:C.TextType.Body3Regular,truncateMode:C.TruncateTextMode.TwoLines,children:t.description})]})})};var Me=i(3400);const Ie=e=>{let{className:t,children:i,onClick:s}=e;return(0,M.jsxs)("button",{className:u()("B372nqElmWKXNSkZZ_we",t),onClick:s,children:[(0,M.jsx)(Me.Icon24ControlsChevron,{className:"ygfGh3uSAKtPcCwcKslA"}),(0,M.jsx)(C.Text,{tag:"span",type:C.TextType.Body2Semi,children:i})]})};var we=i(61863),Ce=i(9212);const Ne=e=>{let{info:t}=e;const i=t.text||"",o=(0,n.eY)(Ce.X.inputs.entryPointInteracted),r=(0,s.useCallback)((()=>{t.type===x.Eg.PAYWALL&&o(we.N9.TrapTabPromo)}),[t.type,o]);return(0,M.jsxs)("div",{className:u()("MHqkK62BUhWIH7YmDGo1",t.type===x.Eg.PAYWALL&&"y_zCTHDNc1mldYxExVJU"),onClick:r,children:[(0,M.jsx)("img",{className:"GaFLpPYnJJMJ11KeZjoA",src:t.emoji_image.svg,alt:""}),(0,M.jsxs)("div",{className:"BhQR5oVFget_sRjnA5vy",children:[(0,M.jsx)(N.Jv,{type:C.TextType.Body3Paragraph,children:i}),t.caption&&(0,M.jsx)(C.Text,{type:C.TextType.Body3Semi,className:"ZT9KLYjk_kRFvzlllpEm",children:t.caption})]})]})};const $e=e=>{let{isMobile:t,className:i,onClose:o}=e;const{t:r}=(0,p.useTranslation)("widget_travel_map"),{selectedLayerType:c,openPoi:d,direction:m,openSource:h,currentTab:g,isDistrictsTab:b,isHotelsTab:f}=(0,n.eY)({selectedLayerType:l.IK.selected.outputs.$layer,openPoi:v.Y.inputs.open,direction:y.Rn.outputs.$direction,openSource:l.IK.sources.outputs.$trapSource,currentTab:P.travelMapPublicApi.selectedPlace.outputs.$tab,isDistrictsTab:P.travelMapPublicApi.selectedPlace.outputs.$isDistrictsTab,isHotelsTab:P.travelMapPublicApi.selectedPlace.outputs.$isHotelsTab}),T=(0,s.useCallback)((()=>{o&&o()}),[o]),S=(0,s.useCallback)((e=>{d({poi:e,layer:c,direction:m,openSource:h,trapSource:x.lX.TAB})}),[d,c,m,h]),j=!b&&!f;return(0,M.jsxs)("div",{className:i,children:[!t&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Ie,{className:"SOuMVSCUvwU2pmsQARDw",onClick:T,children:r("modal.layersTitle")}),(0,M.jsx)(C.Text,{className:"JR9076bdv6a5cEAQDmnA",type:C.TextType.Title4Semi,children:g?g.title:r("modal.allLayersFilterTitle")})]}),(null==g?void 0:g.info)&&t&&!(null!=g&&g.is_hidden)&&(0,M.jsx)(Ne,{info:g.info}),(0,M.jsx)("ul",{className:u()(j?"a6y7PP9hKVup7flamdJ4":"h3v7HTACn3zRv6felyUY"),children:g&&(0,a.Qu)(g.places).map((e=>g.type===a.NT?(0,M.jsx)("li",{className:"FGOxyZ5BZJ1BQiS2llsY",children:(0,M.jsx)(je,{pin:e,onClick:S})},e.id):b?(0,M.jsx)("li",{className:"HEG7HHKhXNAc3_YNw1gE",children:(0,M.jsx)(Pe,{id:e.id,title:e.name,subtitle:e.description,image_url:e.image_url,onClick:S})},e.id):(0,M.jsx)("li",{children:(0,M.jsx)(ke,{pin:e,onClick:S})},e.id)))})]})};var _e=i(4028),Ae=i(85430);const Le=e=>{const{longitude:t,latitude:i}=e;return`https://www.google.com/maps/search/?api=1&query=${i}%2C${t}`};var Be={item:"lLPqGPcOl7n0IE9WmDwL",itemText:"DOLG9w4a4CW_9F3DZMCA",icon:"fZ01W6aIEfJnu_VNCZJi",primaryColoredIcon:"QEA8gSAey9pPiaYHTtiD",disclosureIcon:"GnTpZOV9qkAyYRN0MCAB"};const De=e=>{let{button:t}=e;const i=(e=>"url"in e&&Boolean(e.url)?e.url:"coordinates"in e?Le(e.coordinates):null)(t),o=(0,n.eY)(P.travelMapPublicApi.content.inputs.screenLinkClicked),r=(0,s.useCallback)((()=>{i&&o(i)}),[i,o]);return(0,M.jsxs)("div",{className:Be.container,children:["instagram"===t.type&&i&&(0,M.jsxs)("a",{className:Be.item,href:i,target:"_blank",rel:"noreferrer",onClick:r,children:[(0,M.jsx)(Ae.Icon24ColorInstagram,{className:Be.icon}),(0,M.jsx)(C.Text,{tag:"span",type:C.TextType.Body1Regular,className:Be.itemText,truncateMode:C.TruncateTextMode.SingleLine,children:t.title}),(0,M.jsx)(Ae.Icon16ControlsDisclosure,{className:Be.disclosureIcon})]}),"browser"===t.type&&i&&(0,M.jsxs)("a",{className:Be.item,href:i,target:"_blank",rel:"noreferrer",onClick:r,children:[(0,M.jsx)(Ae.Icon24CommonGlobe,{className:u()(Be.icon,Be.primaryColoredIcon)}),(0,M.jsx)(C.Text,{tag:"span",type:C.TextType.Body1Regular,className:Be.itemText,truncateMode:C.TruncateTextMode.SingleLine,children:t.title}),(0,M.jsx)(Ae.Icon16ControlsDisclosure,{className:Be.disclosureIcon})]}),"map"===t.type&&i&&(0,M.jsxs)("a",{className:Be.item,href:i,target:"_blank",rel:"noreferrer",onClick:r,children:[(0,M.jsx)(Ae.Icon24CommonMarker,{className:u()(Be.icon,Be.primaryColoredIcon)}),(0,M.jsx)(C.Text,{tag:"span",type:C.TextType.Body1Regular,className:Be.itemText,truncateMode:C.TruncateTextMode.SingleLine,children:t.title}),(0,M.jsx)(Ae.Icon16ControlsDisclosure,{className:Be.disclosureIcon})]})]})};const ze=e=>{let{block:t}=e;const{buttons:i}=t.block;return(0,M.jsx)("div",{className:"VS0ca0Ie0mGoAM_3k4tw",children:i.map((e=>(0,M.jsx)(De,{button:e},e.type)))})};var Ee=i(39194);const Oe=e=>{let{block:t}=e;const{t:i}=(0,p.useTranslation)("widget_travel_map"),o=(0,n.eY)(P.travelMapPublicApi.content.inputs.peopleClicked),{title:r,text:a,provider:l}=t,c=l.contacts[0],d=(0,s.useCallback)((()=>o(l)),[o,l]);return(0,M.jsxs)("div",{className:"f_YeCVKe3ooUMGRsdgpo",children:[(0,M.jsx)(C.Text,{type:C.TextType.Body1Bold,className:"CejmdyuwppqqUVaHXfqH",children:r}),(0,M.jsxs)("div",{className:"Nq1i4ykhjGJzWuEH8zS7",children:[(0,M.jsx)(Te.E,{source:l.avatar_url,size:40,caption:i("pinImageAlt",{place:l.first_name}),className:"p6OqlijR0muK0kq4LGaa"}),(0,M.jsxs)("div",{className:"jFxmZY9x_NmY8x8dGHD8",children:[(0,M.jsx)(C.Text,{tag:"p",className:"g59d25FUFmQq4J_LkWW9",type:C.TextType.Body1Regular,truncateMode:C.TruncateTextMode.SingleLine,children:l.first_name}),l.role&&(0,M.jsx)(C.Text,{tag:"p",className:"dsVRfXBe3Y5cJYTYGcb9",type:C.TextType.Body3Regular,truncateMode:C.TruncateTextMode.TwoLines,children:l.role})]})]}),(0,M.jsxs)("div",{className:"EvMEGWOeL788NBXIZctS",children:[(0,M.jsx)(N.Jv,{tag:"p",type:C.TextType.Body2Paragraph,className:"HFmNGSaqxgiyWK9NLo8Z",children:a}),c&&(0,M.jsxs)(Ee.Link,{className:"opIVJY3upY46PFgLJxjX",href:c.url,target:"_blank",rel:"noreferrer",changeColorOnHover:!0,onClick:d,children:[(0,M.jsx)(N.rz,{type:c.type,className:"Xsx5FbOagbzFw3XjLJUS"}),(0,M.jsx)(C.Text,{type:C.TextType.Body2Semi,tag:"span",children:c.contact_title})]})]})]})};const Re=e=>{let{text:t,className:i}=e;return(0,M.jsx)(N.Jv,{className:u()("lAj3ZlQ4sri_bEG0tTJX",i),type:C.TextType.Body1Paragraph,children:t})};const He=e=>{let{restriction:t}=e;return(0,M.jsx)("div",{className:"SClgGTroEXk7WqUbdUcf",children:(0,M.jsxs)(N.Qu,{children:[(0,M.jsx)(N.Qu.Icon,{className:"zIlNl4KrPsHXOE2FE9n2",src:t.emoji.svg}),(0,M.jsx)(N.Qu.Text,{text:t.text})]},t.text)})};const Ue=e=>{let{tags:t}=e;return(0,M.jsx)("div",{className:"cC8NCq4b06mdwl6QuD0d",children:t.map((e=>(0,M.jsx)("div",{className:"gPU90HZSLUSHindbOmU_",children:(0,M.jsx)(C.Text,{tag:"span",className:"t3QGoVzFl5DSha4pJUYQ",type:C.TextType.Body3Semi,children:e})},e)))})};const We=e=>{let{title:t,isHotel:i=!1}=e;return(0,M.jsx)(C.Text,{className:u()("a0LBlr9Pt6AnN90hnjTu",i&&"gQj28WqyK18N9r0nxeYm"),type:C.TextType.Title3Bold,children:t})};var Ye=i(10178),Fe={container:"lOXWecJ6HgaNNrzBCfhp",errorContainer:"kernZ5aeb21dNkBPILl_",backButton:"uM8kAv8f7JeVSxtxVs6i",closeButton:"Ml1OeafUbYZPYq8prAhb",contentWrapper:"TSu5ysHFS1J2L1t2HHb6",bottomMargin:"qYzwy1U4c2FEXNiHuoSQ",errorWrapper:"uEhxekm3V3_yh8mos1IX",skeletonTextContainer:"V06f2eL9dRDtP4Ck8Vlw",imageSkeleton:"PGIZbc7NYmuaQCFmomgq",titleSkeleton:"MOHKFruaaZUsQG5WwKlL",text1Skeleton:"tP0XIfU1bRcEzTL4tLOs",text2Skeleton:"EAf4AmcYDjvSoeBepGpN",bullets:"SbONc7DHoq6O84y_YIl3",blockWrap:"THhxcASbWuxRKA7j8zxg"};const Ze=()=>(0,M.jsxs)("div",{className:Fe.container,children:[(0,M.jsx)("div",{className:Fe.imageSkeleton}),(0,M.jsxs)("div",{className:Fe.skeletonTextContainer,children:[(0,M.jsx)("div",{className:Fe.titleSkeleton}),(0,M.jsx)("div",{className:Fe.text1Skeleton}),(0,M.jsx)("div",{className:Fe.text2Skeleton})]})]}),Ke=e=>{let{closeText:t,className:i,children:s,showDetailsInfo:o,isLoading:r,isError:a,handleRefetchClick:l}=e;const{t:d}=(0,p.useTranslation)("widget_travel_map"),{handleClose:m,isMobile:h}=(0,n.eY)({handleClose:v.Y.inputs.close,isMobile:c.l.$isMobile});return(0,M.jsxs)("div",{className:u()(i,Fe.container,a&&Fe.errorContainer),children:[h&&(0,M.jsx)(le.CloseButton,{className:Fe.closeButton,onClick:m}),!h&&t&&(0,M.jsx)(Ie,{className:Fe.backButton,onClick:m,children:t}),a&&(0,M.jsx)("div",{className:Fe.errorWrapper,children:(0,M.jsxs)(Ye.StatusMessage,{size:h?Ye.StatusMessageSize.Mobile:Ye.StatusMessageSize.Desktop,className:Fe.errorBlock,children:[(0,M.jsx)(Ye.StatusMessage.Icon,{mod:Ye.StatusMessageIconMods.Warning}),(0,M.jsx)(Ye.StatusMessage.Title,{children:d("errorState.title")}),(0,M.jsx)(Ye.StatusMessage.Content,{children:d("errorState.description")}),(0,M.jsx)(Ye.StatusMessage.Actions,{children:(0,M.jsx)(Ye.StatusMessage.Action,{onClick:l,children:d("errorState.reload")})})]})}),r&&(0,M.jsx)(Ze,{}),o&&s]})};var qe=i(61245),Ve=i(20640),Ge=i.n(Ve),Je=i(10443),Xe=i(97179),Qe=i(48475),et=i(63246),tt={controls:"DCnufmfreCqxhKkO3CyU",controlsWrapper:"aqFPoGByAfoue9BC1VJr",copyShareLinkButtonWrapper:"zJPosak05fmK5CeyLg1n",infoButtonWrapper:"MCeph83N1ytJ5R5w6Zg9",customButton:"tEaQIqR0iL2n9nDS7rUG",infoButton:"_3om9r97ugJIyUPub8hd",infoTooltipContainer:"X0H8fgWSmAplB4LmaaaZ",infoTooltip:"QJZirdmDt0XLqHZ9wyiU",tooltipContentIcon:"lzqhGFhdZNvxIbV2S0X7",imageHtmlText:"uI9O0kj_b7rqExmaiOkN",infoTooltipEmoji:"mv1W_PtfkZAqObflXjPj"};const it=e=>{let{description:t,showTooltip:i,setShowTooltip:o,className:r}=e;const{isSharingPage:a,isClient:l,contentSharingClicked:c}=(0,n.eY)({isSharingPage:g.aj._1.$isSharingPage,isClient:et.y.outputs.$isClient,contentSharingClicked:P.travelMapPublicApi.content.inputs.contentSharingClicked}),{t:d}=(0,p.useTranslation)("widget_travel_map"),[h,v]=(0,s.useState)(!1),[y,x]=(0,s.useState)(null),[b,f]=(0,s.useState)(null);(0,Qe.Bh)(y),(0,Qe.Bh)(b),(0,s.useEffect)((()=>{if(!l)return;const e=document.querySelector(".guides-snackbar");e&&e instanceof HTMLElement&&f(e)}),[l,h]);const T=(0,s.useMemo)((()=>t?(0,M.jsx)("div",{ref:x,className:tt.infoTooltipContainer,children:(0,M.jsxs)("div",{className:tt.infoTooltip,children:[(0,M.jsx)("span",{className:tt.tooltipContentIcon,children:"📷"}),(0,M.jsx)(N.Jv,{className:tt.imageHtmlText,type:C.TextType.Body3Semi,children:t.expanded||t.text})]})}):null),[t,x]),S=(0,s.useCallback)((()=>{o(!i)}),[o,i]),j=(0,s.useCallback)((()=>{Ge()(document.location.href)&&(v(!0),c())}),[c]),k=(0,s.useCallback)((e=>{e&&e.stopPropagation(),v(!1)}),[]),I=(0,s.useCallback)(((e,t)=>{var i;"A"!==(null===(i=t.target)||void 0===i?void 0:i.tagName)&&o(!1)}),[o]);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{className:u()(r,tt.controls),children:(0,M.jsxs)("div",{className:tt.controlsWrapper,children:[t?(0,M.jsx)("div",{className:u()(tt.infoButtonWrapper,tt.showInfoButtonWrapper),children:(0,M.jsx)(Je.Tooltip,{placement:"bottom-start",width:"auto",visible:i,content:T,onClickOutside:I,children:(0,M.jsx)("button",{className:u()(tt.infoButton,tt.customButton),onClick:S,children:(0,M.jsx)(m.Icon16ControlsInfoOutline,{})})})}):null,a&&(0,M.jsx)("div",{className:u()(tt.infoButtonWrapper,tt.copyShareLinkButtonWrapper),children:(0,M.jsx)("button",{"data-test-id":"place-details-copy-btn",className:u()(tt.infoButton,tt.customButton),onClick:j,children:(0,M.jsx)(m.Icon24ControlsShare,{width:"16",height:"16"})})})]})}),(0,M.jsx)(Xe.Snackbar,{className:u()(tt.snackbar,"guides-snackbar"),message:d("linkCopied"),visible:h,icon:(0,M.jsx)(m.Icon24ColorAllowed,{}),onClose:k})]})};var st="dnbgjUsU8FessSL2ogEn",nt="dOPaTLP6gG2R7Tc0xL5Y";const ot=e=>{let{images:t,ImageComponent:i,className:n}=e;const[o,r]=(0,s.useState)(0),[a,l]=(0,s.useState)(!1),c=(0,s.useRef)(null),d=t[o],p=(0,s.useRef)(0),m=s.useCallback((e=>{const t=c.current;if(!t)return;const i=p.current+e;p.current=i,t.style.transform=`translateX(-${i}px)`}),[]),h=s.useCallback((()=>{const e=c.current;e&&o<t.length-1&&(r((e=>e+1)),m(e.clientWidth))}),[m,o,t]),g=s.useCallback((()=>{const e=c.current;e&&o>0&&(r((e=>e-1)),m(-e.clientWidth))}),[o,m]),{ref:v}=(0,qe.useSwipeable)({onSwiped:e=>{"Left"===e.dir?h():"Right"===e.dir&&g()}});return(0,M.jsxs)("div",{className:u()("aHgwVYHOJIukXGmEsLtX",n),children:[(0,M.jsx)(it,{className:"RcHWkb6BtbHQtOvugMA7",showTooltip:a,setShowTooltip:l,description:d.description}),(0,M.jsx)("div",{ref:e=>{v(e),c.current=e},className:"JzvkCrHZGg1RlmJDnp3E","body-scroll-lock-ignore":"",children:t.map((e=>(0,M.jsx)("div",{className:"P7y0xWodyUAvm6xQ9QYH",children:(0,M.jsx)(i,{image:e})},e.imageUrl)))}),o>0&&(0,M.jsx)("button",{className:u()(st,"YlsqeTYswx9EhRTy49mX"),onClick:g,children:(0,M.jsx)(Ae.Icon24ControlsChevron,{className:nt})}),o<t.length-1&&(0,M.jsx)("button",{className:u()(st,"gqH8z_x6nTBrE0sBOMHD"),onClick:h,children:(0,M.jsx)(Ae.Icon24ControlsChevron,{className:nt})}),t.length>1&&(0,M.jsx)("div",{className:"pabQNxcdSTAi28sd_jA6",children:t.map(((e,t)=>(0,M.jsx)("div",{className:u()("LfeZ6XkRC_4LnvnZUHRk",t===o&&"uIyd_67nZBSAsNd_dctf")},t)))})]})};const rt=e=>{let{image:t}=e;const{imageUrl:i,imageAlt:s}=t,n=(0,a.pu)(i,704,704),{isImageLoaded:o,onImageLoad:r}=(0,h.h3)(n);return(0,M.jsxs)("div",{className:"PZqlW3G4HtU8NDjMEPM9",children:[(0,M.jsx)("div",{className:"YfjgqHbml0aFUGa3uLtO",children:(0,M.jsx)("img",{className:u()("MwII6ex45qRGll3faazX",o&&"pKM_AcJNWSE7RX_ZEfHJ"),src:n,onLoad:r,alt:s})}),(0,M.jsx)("div",{className:"tCTp2GOdXXrGXEGycU5I"})]})};const at=e=>{var t;let{images:i}=e;const{t:o}=(0,p.useTranslation)("widget_travel_map"),r=(null===(t=(0,n.eY)(P.travelMapPublicApi.selectedPlace.outputs.$pin))||void 0===t?void 0:t.name)||"",a=s.useMemo((()=>i.map((e=>{let{url:t,description:i}=e;return{imageUrl:t,imageAlt:o("pinImageAlt",{pinImageAlt:r}),description:i}}))),[i,r,o]);return(0,M.jsx)(ot,{className:"ezBOBMFoTGZGJf1xDPBj",images:a,ImageComponent:rt})};const lt=e=>{let{block:t}=e;const{emoji:i,text:s,header:n}=t;return(0,M.jsxs)(N.kJ,{icon:i.svg,className:"DRgS4PUUDvAhYlFokT4g",children:[(0,M.jsx)(N.kJ.Header,{header:n}),(0,M.jsx)(N.kJ.Text,{text:s})]})};var ct;function dt(){return dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},dt.apply(this,arguments)}var ut=function(e){return s.createElement("svg",dt({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),ct||(ct=s.createElement("path",{d:"M7.5 3.027c-.504 5.338-1.53 6.3-5.833 6.862 4.304.562 5.329 1.524 5.833 6.86.505-5.336 1.53-6.298 5.834-6.86C9.03 9.326 8.004 8.365 7.5 3.027zM15 2.5c-.288 2.669-.873 3.15-3.333 3.43 2.46.282 3.045.762 3.333 3.431.288-2.669.874-3.15 3.334-3.43C15.874 5.65 15.289 5.168 15 2.5zM13.334 11.472c-.288 2.67-.874 3.15-3.333 3.43 2.459.282 3.045.763 3.333 3.431.288-2.668.873-3.149 3.333-3.43-2.46-.282-3.045-.762-3.333-3.43z",fill:"#fff"})))};const pt=e=>{let{text:t,destinationName:i=""}=e;const{isVisible:s,isSharingPage:o,onClick:r}=(0,n.eY)({isVisible:P.travelMapPublicApi.discoverDirection.outputs.$isButtonVisible,isSharingPage:g.aj._1.$isSharingPage,onClick:P.travelMapPublicApi.discoverDirection.inputs.discoverButtonClicked});return s&&t&&o?(0,M.jsx)("div",{className:"idFRLb2NC9O0MdRNAe8s",children:(0,M.jsx)(m.Button,{onClick:()=>r({destinationName:i}),size:m.ButtonSize.M,floating:!0,children:(0,M.jsxs)("div",{className:"yYASW87uzikDe_daw0de",children:[(0,M.jsx)(ut,{className:"XzzsJ1vBXVdHsk_MakcF"}),(0,M.jsx)(C.Text,{className:"j1iHPdb1QDn28HcOx_cp",tag:"p",type:C.TextType.Body1Semi,truncateMode:C.TruncateTextMode.SingleLine,children:t})]})})}):null};const mt=e=>{let{block:t}=e;const{t:i}=(0,p.useTranslation)("widget_travel_map"),{groups:o,closeModal:r,openModal:c,setPoi:d,setLayer:u,source:m,setTrapPoiOpenSource:h}=(0,n.eY)({groups:a.vT.place.outputs.$tabs,closeModal:v.Y.inputs.close,openModal:l.IK.modal.inputs.open,setPoi:l.IK.selected.inputs.setPoi,setLayer:l.IK.selected.inputs.setLayer,source:l.IK.sources.outputs.$trapSource,setTrapPoiOpenSource:P.travelMapPublicApi.poiOpenSource.inputs.setPoiOpenSource}),g=(0,s.useMemo)((()=>{var e;return null==o||null===(e=o.find((e=>e.id===t.group_id)))||void 0===e?void 0:e.id}),[t.group_id,o]),y=(0,s.useCallback)((()=>{r(),g&&c({layer:g??null,openSource:m})}),[m,c,r,g]),b=(0,s.useCallback)((e=>{h(x.lX.POI),u(g??null),d(e)}),[g,u,d,h]);return(0,M.jsxs)("div",{className:"j2w1rn9TB1fM5BLZSJnA",children:[(0,M.jsxs)("div",{className:"nYkXAnKD3DyvFDTiFiRV",children:[(0,M.jsx)(C.Text,{type:C.TextType.Title4Bold,truncateMode:C.TruncateTextMode.SingleLine,children:t.header}),(0,M.jsxs)(C.Text,{className:"OxUhWLGsSjt8ihMzHLia",type:C.TextType.Body3Semi,onClick:y,children:[(0,M.jsx)(Ee.Link,{children:i("modal.seeAllPlaces")}),(0,M.jsx)(Ae.Icon16ControlsDisclosure,{})]})]}),(0,M.jsx)(N.lr,{classNames:{images:"lqaKQFtD0OAnh5VfddqQ"},children:t.places.map((e=>(0,M.jsx)(N.d$,{title:e.name,url:e.image_url,titleTextType:C.TextType.Body2Regular,imageWidth:144,className:"TUmr3Im0t1kjwTGYGc5N",onClick:()=>b(e.id)},e.id)))})]})};const ht=e=>{let{id:t}=e;const{openHotel:i,searchParams:o}=(0,n.eY)({openHotel:P.travelMapPublicApi.hotelPoi.inputs.openHotel,searchParams:P.travelMapPublicApi.hotelPoi.outputs.$searchParams}),{t:r}=(0,p.useTranslation)("widget_travel_map"),a=(0,s.useCallback)((e=>{const s=e.metaKey||e.altKey||e.ctrlKey||e.shiftKey;0!==e.button||s||(e.preventDefault(),i({hotelId:t}))}),[t,i]);return(0,M.jsx)("div",{className:"sssnxvpC4JPHHE7vR2Zc",children:(0,M.jsx)(m.Button,{onClick:a,href:`/hotels/${t}?${o.toString()}`,size:m.ButtonSize.M,floating:!0,children:r("hotels.book")})})};const gt=e=>{let{description:t}=e;return(0,M.jsx)("div",{className:"lD1UHnfa_3bq4BfFssH3",children:(0,M.jsx)(m.Text,{className:"iOGsBei7q9hJ7Vkax5AN",type:m.TextType.Body2Paragraph,children:t})})};const vt=e=>{let{block:{header:t,items:i}}=e;const{openPoi:o,direction:r,openSource:a}=(0,n.eY)({openPoi:v.Y.inputs.open,direction:y.Rn.outputs.$direction,openSource:l.IK.sources.outputs.$trapSource});return(0,M.jsxs)("div",{className:"YCYOD402d3yF3ZSc3ij3",children:[(0,M.jsx)(C.Text,{className:"GKxoHU2RSuGKCGIt_9BS",type:C.TextType.Title4Bold,children:t}),i.map((e=>(0,s.createElement)(Pe,{...e,className:"tqq_bSA46xu7JsvREX9Q",key:e.id,onClick:()=>{return t=e.id,void o({poi:t,direction:r,openSource:a,trapSource:x.lX.DISTRICT});var t},withArrow:!0})))]})};var yt={item:"GyoD7ZfVWaDgw_ND3QAN",icon:"UXIHxaXq0dNEfXrv7Ym6"};const xt=e=>{var t;let{item:i}=e;const{districtPlacesClicked:s}=(0,n.eY)({districtPlacesClicked:P.travelMapPublicApi.content.inputs.districtPlacesClicked}),o=(null===(t=i.map_place.links.find((e=>"google"===e.type)))||void 0===t?void 0:t.link)??Le(i.map_place.coordinates);return(0,M.jsxs)("a",{className:yt.item,href:o,target:"_blank",rel:"noreferrer",onClick:()=>s({place_id:i.id,place_title:i.title}),children:[(0,M.jsx)("img",{className:yt.icon,src:i.icon.svg,alt:""}),(0,M.jsx)(C.Text,{className:yt.text,type:C.TextType.Body1Regular,children:i.title})]})};const bt=e=>{let{block:{header:t,items:i}}=e;return(0,M.jsxs)("div",{className:"HxzIOne7tYDq0XIOMYml",children:[(0,M.jsx)(C.Text,{className:"AA6uMg0Ytd6iA4GPyJqb",type:C.TextType.Title4Bold,truncateMode:C.TruncateTextMode.TwoLines,children:t}),(0,M.jsx)("ul",{className:"EvisXkaEkFJaev_bvYNU",children:i.map((e=>(0,M.jsx)("li",{className:"eR9BF9nWILkFWBtOed8C",children:(0,M.jsx)(xt,{item:e})},e.id)))})]})};var ft=i(81926),Tt=i(49434),Pt=i(53356);const St=e=>{var t;let{place:i}=e;const{t:s}=(0,p.useTranslation)("widget_travel_map"),{onHotelClick:o,openPoi:r,direction:a,openSource:c,isDistrictsTab:d,hotelsClickedAnalytics:m}=(0,n.eY)({onHotelClick:ft.$o.inputs.hotelClicked,openPoi:v.Y.inputs.open,direction:y.Rn.outputs.$direction,openSource:l.IK.sources.outputs.$trapSource,hotelsClickedAnalytics:P.travelMapPublicApi.content.inputs.hotelsClicked,isDistrictsTab:P.travelMapPublicApi.selectedPlace.outputs.$isDistrictsTab}),h="external"===i.type,g=(0,Pt.r)({link:h?i.link:null,link_v2:h&&i.link_v2||null,openSource:d?ft.h0.district:ft.h0.poi});return(0,M.jsx)(N.d$,{title:i.title,subtitle:i.subtitle,url:i.image_url,href:g,imageWidth:144,className:"gnHAT_tHB9F8SBLdwdQY",onClick:()=>{m({hotel_id:i.id}),"place"!==i.type?o({search_hotel_link_v2:i.link_v2||null,entrypoint:Tt.H_.TrapHotels}):r({poi:i.id,direction:a,openSource:c,trapSource:x.lX.DISTRICT})},content:e=>{let{className:t}=e;return(0,M.jsxs)("div",{className:u()(t,"_hNJXg5bfq5cgU6Vm8I0"),children:[(0,M.jsx)(C.Text,{className:"MgftRigGCvNeqeOst4pw",type:C.TextType.CaptionRegular,truncateMode:C.TruncateTextMode.SingleLine,children:i.title}),i.subtitle&&(0,M.jsx)(C.Text,{type:C.TextType.Body2Regular,className:"ODI5i8f8bBgKZUTY6WH2",truncateMode:C.TruncateTextMode.TwoLines,children:i.subtitle}),i.price&&(0,M.jsxs)(C.Text,{className:"nQFsrb7yMVlbyKkaGYwA",type:C.TextType.Body1Semi,truncateMode:C.TruncateTextMode.SingleLine,children:[`${s("hotels.priceFrom")}`," ",(0,M.jsx)(N.fE,{price:i.price.amount})]})]})},children:i.badge&&(0,M.jsxs)("div",{className:"uyUjq4n_KNtHnYurq3jw",style:{color:i.badge.style.text_color,backgroundColor:i.badge.style.background_color},children:[(null===(t=i.badge.icon)||void 0===t?void 0:t.svg)&&(0,M.jsx)("img",{className:"WJ1LlYCHCI2ZDwuBs2uK",alt:"",src:i.badge.icon.svg}),(0,M.jsx)(C.Text,{type:C.TextType.Body3Semi,truncateMode:C.TruncateTextMode.SingleLine,children:i.badge.text})]})})},jt=e=>{let{block:t}=e;const i=(0,n.eY)(c.l.$isMobile);return(0,M.jsxs)("div",{className:"UhtqtIRJujdYJp1P3aLC",children:[(0,M.jsx)(C.Text,{className:"XxIZ3RLdgfFgx7Ssco6K",type:C.TextType.Title4Bold,truncateMode:C.TruncateTextMode.SingleLine,children:t.header}),(0,M.jsx)(N.lr,{classNames:{images:"Eh4AfI3hQ0vf2awRylIw",root:"QlwcO8aVRJRcczZ4m7hn",navigation:"Ar067fF8l8LLSaKESdwL"},itemWidth:144,carousel:{rightGap:10},visibleItems:2,showNavBar:!i&&t.items.length>2,children:t.items.map((e=>(0,M.jsx)(St,{place:e},e.id)))})]})},kt=(e,t)=>{switch(e.type){case"title":return(0,M.jsx)(We,{title:e.block.title,isHotel:t});case"description":return(0,M.jsx)(Re,{text:e.block.description});case"restrictions":return(0,M.jsx)(He,{restriction:e.block.restriction});case"advice":return(0,M.jsx)(Oe,{block:e.block});case"tags":return(0,M.jsx)(Ue,{tags:e.block.tags});case"buttons":return(0,M.jsx)(ze,{block:e});case"bullets":return(0,M.jsx)(N.Z9,{block:e.block,className:Fe.bullets});case"poi_carousel":return(0,M.jsx)(mt,{block:e.block});case"bullet_with_header":return(0,M.jsx)(lt,{block:e.block.bullet});case"image_gallery":return(0,M.jsx)(at,{images:e.block.images});case"landmark":return(0,M.jsx)(gt,{description:e.block.landmark});case"places_list":return(0,M.jsx)(vt,{block:e.block});case"points_list":return(0,M.jsx)(bt,{block:e.block});case"places_carousel":return(0,M.jsx)(jt,{block:e.block});default:return null}},Mt=e=>"poi_carousel"===e.type||"image_gallery"===e.type,It=e=>{const{error:t,pending:i,fetch:o,isMobile:r,isHotel:a,isHotelsEnabled:l,data:d}=(0,n.eY)({error:P.travelMapPublicApi.mapPoi.outputs.$error,pending:P.travelMapPublicApi.mapPoi.outputs.$pending,fetch:P.travelMapPublicApi.mapPoi.inputs.fetch,isMobile:c.l.$isMobile,isHotel:P.travelMapPublicApi.selectedPlace.outputs.$isHotelsTab,isHotelsEnabled:_e.qF.outputs.$isHotelsEnabled,data:P.travelMapPublicApi.mapPoi.outputs.$data}),p=(0,s.useMemo)((()=>null==d?void 0:d.blocks.filter((e=>"poi_carousel"!==e.type||r))),[d,r]),m=null==d?void 0:d.action_button,h="book_hotel"===(null==m?void 0:m.type)&&l;return(0,M.jsxs)(Ke,{showDetailsInfo:Boolean(d),isError:Boolean(t),isLoading:i,handleRefetchClick:o,...e,children:[p&&(0,M.jsxs)("div",{className:Fe.contentWrapper,children:[p.map(((e,t)=>(0,M.jsx)("div",{className:u()(Mt(e)&&Fe.blockWrap),children:kt(e,a)},t))),h&&(0,M.jsx)(ht,{id:null==m?void 0:m.payload.hotel_id})]}),(0,M.jsx)("div",{className:Fe.bottomMargin}),"discover"===(null==m?void 0:m.type)&&(0,M.jsx)(pt,{text:m.payload.title,destinationName:null==d?void 0:d.city_map_title})]})};var wt=i(96026),Ct=i.n(wt),Nt=i(20642),$t=i(79403);const _t=e=>{let{tab:t,checked:i,className:o}=e;const{setLayer:r,showPlaces:a}=(0,n.eY)({setLayer:l.IK.selected.inputs.setLayer,showPlaces:l.IK.modalPanelViews.placesListView.inputs.show}),c=(0,s.useCallback)((()=>{r(t.id)}),[t,r]);return(0,M.jsx)("div",{className:o,children:(0,M.jsx)(N.G3,{selected:i,tab:t,onClick:c,onShowPlacesClick:a})})};var At="LnQwyqJoZ4Pm7laOHZz9";const Lt=e=>{let{className:t}=e;const{brand:i,isMobile:s,isLoading:o,selectedLayerType:r,visibleTabs:d}=(0,n.eY)({brand:$t.U.outputs.$brand,isMobile:c.l.$isMobile,isLoading:a.vT.place.outputs.$pending,selectedLayerType:l.IK.selected.outputs.$layer,visibleTabs:P.travelMapPublicApi.visibleTabs.outputs.$tabs}),{t:u}=(0,p.useTranslation)("widget_travel_map");return(0,M.jsxs)("div",{className:t,children:[(0,Nt.isAviasales)(i)&&(0,M.jsx)("div",{className:"P6fFjdYjMC8TNvnWjLeQ",children:(0,M.jsx)(C.Text,{type:C.TextType.Title4Bold,children:u("modal.layersTitle")})}),(0,M.jsx)("div",{className:"HJSltvxITw6gyuXPp5sr",children:(0,M.jsxs)("ul",{className:"QT0cVtJf4EVCMEN1KwY5",children:[o&&(0,M.jsx)(M.Fragment,{children:Ct()(5).map((e=>(0,M.jsx)(N.y8,{isMobile:s,className:At},e)))}),d&&d.map((e=>(0,M.jsx)(_t,{className:At,tab:e,checked:e.id===r},e.id)))]})})]})};var Bt=i(19347),Dt=i(44269),zt=i.n(Dt),Et=i(91263);const Ot=e=>{var t;let{tab:i,onPlaceLayerClick:o}=e;const r=(0,n.eY)(l.IK.selected.outputs.$layer),a=`layer-selector-${i.type}`,c=i.id===r,d=(0,s.useCallback)((()=>{o(i.id)}),[i,o]);return(0,M.jsxs)("div",{className:u()("RCyS2yNan_38xp68NSFp",c&&"eS8Cts29drdTYsPY47VA"),id:a,onClick:d,children:[(0,M.jsx)(N.Mf,{className:"SWrwUG3WPMrg4BLinbDW",imageUrl:i.icon.svg,imageAlt:i.title}),(0,M.jsx)(C.Text,{type:C.TextType.Body1Bold,children:i.title}),(null===(t=i.premium)||void 0===t?void 0:t.badge)&&(0,M.jsx)(N.TC,{selected:c,badge:i.premium.badge})]},i.id)};const Rt=e=>{let{className:t}=e;const{selectedLayerTab:i,visibleTabs:s,isSingleTab:o,handlePlaceLayerClick:r}=(0,n.eY)({selectedLayerTab:l.IK.selected.outputs.$layer,visibleTabs:P.travelMapPublicApi.visibleTabs.outputs.$tabs,isSingleTab:P.travelMapPublicApi.visibleTabs.outputs.$isSingleTab,handlePlaceLayerClick:l.IK.selected.inputs.setLayer});return(0,Et.useIsomorphicLayoutEffect)((()=>{if(!i)return;const e=document.getElementById(`layer-selector-${i}`);e&&zt()(e,{behavior:"smooth",scrollMode:"always",inline:"center",block:"nearest"})}),[i]),o?null:(0,M.jsx)("div",{className:t,children:(0,M.jsx)("div",{className:"aj_LBiV22WAnncW5qPgm","body-scroll-lock-ignore":"",children:s.map((e=>(0,M.jsx)(Ot,{tab:e,onPlaceLayerClick:r},e.id)))})})};var Ht=i(81811),Ut={container:"J8k1jqjcy07WT0wMkwEF",closedContainer:"HnwYap7BZ1VaZ17Kn0fP",openedContainer:"QtJgZYuEYIO7PqO5Ta0j",info:"cROmlJi2AEb9kPSQBNhs",paywallInfo:"iT20UiG5hp8EoQ3ZkGet",opened:"ClvHkFtCci9FZP0A_RW5",closed:"cTMsbT2n8PalVys7rFLa",hiddenOverlay:"nJ2R2p_EIF6eOX3QT8Rp",text:"egT6V2DRjhllGn98gFSi",textContainer:"iamdh9zBdwNLUvFpJbaZ",captionButton:"STmr0sTgpoJIe13lpq3n",icon:"_9SxGiL5IH3Plm3xmPv0",paywallIcon:"xpa7UObpnuViy9eBRa4j",close:"hpfSlfOpGVtZDUpG14rf",chevronIcon:"oBkE2qxy_xPeNDNgkBXA",enter:"N_3dUCNI8PlE_V_bdeMI",exit:"TUIXHPNUZWlpD_AXBXXR",openedImageOverlay:"B0BrrOxs7nmwpJBbIbQV"};const Wt=e=>{let{info:t,isOpen:i,onChange:o}=e;const r=(null==t?void 0:t.text)||"",a=(0,s.useCallback)((()=>o(!i)),[o,i]),l=(0,s.useRef)(null),c=(0,n.eY)(Ce.X.inputs.entryPointInteracted),d=(0,s.useCallback)((()=>{t.type!==x.Eg.PAYWALL?i||a():c(we.N9.TrapTabPromo)}),[t.type,i,c,a]);return(0,M.jsx)(Ht.CSSTransition,{in:i,timeout:{enter:300,exit:400},classNames:{enter:Ut.enter,exit:Ut.exit},nodeRef:l,children:(0,M.jsx)("div",{className:u()(Ut.container,i&&Ut.openedContainer,!i&&Ut.closedContainer),children:(0,M.jsx)(N.vZ,{radius:14,className:i?Ut.openedImageOverlay:Ut.closedImageOverlay,overlayClassName:i?void 0:Ut.hiddenOverlay,children:(0,M.jsxs)("div",{className:u()(Ut.info,t.type===x.Eg.PAYWALL&&Ut.paywallInfo,i&&Ut.opened,!i&&Ut.closed),onClick:d,ref:l,children:[(0,M.jsx)("img",{className:u()(Ut.icon,t.type===x.Eg.PAYWALL&&Ut.paywallIcon),src:t.emoji_image.svg,alt:""}),(0,M.jsx)("div",{className:Ut.textContainer,children:(0,M.jsx)(N.Jv,{className:Ut.text,type:C.TextType.Body3Paragraph,children:r})}),t.type===x.Eg.PAYWALL?(0,M.jsx)("span",{className:Ut.chevronIcon}):(0,M.jsx)(le.CloseButton,{className:Ut.close,onClick:a,size:"small"})]})})})})};var Yt="gfTJf8h0ftgOA96gkDB6",Ft="os4SeuJrpiPUpiJz0753",Zt="te4chVx9kLg9j4CCZYds",Kt=i(88956),qt=i(82343);const Vt=()=>{const{viewMode:e,switchViewMode:t,visiblePinsAmount:i}=(0,n.eY)({viewMode:P.travelMapPublicApi.viewMode.outputs.$value,switchViewMode:P.travelMapPublicApi.viewMode.inputs.toggle,visiblePinsAmount:P.travelMapPublicApi.selectedPlace.outputs.$tab.map((e=>(null==e?void 0:e.places.length)||0))}),{t:s}=(0,p.useTranslation)("widget_travel_map");return(0,M.jsx)(Kt.Button,{className:"WHzAuHp8GaqI7Mv9WMv0",floating:!0,size:Kt.ButtonSize.XS,onClick:t,children:e===w.wO.MAP?(0,M.jsxs)("div",{className:Ft,children:[(0,M.jsx)(Ae.Icon24ControlsHamburger,{className:Zt}),s("modal.mobileSwitchToList",{amount:i})]}):(0,M.jsxs)("div",{className:Ft,children:[(0,M.jsx)(qt.Icon24CommonAnywhere,{className:Zt}),s("modal.mobileSwitchToMap")]})})},Gt=()=>{const{viewMode:e,isLoading:t,currentLayer:i,isSingleTab:o,data:r}=(0,n.eY)({viewMode:P.travelMapPublicApi.viewMode.outputs.$value,isLoading:a.vT.place.outputs.$pending,currentLayer:P.travelMapPublicApi.selectedPlace.outputs.$tab,isSingleTab:P.travelMapPublicApi.visibleTabs.outputs.$isSingleTab,data:a.vT.place.outputs.$data}),l=Boolean(e===w.wO.MAP&&r&&i),[c,d]=(0,s.useState)(!0);return(0,s.useEffect)((()=>{d(!0)}),[i]),t?(0,M.jsx)("div",{className:Yt,children:(0,M.jsx)(Bt.Spinner,{className:"llHMEcwhAEg0AlJL2mcR"})}):(0,M.jsxs)("div",{className:Yt,children:[(0,M.jsx)(Rt,{className:"AOIFCVY4KXUH_fsD7rRy"}),l&&(0,M.jsx)(be,{}),e===w.wO.LIST&&(0,M.jsx)("div",{className:u()("rVr6LvDRLUp0V1ZA2Vjl",o&&"DWg6dO7ZHcJsABNPlpuZ"),children:(0,M.jsx)($e,{isMobile:!0})}),(0,M.jsxs)("div",{className:"Td2_Q1GwxwOrQx0Rbsec",children:[(null==i?void 0:i.info)&&e===w.wO.MAP&&(0,M.jsx)(Wt,{info:null==i?void 0:i.info,isOpen:c,onChange:d}),(0,M.jsx)(Vt,{})]})]})};var Jt={container:"_MWNY6qNyvEyJP0JhO6g",errorContainer:"B8sFc06k46e1rhNBc6oB",columnsContainer:"umLoY7QyqUy1moXn4ILV",fixedWidth:"MVUoUOLj6NaxyMxRKy4e",tabsListBlock:"x5lg9d5zdYVqi4Ds27ba",districtsLayerControl:"bUe9UIan_lRO3PsLvnlT",mapContainer:"FIl0IEzczDrpwVuszdIk",districtsControl:"WINBYYr3xbmQtdIIAHFl",hidden:"pbTIwiiCSMoKKpePtQma"};const Xt=()=>{const e=(0,n.eY)(a.vT.place.inputs.fetch);return(0,M.jsxs)(Ye.StatusMessage,{className:"dkaKSVcnXf3WImBoDRRe",children:[(0,M.jsx)(Ye.StatusMessage.Icon,{mod:Ye.StatusMessageIconMods.Warning}),(0,M.jsx)(Ye.StatusMessage.Actions,{children:(0,M.jsx)(Ye.StatusMessage.Action,{onClick:e})})]})};const Qt=e=>{let{children:t,visible:i,className:s}=e;return(0,M.jsx)("div",{"body-scroll-lock-ignore":"",className:u()("eSUQ6jYIlunPwOWAjju1",!i&&"hUQiO5Av5ralA9oGaGSr",s),children:t})},ei=e=>{let{data:t}=e;const[i,o]=(0,s.useState)(!0),{error:r,placesListOpened:d,shouldShowTabsList:m,shouldShowPlaceDetails:h,hidePlaces:g,isMobile:v,selectedLayerType:y,currentLayer:x}=(0,n.eY)({error:a.vT.place.outputs.$error,placesListOpened:l.IK.modalPanelViews.placesListView.outputs.$opened,shouldShowTabsList:l.IK.modalPanelViews.layerTabsView.outputs.$opened,shouldShowPlaceDetails:l.IK.modalPanelViews.placeDetailsView.outputs.$opened,hidePlaces:l.IK.modalPanelViews.placesListView.inputs.hide,isMobile:c.l.$isMobile,selectedLayerType:l.IK.selected.outputs.$layer,currentLayer:P.travelMapPublicApi.selectedPlace.outputs.$tab}),{t:b}=(0,p.useTranslation)("widget_travel_map");(0,n.DD)(P.travelMapPublicApi.modal.inputs.ModalGate);const f=s.useMemo((()=>x&&d?x.title:b("modal.layersTitle")),[b,x,d]);return(0,s.useEffect)((()=>{o(!0)}),[x]),r?(0,M.jsx)("div",{className:u()(Jt.errorContainer),children:(0,M.jsx)(Xt,{})}):v?(0,M.jsx)(Gt,{}):(0,M.jsxs)("div",{className:u()(Jt.container),children:[(0,M.jsx)(Qt,{visible:h,className:Jt.fixedWidth,children:(0,M.jsx)(It,{closeText:f})}),(0,M.jsx)(Qt,{visible:m,children:(0,M.jsx)(Lt,{className:Jt.tabsListBlock})}),(0,M.jsx)(Qt,{visible:d,className:Jt.fixedWidth,children:(0,M.jsx)($e,{isMobile:v,onClose:g})}),t&&y&&(0,M.jsxs)("div",{className:Jt.mapContainer,children:[(0,M.jsx)(be,{className:Jt.map}),(null==x?void 0:x.info)&&(0,M.jsx)(Wt,{info:x.info,isOpen:i,onChange:o})]})]})};var ti=i(82455),ii=i(50308),si=i.n(ii),ni="ZNDa4sN3ybz8DCosT6IR";const oi=e=>{let{isMobile:t,title:i,children:o,onClose:r}=e;const{t:a}=(0,p.useTranslation)("widget_travel_map"),c=i||a("modal.layersTitle"),{isOpen:d,selectedLayerType:m,viewMode:h}=(0,n.eY)({isOpen:l.IK.modal.outputs.$isOpened,selectedLayerType:l.IK.selected.outputs.$layer,viewMode:P.travelMapPublicApi.viewMode.outputs.$value}),g=(0,s.useRef)(null);(0,Qe.cF)(d),(0,s.useEffect)((()=>{t&&g.current&&h===w.wO.LIST&&g.current.scrollTo({top:0})}),[m,t]);const v={visible:d,noAutoFocus:!0,onClose:si(),dataTestId:"travel-map-modal"};return t?(0,M.jsxs)(ti.Modal,{className:u()(ni),scrollAreaRef:g,...v,children:[(0,M.jsxs)(ti.Modal.Navigation,{transparent:!1,shadow:!0,children:[(0,M.jsx)(pe.Navbar.Title,{children:(0,M.jsx)(C.Text,{type:C.TextType.Body1Semi,children:c})}),(0,M.jsx)(pe.Navbar.RightAccessory,{children:(0,M.jsx)(le.CloseButton,{onClick:r})})]}),o]}):(0,M.jsxs)(ti.Modal,{className:ni,noHeader:!0,...v,onClose:si(),children:[o,(0,M.jsx)(le.CloseButton,{className:"ybsAPtwe00iubGMU4mnT",onClick:r})]})};const ri=()=>{const{alertShown:e,hideAlert:t,removeMapParams:i}=(0,n.eY)({alertShown:l.IK.wrongMapParamsAlert.outputs.$shown,hideAlert:l.IK.wrongMapParamsAlert.inputs.hide,removeMapParams:g.aj.FU.removeMapParams}),{t:s}=(0,p.useTranslation)("widget_travel_map");return(0,M.jsx)(m.Dialog,{padding:16,className:"UeE2T5AzlxX5zqjV_cll",visible:e,children:(0,M.jsxs)("div",{className:"mBHI6xhyYcd_piKgXV84",children:[(0,M.jsx)("div",{className:"emSDsQh4dFbd9yP0cTLA",children:(0,M.jsx)(m.Icon24ColorWarning,{width:40,height:36})}),(0,M.jsx)(m.Text,{type:m.TextType.Body1Bold,children:s("unavailableContentAlert")}),(0,M.jsx)(m.Button,{className:"Miq08EavnzP1tQo388Xy",mod:m.ButtonMod.Default,size:m.ButtonSize.M,onClick:()=>{t(),i()},children:s("wrongMapParamsAlertButton")})]})})};var ai=i(47166),li=i.n(ai),ci=i(4404),di=i(8155),ui=i(83613);const pi=li().bind({"paywall-modal":"erN5eqI0EvRg2bYPyq3n",background:"Q5VDomoCc6k8QDY7AbME",navbar:"ZPOSyWnj7mfXIa80GdeO","text-animation":"cBIUDDPM7Q394hrg3DK4","content-keyframes":"BSzFhq0kNrUnQLQ41uqk","actions-animation":"OZven0GUTmSme1g8WsBW","logo-animation":"EYpOfYJvEhsS5gxFVjd9"}),{forBrand:mi}=$t.U.inputs,hi=e=>{let{text:t,buttonText:i,buttonAction:o,isVisible:r,onClose:a}=e;const l=(0,n.eY)($t.U.outputs.$brand),c=mi(l,{[Nt.AVIASALES]:ci.T.Monogram,[Nt.WAYAWAY]:ci.T.BurdGlasses,[Nt.JETRADAR]:null}),d=(0,s.useMemo)((()=>({text:i,onClick:o})),[i,o]);return(0,M.jsxs)(ti.Modal,{visible:r,className:pi("paywall-modal"),onClose:a,noHeader:!0,dataTestId:"paywall-modal",children:[(0,M.jsx)("div",{className:pi("navbar"),children:(0,M.jsx)(pe.Navbar,{transparent:!0,shadow:!1,children:(0,M.jsx)(pe.Navbar.RightAccessory,{children:(0,M.jsx)(le.CloseButton,{background:"bright",onClick:a,"data-test-id":"paywall-modal-close-button"})})})}),(0,M.jsx)("div",{className:pi("background"),children:(0,M.jsx)(di.E,{theme:"accent"})}),(0,M.jsx)(ui.z,{children:(0,M.jsx)(ci.n,{logo:c,title:t,logoClassname:pi("logo-animation"),textClassname:pi("text-animation"),children:(0,M.jsx)(ci.n.ActionButtons,{className:pi("actions-animation"),primaryButtonProps:d})})})]})},gi=()=>{const{t:e}=(0,p.useTranslation)("widget_travel_map"),{closePaywallModal:t,isVisible:i,premiumEntryPointHandleClick:o,paywallEntrypoint:r,brand:a}=(0,n.eY)({closePaywallModal:l.IK.paywall.inputs.closeGuidesPaywallModal,isVisible:l.IK.paywall.outputs.$isPaywallOpened,premiumEntryPointHandleClick:Ce.X.inputs.entryPointInteracted,paywallEntrypoint:l.IK.paywall.outputs.$paywallEntrypoint,brand:$t.U.outputs.$brand}),c=(0,s.useCallback)((()=>{t(),o(r)}),[t,r,o]);return(0,M.jsx)(hi,{text:e(`paywallModal.${a}.title`),buttonText:e(`paywallModal.${a}.button`),isVisible:i,buttonAction:c,onClose:t})};var vi={contentWrapper:"Ptgl9EdXSruHTsTgci_p"};const yi=()=>{const{isOpened:e}=(0,n.eY)({isOpened:v.Y.outputs.$isOpened});return(0,Qe.cF)(!0),(0,M.jsx)(ti.Modal,{className:vi.placeDetailsModal,noHeader:!0,onClose:si(),visible:e,children:(0,M.jsx)("div",{className:vi.contentWrapper,"body-scroll-lock-ignore":"",children:(0,M.jsx)(It,{})})})},xi=()=>{const{placeData:e,closeModal:t,hidePlaces:i,isMobile:o}=(0,n.eY)({placeData:a.vT.place.outputs.$data,closeModal:l.IK.modal.inputs.close,hidePlaces:l.IK.modalPanelViews.placesListView.inputs.hide,isMobile:c.l.$isMobile}),r=(0,s.useCallback)((()=>{t(),i()}),[t,i]);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(oi,{title:null==e?void 0:e.title,isMobile:o,onClose:r,children:(0,M.jsx)(ei,{data:e})}),o&&(0,M.jsx)(yi,{}),(0,M.jsx)(ri,{}),(0,M.jsx)(gi,{})]})};i(23746);var bi=i(51081),fi=i(34943),Ti=i(70161),Pi=i(5923),Si=i(26210),ji=i(82407),ki=i(45810);bi.Service.Guides,(0,Ti.iZ)({from:P.travelMapPublicApi.viewMode.outputs.changed,data:{label:"view_mode",action:"changed"},payload:{userEvent:!0}}),(0,Ti.iZ)({from:(0,fi.UP)({and:[{clock:l.IK.selected.outputs.$layer.updates,source:{prevTab:(0,Pi.g)(l.IK.selected.outputs.$layerType),curTab:l.IK.selected.outputs.$layerType,tab:P.travelMapPublicApi.selectedPlace.outputs.$tab},filter:e=>{let{curTab:t,prevTab:i}=e;return null!==t&&null!==i},fn:e=>{let{tab:t,prevTab:i,curTab:s}=e;return{prev_tab:i,cur_tab:s,premium_type:(0,Si.$)(t)}}}],or:{sid:"pz6727"}}),data:{label:"tab",action:"changed"},payload:{userEvent:!0}}),(0,Ti.iZ)({from:P.travelMapPublicApi.widget.outputs.trapScreenOpened,data:{label:"screen",action:"opened"},payload:{userEvent:!0}}),(0,Ti.iZ)({from:P.travelMapPublicApi.widget.outputs.trapScreenClosed,data:{label:"screen",action:"closed"},payload:{userEvent:!0}}),(0,Ti.iZ)({from:P.travelMapPublicApi.content.inputs.screenOpened,data:{label:"content_screen",action:"opened"},payload:{userEvent:!0}}),(0,Ti.iZ)({from:P.travelMapPublicApi.content.inputs.screenLoaded,data:{label:"content_screen",action:"loaded"},payload:{userEvent:!1}}),(0,Ti.iZ)({from:P.travelMapPublicApi.content.inputs.screenClosed,data:{label:"content_screen",action:"closed"},payload:{userEvent:!0}}),(0,Ti.iZ)({from:P.travelMapPublicApi.content.inputs.screenLinkClickedAnalytics,data:{label:"content_screen_link",action:"clicked"},payload:{userEvent:!0}}),(0,Ti.iZ)({from:P.travelMapPublicApi.content.inputs.peopleClickedAnalytics,data:{category:"content",label:"people",action:"clicked"},payload:{pageName:"main",source:null,userEvent:!0}}),(0,Ti.iZ)({from:l.IK.paywall.inputs.paywallOpenedAnalytics,data:{label:"paywall",action:"opened"},payload:{userEvent:!0}}),(0,Ti.iZ)({from:(0,fi.UP)({and:[{clock:P.travelMapPublicApi.content.inputs.contentSharingClicked,source:{tab:P.travelMapPublicApi.selectedPlace.outputs.$tab,content_type:ji.i.outputs.$layerType,content_name:ji.i.outputs.$pin.map((e=>null==e?void 0:e.name)),trap_id:a.vT.place.outputs.$trapId},fn:e=>{let{tab:t,content_type:i,content_name:s,trap_id:n}=e;return{tab:null==t?void 0:t.type,content_type:i,content_name:s,sharing_type:"link",trap_id:n}}}],or:{sid:"-5sslh9"}}),data:{label:"content_sharing",action:"clicked"},payload:{userEvent:!0}}),(0,Ti.iZ)({from:(0,fi.UP)({and:[{clock:P.travelMapPublicApi.content.inputs.hotelsClicked,source:{content_id:ji.i.outputs.$pin.map((e=>null==e?void 0:e.id)),trap_id:a.vT.place.outputs.$trapId},fn:(e,t)=>{let{content_id:i,trap_id:s}=e,{hotel_id:n}=t;return{content_id:i,trap_id:s,hotel_id:n}}}],or:{sid:"-4rel4p"}}),data:{label:"hotels",action:"clicked"},payload:{userEvent:!0}}),(0,Ti.iZ)({from:(0,fi.UP)({and:[{clock:ki.s.outputs.zoomEnded,source:{curZoom:ki.s.outputs.$zoomEnd,prevZoom:ki.s.outputs.$prevZoomEnd,tab:l.IK.selected.outputs.$layerType},fn:e=>{let{curZoom:t,prevZoom:i,tab:s}=e;return{cur_zoom_level:t,prev_zoom_level:i,tab:s}}}],or:{sid:"-3s7r5l"}}),data:{label:"map_scale",action:"changed"},payload:{userEvent:!0}}),(0,Ti.iZ)({from:(0,fi.UP)({and:[{clock:P.travelMapPublicApi.content.inputs.districtPlacesClicked,source:{content_id:ji.i.outputs.$pin.map((e=>null==e?void 0:e.id)),trap_id:a.vT.place.outputs.$trapId},fn:(e,t)=>{let{content_id:i,trap_id:s}=e,{place_id:n,place_title:o}=t;return{content_id:i,trap_id:s,place_id:n,place_title:o}}}],or:{sid:"7h0m5k"}}),data:{label:"district_places",action:"clicked"},payload:{userEvent:!0}});const Mi=()=>{const{readyToFetch:e,isGuidesModalOpened:t}=(0,n.eY)({readyToFetch:a.vT.place.inputs.readyToFetchModal,isGuidesModalOpened:l.IK.modal.outputs.$isGuidesModalOpened});return(0,s.useEffect)((()=>(t&&e(!0),()=>{e(!1)})),[e,t]),(0,M.jsx)(s.StrictMode,{children:(0,M.jsx)(o.MapProvider,{children:(0,M.jsx)(xi,{})})})}},3202:function(e,t,i){let s,n,o,r,a,l,c;i.d(t,{Bz:function(){return o},HC:function(){return r},VP:function(){return c},ZF:function(){return a},pe:function(){return n},wO:function(){return s},yJ:function(){return l}}),function(e){e.MAP="map",e.LIST="list"}(s||(s={})),function(e){e[e.District=0]="District",e[e.Hotel=1]="Hotel",e[e.Default=2]="Default",e[e.Alert=3]="Alert",e[e.DefaultDesktop=4]="DefaultDesktop",e[e.DefaultMobile=5]="DefaultMobile",e[e.HotelDesktop=6]="HotelDesktop",e[e.HotelMobile=7]="HotelMobile"}(n||(n={})),function(e){e.Large="large",e.Insta="insta",e.Default="default",e.Small="small"}(o||(o={})),function(e){e[e.Water=0]="Water",e[e.Ground=1]="Ground"}(r||(r={})),function(e){e.CLUSTER="cluster",e.PIN="pin"}(a||(a={})),function(e){e.BOTTOM="bottom",e.NONE="none"}(l||(l={})),function(e){e.TOP="top",e.BOTTOM="bottom",e.LEFT="left",e.RIGHT="right"}(c||(c={}))},26210:function(e,t,i){i.d(t,{$:function(){return n}});var s=i(31087);const n=e=>{var t;return(null==e||null===(t=e.premium)||void 0===t?void 0:t.type)||s.cy.FREE}},26074:function(e,t,i){i.d(t,{A4:function(){return b},A5:function(){return y},FN:function(){return N},II:function(){return h},Jc:function(){return P},Ss:function(){return w},Tc:function(){return u},Vv:function(){return m},Wq:function(){return d},Zc:function(){return C},cu:function(){return x},hH:function(){return f},j$:function(){return p},kI:function(){return g},tu:function(){return I},vK:function(){return T}});var s=i(41387),n=i(70341),o=i(12688),r=i(67075),a=i(3202),l=i(11423),c=i(83904);const d=(e,t)=>e.order-t.order;function u(e){return{latitude:e.lat,longitude:e.lng}}const p=(e,t)=>t.some((t=>e.contains(g(t))));function m(e){return(e-1)**3+1}function h(e){return[e.latitude,e.longitude]}function g(e){return{lat:e.latitude,lon:e.longitude}}function v(e,t){const{x:i,y:s}=t.project(g(e));return{x:i,y:s}}const y=e=>{let[t,i,s,n]=[1/0,1/0,-1/0,-1/0];return e.coordinates[0].forEach((e=>{let[o,r]=e;t>o&&(t=o),i>r&&(i=r),s<o&&(s=o),n<r&&(n=r)})),[t,i,s,n]},x=(e,t)=>{if(!e)return null;const i=e.features.find((e=>{var i;return String(null===(i=e.properties)||void 0===i?void 0:i.district_id)===t}));return i?i.geometry:null},b=e=>{let{viewportSize:t,pinSize:i,pinPosition:s}=e;const n=s.y+i.height/2<t.height,o=s.y-i.height>i.height/2,r=s.x+i.width<t.width;return[n,o,s.x-i.width>i.width/2,r].every(Boolean)},f=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.x<t.x+t.width+i&&i+e.x+e.width>t.x&&e.y<t.y+t.height+i&&e.height+e.y+i>t.y},T=(e,t,i)=>{const s=[],n=Array(e.length).fill(!1),o=(s,n,r,a)=>{n[s]=!0;for(let s=0;s<e.length;s+=1){const l=e[s];!n[s]&&t(r,l)&&(null==i||i(),o(s,n,e[s],a),a.push(e[s]))}};for(let t=0;t<e.length;t+=1){const i=e[t],r=[i];n[t]||(o(t,n,i,r),s.push(r))}return s},P=e=>e.flatMap((e=>e.sort(d)[0])),S=(e,t)=>{const i=Object.entries(c.s.ZOOM_INTERVALS).find((t=>{let[i,s]=t;return e>=s[0]&&e<s[1]})),s=i?i[0]:a.Bz.Default;return s===a.Bz.Default&&t?a.Bz.Insta:s},j=(e,t)=>{var i;return Boolean(1===(null===(i=t.find((t=>t.find((t=>t.id===e.id)))))||void 0===i?void 0:i.length))},k=e=>{const t=(0,s.Z)((e=>(0,l.z_)(e.pin)?e.width*c.s.BIG_PIN_WIDTH_RADIUS_MULTIPLIER:e.width*c.s.DEFAULT_PIN_WIDTH_RADIUS_MULTIPLIER)).iterations(c.s.COLLISION_FORCE_ITERATIONS_COUNT),i=(0,n.Z)((e=>e.originalPoint.x)).strength(c.s.X_FORCE_STRENGTH),a=(0,o.Z)((e=>e.originalPoint.y)).strength(c.s.Y_FORCE_STRENGTH);(0,r.Z)(e).stop().force("x",i).force("y",a).force("collide",t).tick(c.s.SIMULATION_ITERATIONS_COUNT)};function M(e,t){const{x:i,y:s}=t({width:e.width,height:e.height});return{...e,x:e.x+i,y:e.y+s}}const I=e=>{let{map:t,size:i,offsetX:s=(()=>0),offsetY:n=(()=>0)}=e;return e=>{const{x:o,y:r}=t.project(g(e.coordinates)),{x:a,y:l}=t.project(g(e.controlledCoordinates)),c=i(e),d=s(e),u=n(e);return{pin:e,offset:{x:d,y:u},originalPoint:{x:o+d,y:r+u},x:a+d,y:l+u,...c}}},w=e=>{let{isMobile:t,layerType:i,pins:s,map:n}=e;return s.map((e=>{const s=(0,l.DO)(i)?a.Bz.Insta:a.Bz.Default,o=(0,l.W6)(s,Boolean(t)),r=((e,t)=>((e,t)=>void 0!==t.queryRenderedFeatures([e.x,e.y]).find((e=>"water"===e.sourceLayer))?a.HC.Water:a.HC.Ground)(v(e.coordinates,t),t))(e,n);return{...e,originalSize:o,controlledSize:o,controlledCoordinates:e.coordinates,displayType:s,originalTerrain:r}}))},C=e=>{let{pins:t,map:i,isMobile:s,layerType:n,mainPins:o,minZoomToRepel:r}=e;const d=(0,l.DO)(n),u=T(t,((e,t)=>{const n=(0,l.W6)((0,l.oo)(S(i.getZoom(),d),d),s),o=(0,l.W6)((0,l.oo)(S(i.getZoom(),d),d),s),r={...v(e.coordinates,i),...n},a={...v(t.coordinates,i),...o},{COLLISION_DETECTION_PADDING:u}=c.s;return f(M(r,(e=>{let{width:t,height:i}=e;return{x:-t/2,y:-i}})),M(a,(e=>{let{width:t,height:i}=e;return{x:-t/2,y:-i}})),u)})),p=(e=>{let{pins:t,map:i,mainPins:s,layerType:n,isMobile:o,clusters:r,minZoomToRepel:c}=e;const d=e=>Boolean(s.find((t=>e.id===t.id))),u=(0,l.DO)(n);return t.map((e=>{const t=(e=>{let{isInsta:t,isMain:i,isSinglePinCluster:s,zoom:n,minZoomToRepel:o}=e;const r=S(n,t);if(n<o)return a.Bz.Small;if(i)return a.Bz.Large;if((0,l.LY)(r).smallerThan(a.Bz.Default))return t?a.Bz.Insta:a.Bz.Default;if(s){const e=(0,l.oo)(r,t);return t&&e===a.Bz.Default?a.Bz.Insta:e}return r===a.Bz.Default?t?a.Bz.Insta:a.Bz.Default:r===a.Bz.Large?(0,l.mB)(r,t):r})({isInsta:u,zoom:i.getZoom(),isSinglePinCluster:j(e,r),minZoomToRepel:c,isMain:d(e)});return{...e,controlledSize:(0,l.W6)(t,o),displayType:t}}))})({pins:t,mainPins:o,map:i,isMobile:Boolean(s),layerType:n,clusters:u,minZoomToRepel:r});return((e,t,i,s)=>{const n=i.getZoom()<t?e.filter((e=>!(0,l.UW)(e))):e,o=n.filter((e=>(0,l.z_)(e)||(0,l.Hj)(e))).map((e=>{const t=(e=>I({map:e,size:e=>e.controlledSize,offsetY:e=>-e.controlledSize.height/3}))(i)(e);return s.find((t=>t.id===e.id))?{...t,fx:t.x,fy:t.y}:t}));k(o);const r=[...n.filter(l.UW).map(I({map:i,size:e=>e.controlledSize,offsetY:e=>-e.controlledSize.height/2})),...o.map((e=>({...e,fx:e.x,fy:e.y})))];return k(r),e.map((e=>{const t=r.find((t=>t.pin.id===e.id));if(!t)return e;const{lat:s,lng:n}=i.unproject([t.x-t.offset.x,t.y-t.offset.y]);return{...e,controlledCoordinates:{latitude:s,longitude:n}}}))})(p,r,i,o)},N=e=>{let{pin:t,pins:i,map:s}=e;if(t.displayType===a.Bz.Large)return!0;const n=I({map:s,size:e=>({width:.8*e.controlledSize.width,height:e.controlledSize.height}),offsetX:e=>-(e.controlledSize.width/2-.1*e.controlledSize.width),offsetY:e=>-.7*e.controlledSize.height});for(const e of i)if(e.id!==t.id){const i=n(t),s=n(e);if(f(i,s))return!1}return!0}},11423:function(e,t,i){i.d(t,{DO:function(){return a},Hj:function(){return l},LY:function(){return g},UW:function(){return d},W6:function(){return u},Y5:function(){return v},hb:function(){return r},mB:function(){return h},oo:function(){return m},v6:function(){return y},wY:function(){return x},z_:function(){return c}});var s=i(68131),n=i(83904),o=i(3202);const r=(e,t)=>{if((0,s.VO)(e))return o.pe.Alert;switch(t){case s.OR:return o.pe.District;case s.NT:return o.pe.Hotel;default:return o.pe.Default}},a=e=>e===s._S,l=e=>o.Bz.Large===e.displayType,c=e=>[o.Bz.Default,o.Bz.Insta].includes(e.displayType),d=e=>o.Bz.Small===e.displayType,u=(e,t)=>{const i=n.s.SIZES[e],s=t?i.mobile:i.desktop;return{width:s,height:s}},p=[o.Bz.Small,o.Bz.Default,o.Bz.Insta,o.Bz.Large],m=(e,t)=>e===o.Bz.Small?t?o.Bz.Insta:o.Bz.Default:(e===o.Bz.Default||o.Bz.Insta,o.Bz.Large),h=(e,t)=>e===o.Bz.Large?t?o.Bz.Insta:o.Bz.Default:(e===o.Bz.Default||o.Bz.Insta,o.Bz.Small),g=e=>{const t=p.findIndex((t=>t===e));return{smallerThan:e=>{const i=p.findIndex((t=>t===e));return t<i},biggerThan:e=>p.findIndex((t=>t===e))>t}},v=e=>{let{isHovered:t,isSelected:i,type:s}=e;return t?6:i?5:s&&l({displayType:s})?4:s&&c({displayType:s})?3:s&&d({displayType:s})?2:1},y=(e,t,i,s)=>{const n=s?null==e?void 0:e.dark_theme:null==e?void 0:e.light_theme;return t||i?null==e?void 0:e.hover:n};function x(e,t){return e?3:t&&(e=>e===o.ZF.CLUSTER||e===o.ZF.PIN)(t)?2:1}}}]);