"use strict";(self.webpackChunkhelios=self.webpackChunkhelios||[]).push([[9957],{170615:function(e,t,r){var n,a,i,o,u,s,l,c,f,d,v,m,_,g,A,p,h=r(35220)(r(114558)),b=r(780925);l=b.google,c=b.metrics,o=b.debug,u=r(324632),m={},i={},n={aviaFormFilling:{start:["avia_form",null,null],trigger:["avia_form","submit","search"]},startFormInteraction:{start:null,trigger:["avia_form",null,null]}},g=function(e,t){return null===e||e===t||e instanceof RegExp&&t.match(e)},_=function(e,t,r,n){var a=(0,h.default)(e,3),i=a[0],o=a[1],u=a[2];return g(i,t)&&g(o,r)&&g(u,n)},s=function(e,t){return void 0===t&&(t="data-goal-category"),e!==document&&e?e.hasAttribute(t)?e.getAttribute(t):s(e.parentNode,t):"main"},d=function(e){return m[e]=Date.now()},v=function(e,t,r,n){var a,i,u,s,f;if(void 0===t&&(t="main"),void 0===r&&(r=e),m[e]){for(d=Date.now()-m[e],m[e]=null,f=[],a=0,i=(s=[l,c,o]).length;a<i;a++)u=s[a],f.push(u("send","timing",t,r,d,n));return f}console.warn("No timer was started for label %s",e)},a=function(e,t,r){var a,i,o;for(r in a=[],n){var u=n[r];i=u.start,o=u.trigger,i&&_(i,e,t,r)&&(m[n]||d(r)),_(o,e,t,r)&&m[n]?a.push(v(r,e,n,r)):a.push(void 0)}return a},p=function(e,t,r,n){var s,f,d,v,m;for(void 0===r&&(r="click"),void 0===n&&(n={}),a(e,r,t),m=[],s=0,f=(v=[l,c,o]).length;s<f;s++)d=v[s],m.push(d("send","event",e,r,t,u({},i,n)));return m},f=function(e){return i=e},A=function(e){var t,r,n,a;return a=null!=(n=e.getAttribute("data-event-value"))?n:void 0,r=e.getAttribute("data-goal"),t=e.getAttribute("data-goal-event")||"click",p(s(e),r,t,{value:a})},e.exports={triggerEvent:p,triggerElementEvent:A,time:d,timeEnd:v,setContext:f}},123252:function(e){e.exports={avia_form:{_selectorPrefix:".header .avia-form",click:{swapPlaces:"& .swap-places"},submit:{allSubmits:"&"}},footer_avia_form:{_selectorPrefix:".avia-form__footer",click:{swapPlaces:"& .swap-places"},submit:{allSubmits:"&"}},hotelForm:{_selectorPrefix:".hotel-form",submit:{allSubmits:"&"}},multiwayForm:{_selectorPrefix:".multiway-form",click:{removeSegment:"& .multiway-form__remove",addSegment:"& .multiway-form__add"},submit:{allSubmits:"&"}},specialOffersForm:{_selectorPrefix:".special-offer__container",click:{chooseDates:"& .special-offer__choose-dates-button",search:"& .offers-search-form__submit"}}}},312204:function(e,t,r){var n,a,i,o,u,s,l,c,f,d;s=r(324632),a=r(170615),u=r(123252),o={},n=null,d=function(e){return n=e},f=function(e,t){var r,n,i,u,s,l,c,f;for(r in o)if(!(i=o[r])._selectorPrefix||(s=i._selectorPrefix+", "+i._selectorPrefix+" *",t.matches(s)))for(u in n=i[e]||{})if(c=n[u],i._selectorPrefix&&(c=c.replace(/&/g,i._selectorPrefix)),t.matches(c))return f=null!=(l=t.getAttribute("data-event-value"))?l:void 0,void a.triggerEvent(r,u,e,{value:f})},c=function(e,t){return e.hasAttribute("data-goal")&&t===(e.getAttribute("data-goal-event")||"click")},i=function(e){var t=e.type,r=e.target;if("matches"in r)if(n&&n===t)n=null;else{if(!c(r,t))return f(t,r);a.triggerElementEvent(r)}},l=function(e){var t,r,n,a,s;for(void 0===e&&(e=u),o=e,s=[],r=0,n=(a=["click","focus","submit","mousedown"]).length;r<n;r++)t=a[r],s.push(document.addEventListener(t,i,!0));return s},e.exports=s({init:l,skipNextEvent:d},a)},780925:function(e){var t,r,n;n=function(e,t){var r,n,a,i,o,u,s,l,c;n={},""!==window.abBranch&&(n.ab_branch=window.abBranch);for(var f=arguments.length,d=new Array(f>2?f-2:0),v=2;v<f;v++)d[v-2]=arguments[v];switch(t){case"event":for(i in r=d[0],l=d[1],o=r+"--"+d[2]+"--"+l,a=d[3])null!=(c=a[i])&&(n[i]=c);break;case"timing":r=d[0],s=d[1],u=d[2],o="timing--"+r+"--"+s+"--"+d[3],n.time=u}if(o=encodeURIComponent(o),"function"==typeof mamka&&mamka("send_event",{name:o,meta:n}),window.customCounter)return window.customCounter.reachGoal(o,n)},r=function(e,t){for(var r,n,a,i,o,u=arguments.length,s=new Array(u>2?u-2:0),l=2;l<u;l++)s[l-2]=arguments[l];return r=s[0],a=s[1],i=s[2],"string"!=(o=typeof(null!=(n=s[3])?n.valueOf():void 0))&&"number"!==o&&(n=(null!=n?n.hasOwnProperty("value"):void 0)&&null!=n?n.value:void 0),"function"==typeof ga?ga(e,t,r,a,i,n):void 0},t=-1!==location.search.indexOf("debug")?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return console.log("Sending metric:",t)}:function(){},e.exports={google:r,metrics:n,debug:t}},474606:function(e,t,r){var n=r(35220);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(382697)).default;t.default=a},201634:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(312204);t.default=n},785843:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.$isWayaway=t.$isJetradar=t.$isAviasales=t.$brand=void 0,Object.defineProperty(t,"AVIASALES",{enumerable:!0,get:function(){return a.AVIASALES}}),t.IS_WAYAWAY=t.IS_JETRADAR=t.IS_AVIASALES=t.BRAND=void 0,Object.defineProperty(t,"JETRADAR",{enumerable:!0,get:function(){return a.JETRADAR}}),Object.defineProperty(t,"WAYAWAY",{enumerable:!0,get:function(){return a.WAYAWAY}}),Object.defineProperty(t,"brands",{enumerable:!0,get:function(){return a.brands}}),Object.defineProperty(t,"isAviasales",{enumerable:!0,get:function(){return a.isAviasales}}),Object.defineProperty(t,"isBrand",{enumerable:!0,get:function(){return a.isBrand}}),Object.defineProperty(t,"isJetRadar",{enumerable:!0,get:function(){return a.isJetRadar}}),Object.defineProperty(t,"isWayAway",{enumerable:!0,get:function(){return a.isWayAway}});var n=r(944246),a=r(732526),i=a.AVIASALES,o=document.documentElement.getAttribute("data-brand");(0,a.isBrand)(o)&&(i=o);var u=i;t.BRAND=u;var s=(0,a.isAviasales)(u);t.IS_AVIASALES=s;var l=(0,a.isWayAway)(u);t.IS_WAYAWAY=l;var c=(0,a.isJetRadar)(u);t.IS_JETRADAR=c;var f=(0,n.createStore)(u,{name:"store",sid:"-gnfs96"}).map((function(e){return e}));t.$brand=f;var d=f.map(a.isAviasales);t.$isAviasales=d;var v=f.map(a.isWayAway);t.$isWayaway=v;var m=f.map(a.isJetRadar);t.$isJetradar=m},389988:function(e,t,r){r.p=globalThis.HELIOS_WEBPACK_PUBLIC_PATH},878835:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.afterPromise=void 0,t.default=function(e,t){return setTimeout(t,e)},t.afterPromise=function(e){return new Promise((function(t){return setTimeout(t,e)}))}},565569:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.PICS_HOST=t.MPICS_HOST=t.API_HOST=void 0,t.getStaticHost=function(e){return(0,a.isLocal)()?e:"https://static."+o+e};var n=r(785843),a=r(582075),i=r(411640),o=(0,a.getApiHost)(n.BRAND);t.API_HOST=o;var u="pics."+(0,i.getPicsApiHost)(n.BRAND);t.PICS_HOST=u;var s="mpics."+(0,i.getPicsApiHost)(n.BRAND);t.MPICS_HOST=s},582075:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.avsShortHost=t.aviasalesRussianHost=void 0,t.escapeCheburnetHost=l,t.getApiHost=function(e){switch(e){case n.AVIASALES:return l(a);case n.WAYAWAY:default:return u}},t.isLocal=s,t.wayawayHost=void 0;var n=r(732526),a=atob("YXZpYXNhbGVzLnJ1");t.aviasalesRussianHost=a;var i=atob("YXZpYXNhbGVzLmNvbQ=="),o=atob("YXZzLmlv");t.avsShortHost=o;var u=atob("d2F5YXdheS5pbw==");function s(){try{return self.location.host.includes("localhost")}catch(e){return!1}}function l(e){return s()?e:function(){try{return self.location.host.includes(a)}catch(e){return!1}}()?e.replace(i,a):e.replace(a,i)}t.wayawayHost=u},411640:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.getPicsApiHost=function(e){switch(e){case n.AVIASALES:return a.avsShortHost;case n.WAYAWAY:default:return a.wayawayHost}};var n=r(785843),a=r(582075)},808460:function(e,t,r){var n=r(35220);Object.defineProperty(t,"__esModule",{value:!0}),t.readAuid=function(){var e,t,r;return null!=(e=null!=(r=window.__AUID__)?r:null)?e:null!=(t=a.default.get("auid"))?t:null};var a=n(r(474606))},700536:function(e,t,r){var n=r(35220);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(878835));t.default=function(e){return(0,a.default)(0,e)}},897360:function(e,t,r){var n=r(35220);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(114558)),i=n(r(382697)),o=n(r(700536)),u=n(r(201634)),s={VALID_CONTEXT_ADS_MARKERS:["15468","29086","186703"],CONTEXTUAL_ADS_DOMAINS:["aviasales-tickets.ru","google.com","google.ru","googleads.g.doubleclick.net","googleadservices.co","www.google.com","www.google.ru","www.googleadservices.co","yandex.ru"],init:function(){(0,o.default)(this.initMarkerableLinks.bind(this)),this.setMarkerCookie();var e=this.getMarkerFromGetParams()||this.getMarkerFromReferer();if(this._isBadBoy(e)&&(e=this._markerForBadBoy(e)),e)return this._setMarker(e)},getMarkerFromReferer:function(){var e,t,r=(e=document.referrer,(t=document.createElement("a")).href=e,t.hostname);if(!/aviasales|hotellook|jetradar|localhost|avs\.io/.test(r)){for(var n=r.replace(/\./,"_"),i=0,o=Object.entries({bing:/bing\./,google:/^(www\.)?google\./,mail:/go\.mail\.ru/,rambler:/^(www\.)?(nova\.)?rambler\./,yandex:/^(www\.)?yandex\./});i<o.length;i++){var u=o[i],s=(0,a.default)(u,2),l=s[0];if(s[1].test(r)){n=l;break}}return n}},getMarkerFromGetParams:function(){var e,t,r=/([&?])(?:marker|ref)=([^&]*)/.exec(document.location.search);if(!r)return!1;var n=(0,a.default)(r,3),i=n[0],o=n[1],u=n[2],s=window.location.href.replace(i,o).replace("?&","?").replace(/[?&]$/,"");return null===(e=(t=window.history).replaceState)||void 0===e||e.call(t,null,"null",s),u},setMarkerCookie:function(){var e=i.default.get("marker_value"),t=i.default.fetch("marker_expires",30,parseInt);return this._setMarker(e,t),i.default.expire("marker_value",{path:"/"}),i.default.expire("marker_expires",{path:"/"})},_setMarker:function(e,t){void 0===t&&(t=30);var r=t;if("174432"===e&&(r=60),null!=e){var n=this.marker();if(!this.isAffiliate(n)||this.isAffiliate(e)){var a="www"===window.location.hostname.substr(0,3)?window.location.hostname.substr(3,window.location.hostname.length):void 0;return n!==e&&u.default.triggerEvent("main","marker_was_set","change",{old_marker:n,new_marker:e}),this._marker=e,i.default.set("marker",e,{expires:86400*r,domain:a,path:"/"})}}},initMarkerableLinks:function(){for(var e=this.marker(),t=document.querySelectorAll("a[data-markerable]"),r=0;r<t.length;r+=1){var n=t[r],a=-1===n.href.indexOf("?")?"?":"&";n.href+=a+"marker="+e}},marker:function(){return this._marker||i.default.get("marker")||i.default.get("marker_value")||"direct"},isAffiliate:function(e){return void 0===e&&(e=this.marker()),/^\d{5,}(\.|$)/.test(e)},_isBadBoy:function(e){return e&&this.isAffiliate(e)&&this._fromAdsSite()&&!this._isValidAdsMarker(e)},_fromAdsSite:function(){var e=RegExp("^https?:\\/\\/("+this.CONTEXTUAL_ADS_DOMAINS.join("|").replace(/\./g,"\\.")+")");return/[?&](gclid|yclid)=/.test(document.location.search)||e.test(document.referrer)},_isValidAdsMarker:function(e){return RegExp("^("+this.VALID_CONTEXT_ADS_MARKERS.join("|")+")").test(e)},_markerForBadBoy:function(e){return[this.VALID_CONTEXT_ADS_MARKERS[0],"badboys"+e.replace(/\./g,"_")].join(".")}};t.default=s},141253:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.resolveEventBus=void 0;var r=function(){return window.__SELENE_EVENT_BUS__};t.resolveEventBus=function(){var e=r();if(e)return Promise.resolve(e);var t=0;return new Promise((function(e){var n=setInterval((function(){var a=r();a?(clearInterval(n),e(a)):(t+=1)>30&&clearInterval(n)}),300)}))}},754266:function(e,t,r){var n=r(35220);Object.defineProperty(t,"__esModule",{value:!0}),t.listenSeleneEvent=t.emitSeleneEventFx=t.emitSeleneEvent=t.createEmitterEffect=t.createAddListenerEffect=void 0;var a=n(r(385882)),i=n(r(971410)),o=r(944246),u=r(141253),s=function(){var e=(0,i.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.resolveEventBus)();case 2:e.sent.emit(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.emitSeleneEvent=s;var l=function(){var e=(0,i.default)(a.default.mark((function e(t,r){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.resolveEventBus)();case 2:return n=e.sent,e.abrupt("return",n.listen(t,r));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.listenSeleneEvent=l;var c=(0,o.createEffect)(s,{name:"emitSeleneEventFx",sid:"cthmqt"});t.emitSeleneEventFx=c,t.createAddListenerEffect=function(e,t){return(0,o.createEffect)((function(){l(e,t)}),{sid:"6wtfop"})},t.createEmitterEffect=function(e){return(0,o.createEffect)((function(t){s({type:e,payload:t})}),{sid:"7dv1wv"})}}}]);