"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9025],{48467:function(e,t,i){i.d(t,{a:function(){return F}});var n=i(6158),a=i.n(n),r=i(78083);const o={pixelRatio:3,stretchX:[[140,235]],content:[140,25,235,120]},s={pixelRatio:3,stretchX:[[140,235]],content:[140,50,235,100]},l={pixelRatio:3},u=e=>({id:r.VX.CityBubbles,type:"symbol",source:r.xj.Cities,filter:["any",[">=",["zoom"],3],["get","isVisibleOnSmallZoom"]],layout:{"icon-text-fit":"both","symbol-sort-key":["get","minPrice"],"icon-padding":0,"text-padding":0,"icon-image":["case",["==",["get","isOpen"],null],"light"===e?r.x5.BubbleDefaultLight:r.x5.BubbleDefaultDark,["boolean",["get","isOpen"],!1],"light"===e?r.x5.BubbleOpenLight:r.x5.BubbleOpenDark,"light"===e?r.x5.BubbleClosedLight:r.x5.BubbleClosedDark],"icon-anchor":"bottom-left","text-anchor":"bottom-left","text-field":["format",["get","title"],{"text-font":["literal",["Open Sans Semibold","Noto Sans Semibold"]]},"\n",{},["get","price"],{}],"text-offset":[1.45,-1.45],"text-max-width":25,"text-justify":"left","text-font":["Open Sans Regular","Noto Sans Regular"],"text-size":12,"text-line-height":1.28},paint:{"text-color":"light"===e?"#0c131d":"#ffffff","icon-opacity":["case",["boolean",["feature-state","hover"],!1],1,.8]}});var c=i(96799);const d=e=>{var t;const i=e.filter((e=>Boolean(e.minPrice&&e.currency))),n=i.sort(((e,t)=>e.minPrice-t.minPrice)),a=n.slice(0,100),r=(null===(t=a[a.length-1])||void 0===t?void 0:t.minPrice)||0,o=n.reduce(((e,t)=>{const{minPrice:i,country:n}=t,a=e[n];return!a||i<a?(e[n]=i,e):e}),{});return i.map((e=>{let{coordinates:t,name:i,open:n,minPrice:a,iata:s,country:l,currency:u}=e;return{id:i,type:"Feature",geometry:{type:"Point",coordinates:t},properties:{title:i,price:(0,c.formatPriceWithSign)(a,u,(e=>`${(0,c.formatNumber)(e)}${c.NBSP}`)),isVisibleOnSmallZoom:a<r||a===o[l],minPrice:a,iata:s,isOpen:n}}}))},p=e=>{let{name:t,coordinates:i}=e;return[{id:t,type:"Feature",geometry:{type:"Point",coordinates:[i.lon,i.lat]},properties:{title:t}}]},y=async(e,t,i,n)=>{const a=await(async e=>new Promise(((t,i)=>{const n=new Image;n.crossOrigin="Anonymus",n.src=e,n.onload=()=>t(n),n.onerror=()=>i()})))(t);e.addImage(i,a,n)};var h=i(23279),m=i.n(h),g=i(17563);function v(e){const{center:t}=e;if(t){const e=Array.isArray(t)?t[0].split(","):null==t?void 0:t.split(",");if(2===(null==e?void 0:e.length))return e.map((e=>Number(e)))}}function x(e){const{zoom:t}=e;if(t&&!Number.isNaN(Number(t)))return Number(t)}function f(e,t){const i=e.indexOf(".");return-1===i?e:0===t?e.slice(0,i):e.slice(0,i+1+t)}const b=e=>{e.getCanvas().style.cursor="pointer"},C=e=>{e.getCanvas().style.cursor=""},j=(e,t,i,n)=>{e.setFeatureState({source:t,id:i,sourceLayer:n},{hover:!0})},M=(e,t,i,n)=>{e.setFeatureState({source:t,id:i,sourceLayer:n},{hover:!1})},P=(e,t)=>{j(e,r.xj.Cities,t)},_=(e,t)=>{M(e,r.xj.Cities,t)},I=(e,t)=>{M(e,r.xj.Countries,t,r.xj.Countries)};var k=i.p+"6ec98a40a941812e664d.png",$=i.p+"3a110b173f9adcc801d2.png",w=i.p+"a748544ca8a69a36959f.png",A=i.p+"2d275ad634e85a56715b.png",S=i.p+"1f58278c802350601431.png",L=i.p+"e88d2261c35b3caa6943.png",D=i.p+"93c855171cacbf369a64.png",N=i.p+"0c4031524e4eb7da2871.png",O=i.p+"8a074a695b4475b48658.svg",B=i.p+"41268769d5c69ff3224e.svg";const T=(e,t)=>{e.on("move",m()((()=>(e=>{const t=g.parse(window.location.search),i=g.stringify({...t,zoom:f(String(e.getZoom()),2),center:e.getCenter().toArray().map((e=>f(String(e),3)))},{arrayFormat:"comma"});window.history.replaceState(window.history.state,"",`?${i}`)})(e)),300)),((e,t,i)=>{let n=null;e.on("mousemove",r.VX.AllCountryPolygons,(i=>{var a;if(!i.alreadyHandled&&null!=i&&null!==(a=i.features)&&void 0!==a&&a.length){var o;const a=null===(o=i.features[0].properties)||void 0===o?void 0:o.ISO_A2;null==t||t(a),null!==n&&I(e,n),n=Number(i.features[0].id),((e,t)=>{j(e,r.xj.Countries,t,r.xj.Countries)})(e,n)}})),e.on("mouseleave",r.VX.AllCountryPolygons,(i=>{null==t||t(null),null!==n&&I(e,n),n=null}));let a=null;e.on("mousemove",r.VX.CityBubbles,(t=>{var r;if(b(e),null!=t&&null!==(r=t.features)&&void 0!==r&&r.length){var o;const r=null===(o=t.features[0].properties)||void 0===o?void 0:o.iata;null==i||i(r),null!==a&&_(e,a),null!==n&&I(e,n),t.alreadyHandled=!0,a=Number(t.features[0].id),P(e,a)}})),e.on("mousemove",r.VX.HoveredCity,(t=>{var r;if(b(e),null!=t&&null!==(r=t.features)&&void 0!==r&&r.length){var o;const r=null===(o=t.features[0].properties)||void 0===o?void 0:o.iata;null==i||i(r),null!==a&&_(e,a),null!==n&&I(e,n),t.alreadyHandled=!0,a=Number(t.features[0].id),P(e,a)}})),e.on("mouseleave",r.VX.CityBubbles,(t=>{C(e),null==i||i(null),null!==a&&_(e,a),a=null})),e.on("mouseleave",r.VX.HoveredCity,(t=>{C(e),null==i||i(null),null!==a&&_(e,a),a=null}))})(e,t.countryHovered,t.cityHovered),(e=>{let t;e.on("mousemove",r.VX.CityPoints,(i=>{var n,a,o;b(e);const s=null===(n=i.features)||void 0===n||null===(a=n[0].properties)||void 0===a?void 0:a.iata;s&&(i.alreadyHandled||((e,t)=>{e.setFilter(r.VX.HoveredCity,["any",["==","iata",t]])})(e,s)),t&&_(e,t),t=null===(o=i.features)||void 0===o?void 0:o[0].id,t&&P(e,t)})),e.on("mouseleave",r.VX.CityPoints,(i=>{C(e),t&&_(e,t)}))})(e),((e,t)=>{e.on("click",r.VX.CityBubbles,(e=>{var i,n,a;const r=null===(i=e.features)||void 0===i||null===(n=i[0])||void 0===n||null===(a=n.properties)||void 0===a?void 0:a.iata;r&&(null==t||t(r),e.alreadyHandled=!0)})),e.on("click",r.VX.HoveredCity,(e=>{var i,n,a;const r=null===(i=e.features)||void 0===i||null===(n=i[0])||void 0===n||null===(a=n.properties)||void 0===a?void 0:a.iata;r&&(null==t||t(r),e.alreadyHandled=!0)}))})(e,t.cityClicked),((e,t)=>{e.on("click",r.VX.CountryLabels,(e=>{var i,n,a;const r=(null===(i=e.features)||void 0===i||null===(n=i[0])||void 0===n||null===(a=n.properties)||void 0===a?void 0:a.iata)||null;null==t||t(r)})),e.on("click",r.VX.AllCountryPolygons,(e=>{var i,n,a;if(e.alreadyHandled)return;const r=(null===(i=e.features)||void 0===i||null===(n=i[0])||void 0===n||null===(a=n.properties)||void 0===a?void 0:a.ISO_A2)||null;null==t||t(r)}))})(e,t.countryClicked),(e=>{e.on("mouseenter",r.VX.CountryLabels,(t=>{b(e)})),e.on("mouseleave",r.VX.CountryLabels,(t=>{C(e)}))})(e)},F=new class{constructor(){this.instance=null,this.isMapReady=!1,this.isMobile=null,this.eventListeners=null,this.areImagesLoaded=!1,this.onImagesLoad=[]}init(e,t,i){var n;this.isMobile=t,this.eventListeners=i,this.instance=((e,t)=>{const i=(()=>{const e=g.parse(window.location.search);return{center:v(e),zoom:x(e)}})(),n=(0,r.gw)(t);return new(a().Map)({container:e.current||"",...n,zoom:i.zoom||n.zoom,center:i.center||n.center})})(e,t),(n=this.instance).addControl(new(a().NavigationControl)({showCompass:!1})),n.touchZoomRotate.disableRotation(),n.dragRotate.disable(),this.handleMapUnmount(),this.callWhenReady((async e=>{this.eventListeners&&T(e,this.eventListeners),this.addImages(e)}))}async addImages(e){await(async e=>{await Promise.all([y(e,k,r.x5.BubbleOpenLight,o),y(e,S,r.x5.BubbleOpenDark,o),y(e,$,r.x5.BubbleClosedLight,o),y(e,L,r.x5.BubbleClosedDark,o),y(e,D,r.x5.BubbleDefaultLight,o),y(e,N,r.x5.BubbleDefaultDark,o),y(e,w,r.x5.OriginLight,s),y(e,A,r.x5.OriginDark,s),y(e,O,r.x5.MarkerLight,l),y(e,B,r.x5.MarkerDark,l)])})(e),this.handleImagesLoad()}handleMapUnmount(){var e;null===(e=this.instance)||void 0===e||e.on("remove",(()=>{this.reset()}))}handleImagesLoad(){for(const e of this.onImagesLoad)e();this.areImagesLoaded=!0,this.onImagesLoad=[]}reset(){this.isMapReady=!1,this.areImagesLoaded=!1,this.onImagesLoad=[],this.eventListeners=null}callWhenReady(e){this.instance&&(this.isMapReady?e(this.instance):this.instance.once("idle",(()=>{this.isMapReady=!0,this.instance&&e(this.instance)})))}callWhenImagesAreLoaded(e){this.instance&&(this.areImagesLoaded?e():this.onImagesLoad.push(e))}getInstance(){return this.instance}addMarkers(e,t){return new Promise((i=>{this.callWhenReady((n=>{this.callWhenImagesAreLoaded((()=>{((e,t,i)=>{const n=e.getSource(r.xj.Cities);n?((e,t)=>{e.setData({type:"FeatureCollection",features:d(t)})})(n,t):(e.addSource(r.xj.Cities,(e=>({type:"geojson",generateId:!0,data:{type:"FeatureCollection",features:d(e)}}))(t)),e.getLayer(r.VX.Origin)?e.addLayer(u(i),r.VX.Origin):e.addLayer(u(i)),e.addLayer((e=>({id:r.VX.CityPoints,type:"symbol",source:r.xj.Cities,minzoom:4,layout:{"icon-image":"light"===e?r.x5.MarkerLight:r.x5.MarkerDark,"icon-padding":8,"icon-ignore-placement":!0,"icon-allow-overlap":!0},paint:{"icon-opacity":.6}}))(i),r.VX.CityBubbles),e.addLayer((e=>({id:r.VX.HoveredCity,type:"symbol",source:r.xj.Cities,filter:["boolean",!1],layout:{"icon-text-fit":"both","icon-allow-overlap":!0,"icon-ignore-placement":!0,"text-allow-overlap":!0,"text-ignore-placement":!0,"symbol-sort-key":["get","minPrice"],"icon-padding":0,"text-padding":0,"icon-image":["case",["==",["get","isOpen"],null],"light"===e?r.x5.BubbleDefaultLight:r.x5.BubbleDefaultDark,["boolean",["get","isOpen"],!1],"light"===e?r.x5.BubbleOpenLight:r.x5.BubbleOpenDark,"light"===e?r.x5.BubbleClosedLight:r.x5.BubbleClosedDark],"icon-anchor":"bottom-left","text-anchor":"bottom-left","text-field":["format",["get","title"],{"text-font":["literal",["Open Sans Semibold","Noto Sans Semibold"]]},"\n",{},["get","price"],{}],"text-offset":[1.45,-1.45],"text-max-width":25,"text-justify":"left","text-font":["Open Sans Regular","Noto Sans Regular"],"text-size":12,"text-line-height":1.28},paint:{"text-color":"light"===e?"#0c131d":"#ffffff","icon-opacity":["case",["boolean",["feature-state","hover"],!1],1,.8]}}))(i)))})(n,e,t),i()}))}))}))}addOriginPopup(e,t){return new Promise((i=>{this.callWhenReady((n=>{this.callWhenImagesAreLoaded((()=>{((e,t,i)=>{if(!t||!t.coordinates)return;const{coordinates:n,name:a}=t,o=e.getSource(r.xj.Origin);o?((e,t)=>{e.setData({type:"FeatureCollection",features:p(t)})})(o,{coordinates:n,name:a}):(e.addSource(r.xj.Origin,(e=>({type:"geojson",generateId:!0,data:{type:"FeatureCollection",features:p(e)}}))({coordinates:n,name:a})),e.addLayer((e=>({id:r.VX.Origin,type:"symbol",source:r.xj.Origin,layout:{"icon-text-fit":"both","icon-image":"light"===e?r.x5.OriginLight:r.x5.OriginDark,"icon-allow-overlap":!0,"text-allow-overlap":!0,"text-field":["get","title"],"text-font":["Open Sans Semibold","Noto Sans Semibold"],"text-size":13,"text-anchor":"bottom-left","text-offset":[1.8,-1.8],"text-max-width":20},paint:{"text-color":"light"===e?"#0c131d":"#ffffff"}}))(i)))})(n,e,t),i()}))}))}))}selectCountry(e){this.callWhenReady((t=>{const i={animate:!this.isMobile};e?t.fitBounds(new n.LngLatBounds(e.coordinates.southWest,e.coordinates.northEast),i):t.flyTo({zoom:Math.min(t.getZoom()-2,3),animate:i.animate})}))}updateStyle(e){var t,i;this.isMapReady=!1,null===(t=this.instance)||void 0===t||t.setStyle(e),null===(i=this.instance)||void 0===i||i.once("idle",(()=>{this.isMapReady=!0}))}hoverCountry(e){this.callWhenReady((t=>{var i,n;const a=null===(i=t.querySourceFeatures(r.xj.Countries,{sourceLayer:r.xj.Countries,filter:["any",["==","ISO_A2",e]]}))||void 0===i||null===(n=i[0])||void 0===n?void 0:n.id;a&&t.setFeatureState({source:r.xj.Countries,sourceLayer:r.xj.Countries,id:a},{hover:!0})}))}unhoverCountry(e){this.callWhenReady((t=>{var i,n;const a=null===(i=t.querySourceFeatures(r.xj.Countries,{sourceLayer:r.xj.Countries,filter:["any",["==","ISO_A2",e]]}))||void 0===i||null===(n=i[0])||void 0===n?void 0:n.id;a&&t.setFeatureState({source:r.xj.Countries,sourceLayer:r.xj.Countries,id:a},{hover:!1})}))}hoverCity(e){this.callWhenReady((t=>{var i,n;const a=null===(i=t.querySourceFeatures(r.xj.Cities,{sourceLayer:r.xj.Cities,filter:["any",["==","iata",e]]}))||void 0===i||null===(n=i[0])||void 0===n?void 0:n.id;a&&t.setFeatureState({source:r.xj.Cities,id:a},{hover:!0})}))}unhoverCity(e){this.callWhenReady((t=>{var i,n;const a=null===(i=t.querySourceFeatures(r.xj.Cities,{sourceLayer:r.xj.Cities,filter:["any",["==","iata",e]]}))||void 0===i||null===(n=i[0])||void 0===n?void 0:n.id;a&&t.setFeatureState({source:r.xj.Cities,id:a},{hover:!1})}))}}},45443:function(e,t,i){i.r(t),i.d(t,{priceMapPublicApi:function(){return xi}});var n=i(34943),a=i(99741),r=i(96799),o=i(17563),s=i(85839),l=i(78083);const u="KX",c=(e,t,i,n,a)=>{const r=e.filter((e=>((e,t)=>{const{destination_city:i}=e;return((e,t)=>{var i;return Boolean(null===(i=e.translations[t])||void 0===i?void 0:i.su)})(i,t)&&((e,t)=>{var i,n;return Boolean(null===(i=e.country)||void 0===i||null===(n=i.translations[t])||void 0===n?void 0:n.su)})(i,t)&&(n=i,Boolean((null===(a=n.coordinates)||void 0===a?void 0:a.lat)&&(null===(r=n.coordinates)||void 0===r?void 0:r.lon)))&&(e=>{var t;return Boolean(null===(t=e.country)||void 0===t?void 0:t.iata)})(i);var n,a,r})(e,a)));return function(e,t){if("ru"===t){const t=e.find((e=>"RU"===e.destination_city.country.iata));return t?e.map((e=>e.destination_city.country.iata===u?{...e,country:t.destination_city.country}:e)):e.filter((e=>e.destination_city.country.iata!==u))}return"ua"===t?e.filter((e=>e.destination_city.country.iata!==u)):e}(r,n).map((e=>{var n,r;const{destination_city:o,price:s,travel_restrictions:l}=e,{country:u,iata:c,translations:d,coordinates:p}=o,y=(null==l||null===(n=l.country_travel_restrictions)||void 0===n?void 0:n.open)??null,h=(null==l||null===(r=l.city_travel_restrictions)||void 0===r?void 0:r.open)??y;return{name:d[a].su,coordinates:[p.lon,p.lat],weight:0,countryName:u.translations[a].su,country:u.iata,countryOpen:y,open:h,minPrice:null!=s&&s.value?s.value*i:null,currency:t,iata:c}})).sort(y)},d=(e,t,i,n,a,r)=>((e,t)=>{const i={};e.forEach((e=>{const{country:n,countryName:a,weight:r,minPrice:o,countryOpen:s}=e;if(!t[n])return;const{center_lat:l,center_lon:u,min_lat:c,min_lon:d,max_lat:p,max_lon:y}=t[n];if(!i[n])return void(i[n]={iata:n,name:a,weight:r,open:s,minPrice:o??null,coordinates:{center:[u,l],northEast:[y,p],southWest:[d,c]},cities:[e]});const h=i[n];h.cities.push(e),h.weight<r&&(h.weight=r),(!h.minPrice||o&&o<h.minPrice)&&(h.minPrice=o)}));for(const[e,n]of Object.entries(t))if(!i[e]){const{center_lat:t,center_lon:a,min_lat:r,min_lon:o,max_lat:s,max_lon:l}=n,u={name:"",iata:e,open:!1,weight:0,minPrice:null,coordinates:{center:[a,t],northEast:[l,s],southWest:[o,r]},cities:[]};i[e]=u}return Object.values(i)})(c(t,i,n,a,r),e);function p(e,t){return Number(t.open)-Number(e.open)}function y(e,t){return e.minPrice||t.minPrice?e.minPrice?t.minPrice?e.minPrice-t.minPrice:-1:1:0}function h(e,t){if(Array.isArray(e)){const i=e.map((e=>(0,r.getDateISO)(e))),n=null==t?void 0:t.min,o=null==t?void 0:t.max;return{period:a.gO.FLEXIBLE,departMonths:i,minTripDuration:n,maxTripDuration:o,oneWay:!t}}const i=Boolean(e&&t);return{period:e&&a.gO.EXACT||void 0,departDate:e&&(0,r.getDateISO)(e)||void 0,oneWay:!i,returnDate:t&&(0,r.getDateISO)(t)||void 0}}function m(e,t){return e?Array.isArray(e)?{depart_months:e.map((e=>(0,r.getDateISO)(e))),min_trip_duration:null==t?void 0:t.min,max_trip_duration:null==t?void 0:t.max}:{depart_dates:[(0,r.getDateISO)(e)],return_dates:t&&[(0,r.getDateISO)(t)]}:null}const g=e=>e&&!Array.isArray(e)&&"object"==typeof e,v=(0,n.yM)({sid:"-7qggeb"}),x=(0,n.yM)({sid:"invck5"}),f=(0,n.yM)({sid:"-hrthcp"}),b=(0,n.yM)({sid:"e8ldd0"}),C=(0,n.yM)({sid:"-yxfuxa"}),j=(0,n.yM)({sid:"vwuxst"}),M=(0,n.yM)({sid:"-8f7wtn"}),P=(0,n.yM)({sid:"k1nr5r"}),_=(0,n.yM)({sid:"-nbha0s"}),I=(0,n.yM)({sid:"-cu7sd9"}),k=(0,n.yM)({sid:"wfb8qv"}),$=(0,n.yM)({sid:"81vpdc"}),w=(0,n.yM)({sid:"g4krk0"}),A=(0,n.yM)({sid:"-stojd7"}),S=(0,n.yM)({sid:"-yldu8l"}),L=(0,n.yM)({sid:"g8q3wx"}),D=(0,n.yM)({sid:"-9ij352"}),N=(0,n.yM)({sid:"-l9klpd"}),O=(0,n.yM)({sid:"54np53"}),B={inputs:{selectedCityIata:$,selectedCountryIata:P,mobileViewChanged:M,selectCountriesSortingMethod:L,selectedHoveredCountryIata:I,unselectedHoveredCountryIata:k,unselectedHoveredCityIata:S,selectedHoveredCityIata:A,mapUpdateRequested:x,priceMapInitialized:v,selectOrigin:(0,n.yM)({sid:"jbyd3c"})},outputs:{},internals:{mapUpdateFinished:f,mapDataUpdateRequested:b,mapDataUpdateFulfilled:C,mapDataUpdateRejected:j,selectedCountry:_,selectedCity:w,highlightMap:D,highlightMapFinished:N,noOpennessInfoAvailable:O}},{selectCountriesSortingMethod:T,selectedCityIata:F,selectedCountryIata:H}=B.inputs,{mapDataUpdateFulfilled:U,noOpennessInfoAvailable:R,selectedCountry:W,selectedCity:E}=B.internals,q=(0,n.MT)([],{sid:"7obxkk"}).on(U,((e,t)=>{let{countries:i}=t;return i})),V=q.map((e=>e.flatMap((e=>e.cities)).some((e=>null!=e.open))));(0,n.UP)({and:[{clock:V,filter:e=>!e,target:R}],or:{sid:"-op7w8y"}});const z=(0,n.MT)(a.WJ.Openness,{sid:"-xjr7k4"}).on(T,((e,t)=>t)).on(R,(()=>a.WJ.Price)),X=(0,n.$e)({and:[q,z,(e,t)=>[...e].sort((e=>e===a.WJ.Price?y:p)(t))],or:{sid:"9ikm6z"}}),Y=X.map((e=>e.filter((e=>Boolean(e.name&&e.iata)))));(0,n.UP)({and:[{clock:H,source:q,fn:(e,t)=>{let{iata:i}=t;return e.find((e=>e.iata===i))||null},target:W}],or:{sid:"-nph9oh"}}),(0,n.UP)({and:[{clock:F,source:q,filter:(e,t)=>{let{source:i}=t;return i===a.Hd.PriceMapMap},fn:(e,t)=>{let{iata:i}=t;return e.flatMap((e=>e.cities)).find((e=>e.iata===i))||null},target:E}],or:{sid:"-n9j8h0"}});const G={inputs:{},outputs:{$countries:q,$isOpennessInfoAvailable:V,noOpennessInfoAvailable:R,$countriesSortingMethod:z,$sortedCountries:X,$visibleCountries:Y}};var Q=i(1445),J=i(85045),Z=i(53088),K=i(74526),ee=i(53788),te=i(49767),ie=i(79403),ne=i(88057),ae=i(89717),re=i(23570),oe=i(82525),se=i(71694);const le=e=>({url:oe.B.outputs.fillApiHost_IN_DANGEROUS_CLIENT_SIDE_ONLY_WAY(se.Nv`${re.l.outputs.ARIADNE_API_URL}`),name:"cities_widgets",dataTransformer:t=>function(e,t){const i=e.country_best_directions_v2;return null!=i&&i.directions?function(e,t){var i,n,a;const{country:r,directions:o}=e,s=null===(i=r.translations[t])||void 0===i?void 0:i.su,l=(null===(n=o[0])||void 0===n||null===(a=n.travel_restrictions.country_travel_restrictions)||void 0===a?void 0:a.open)??null,u=o.map((e=>{var i,n;const{destination:a,price:o,travel_restrictions:u}=e,{iata:c,translations:d}=a;return{iata:c,name:null===(i=d[t])||void 0===i?void 0:i.su,country:r.iata,coordinates:[0,0],countryName:s,countryOpen:l,currency:(null==o?void 0:o.currency)??null,minPrice:(null==o?void 0:o.value)??null,open:(null===(n=u.city_travel_restrictions)||void 0===n?void 0:n.open)??l,weight:0}}));return u.sort(y),{name:s,iata:r.iata,open:l,weight:0,minPrice:null,coordinates:{center:[0,0],southWest:[0,0],northEast:[0,0]},cities:u}}(i,t):null}(t,e)}),ue=(0,n.GW)((async e=>{const{currency:t,userCitizenship:i,market:n,language:a,originIata:r,destinationIata:o,departDate:s,returnDate:l,tripClass:u,filters:c,brand:d}=e,p=(e=>{let{language:t,brand:i,...n}=e;return`{\n    country_best_directions_v2(\n      input: { ${(e=>{const t=e=>Object.entries(e).filter((e=>{let[t,i]=e;return null!=i})).map((e=>{let[i,n]=e;return g(n)?`${i}: {${t(n)}}`:"period"===i||"trip_class"===i?`${i}: ${n}`:`${i}: ${JSON.stringify(n)}`})).join(",");return t({...e})})(n)} }\n      brand: ${i}\n      ) {\n      country {\n        iata\n        translations(filters: { locales: ["${t}"] })\n      }\n      directions {\n        destination {\n          iata\n          translations(filters: { locales: ["${t}"] })\n        }\n        price {\n          value\n          currency\n        }\n        travel_restrictions {\n          country_travel_restrictions {\n            open\n          }\n          city_travel_restrictions {\n            open\n          }  \n        }\n      }\n    }\n  }`})({destination_country_iata:o,origin_city_iata:r,one_way:!s||!l,paging:{offset:0,limit:100},passport_country:i,trip_class:u,currency:t,market:n,language:a,filters:c,brand:d,dates:m(s??void 0,l??void 0)});try{return await ae.N.createRequest()({query:p,config:le(a)})}catch(e){return null}}),{sid:"yjhayb"});var ce=i(73114);const{noOpennessInfoAvailable:de}=B.internals,{$enabled:pe,toggle:ye}=(0,n.MR)({sid:"-em7gq6",fn:()=>(0,ce.qs)()}),{$enabled:he,toggle:me}=(0,n.MR)({sid:"-ib2g3j",fn:()=>(0,ce.qs)()});he.on(pe,((e,t)=>!!t&&e)),pe.on(he,((e,t)=>!!t||e)),(0,n.UP)({and:[{clock:de,source:pe,filter:e=>e,fn:()=>!1,target:pe}],or:{sid:"-1h5y6m"}}),(0,n.UP)({and:[{clock:de,source:he,filter:e=>e,fn:()=>!1,target:he}],or:{sid:"-117wz5"}});const ge={$value:pe,touched:ye},ve={$value:he,touched:me},{$enabled:xe,toggle:fe}=(0,n.MR)({sid:"-a8c6wv",fn:()=>(0,ce.qs)()}),be={open:ge,noQuarantine:ve,direct:{$value:xe,touched:fe}},{selectedCountryIata:Ce,selectedCityIata:je}=B.inputs,{mapDataUpdateRequested:Me,selectedCountry:Pe,selectedCity:_e}=B.internals,{$departDate:Ie,$returnDate:ke}=ne.J.outputs.exact,{$months:$e,$duration:we}=ne.J.outputs.months,Ae=(0,n.GW)(ue,{sid:"84l653"}),Se=(0,n.MT)(null,{sid:"9a82pq"}).on(Pe,((e,t)=>t)).on(Ae.doneData,((e,t)=>t)).reset(Me),Le=(0,n.MT)([],{sid:"-5uv6su"}).on(Ae.doneData,((e,t)=>(null==t?void 0:t.cities)||[])).reset(Ce),De=Ae.pending,Ne=(0,n.$e)({and:[{currency:Z.y.outputs.$currency,userCitizenship:K.W.outputs.$userCitizenship,market:ee.D.outputs.$market,language:te.l.outputs.$language,origin:Q.q.outputs.$origin,departDate:(0,n.$e)({and:[Ie,$e,(e,t)=>e||(t.length>0?t:null)],or:{sid:"qyqz40"}}),returnDate:(0,n.$e)({and:[ke,we,(e,t)=>e??t],or:{sid:"xm7kiq"}}),tripClass:J._.outputs.$tripClass,direct:be.direct.$value,brand:ie.U.outputs.$brand},e=>{let{currency:t,userCitizenship:i,market:n,language:a,origin:o,departDate:s,returnDate:l,tripClass:u,direct:c,brand:d}=e;return{currency:t,userCitizenship:i,market:n,language:a,filters:{direct:c},originIata:(null==o?void 0:o.cityIata)||(null==o?void 0:o.iata)||"",departDate:s,returnDate:l,tripClass:u||r.TripClass.Economy,brand:d}}],or:{sid:"jlnut3"}});(0,n.UP)({and:[{clock:Ce,source:Ne,filter:(e,t)=>{let{iata:i}=t;return Boolean(i)},fn:(e,t)=>({...e,destinationIata:t.iata||""}),target:Ae}],or:{sid:"dffphg"}}),(0,n.UP)({and:[{clock:je,source:Le,filter:(e,t)=>{let{source:i}=t;return i===a.Hd.PriceMapList},fn:(e,t)=>{let{iata:i}=t;return e.find((e=>e.iata===i))||null},target:_e}],or:{sid:"dx14h0"}});const Oe={inputs:{},outputs:{$currentCountry:Se,$currentCountryCities:Le,$currentCountryCitiesLoading:De}};var Be=i(88293),Te=i(31175),Fe=i(23927),He=i(66048),Ue=i(9669),Re=i.n(Ue);const We=(0,n.GW)((async e=>{let{formValues:t,filters:i,currency:n,theme:a,market:r,citizenship:o,language:s,locale:l,seatCount:u,tripClass:c,brand:p}=e;const{origin:y}=t;if(!y)throw new Error("no origin");const[h,m,g]=await Promise.all([Re().get(oe.B.outputs.fillApiHost_IN_DANGEROUS_CLIENT_SIDE_ONLY_WAY(se.Nv`${re.l.outputs.EXPLORE_AGGREGATED_URL}/country/country_bounds.json`)),Ee(t,i,n,s,r,o,c,p),Ve(t,a,l,o)]);return{countries:d(h.data,m,n,u,r,s),mapStyle:g}}),{sid:"prx8g7"});async function Ee(e,t,i,n,a,r,o,s){const{origin:l,departDate:u,returnDate:c}=e,d=h(u,c),p=function(e){const{language:t,brand:i,...n}=e;return`{\n    map_v2(\n      input: { ${(e=>{const t=e=>Object.entries(e).filter((e=>{let[t,i]=e;return null!=i})).map((e=>{let[i,n]=e;return g(n)?`${i}: {${t(n)}}`:"period"===i||"trip_class"===i?`${i}: ${n}`:`${i}: ${JSON.stringify(n)}`})).join(",");return t({...e})})(n)} }\n      brand: ${i}\n    ) {\n    origin_city {\n      iata\n      translations(filters: {locales: ["${t}"]})\n    }\n    prices {\n      price {\n        value\n      } \n      destination_city {\n        iata\n        translations(filters: {locales: ["${t}"]})\n        country {\n          iata\n          translations(filters: {locales: ["${t}"]})\n        }\n        coordinates {\n          lat\n          lon\n        }\n      }\n      travel_restrictions {\n        city_travel_restrictions {\n          open\n        }\n        country_travel_restrictions {\n          open\n        }\n      }\n    }\n    }\n  }`}({language:n,passport_country_iata:r.toUpperCase(),currency:i,origin_city_iata:(null==l?void 0:l.cityIata)||(null==l?void 0:l.iata),trip_class:o,market:a,min_trip_duration:d.minTripDuration,max_trip_duration:d.maxTripDuration,depart_months:d.departMonths,depart_date:d.departDate,one_way:!u||!c,brand:s,filters:{direct:t.direct,open:t.open,no_quarantine:t.noQuarantine}});try{return await ae.N.createRequest()({query:p,config:{url:oe.B.outputs.fillApiHost_IN_DANGEROUS_CLIENT_SIDE_ONLY_WAY(se.Nv`${re.l.outputs.ARIADNE_API_URL}`),name:"fetch_price_map",dataTransformer:qe}})}catch(e){return[]}}function qe(e){const t=e.map_v2;return t?t.prices:[]}async function Ve(e,t,i,n){const{data:a}=await Re().get(((e,t,i,n)=>{const{origin:a}=e,r={origin:(null==a?void 0:a.cityIata)||(null==a?void 0:a.iata),theme:t,locale:i,passport_country:n.toUpperCase()};if(e.departDate){const{departDate:t,returnDate:i,departMonths:n,period:a,maxTripDuration:o,minTripDuration:s}=h(e.departDate,e.returnDate);r.depart_date=t,r.return_date=i,r.period=null==a?void 0:a.toLowerCase(),r.depart_months=n,r.min_trip_duration=s,r.max_trip_duration=o}return(0,o.stringifyUrl)({url:(0,l.OT)(),query:r},{skipNull:!0,arrayFormat:"bracket"})})(e,t,i,n));return a}const{mapDataUpdateFulfilled:ze,mapDataUpdateRejected:Xe,mapDataUpdateRequested:Ye}=B.internals,{$departDate:Ge,$returnDate:Qe}=ne.J.outputs.exact,{$months:Je,$duration:Ze}=ne.J.outputs.months,Ke=(0,n.GW)(We,{sid:"-wve59u"});(0,n.UP)({and:[{clock:Ye,source:{origin:Q.q.outputs.$origin,destination:Q.q.outputs.$destination,departDate:(0,n.$e)({and:[Ge,Je,(e,t)=>e||(t.length>0?t:null)],or:{sid:"d9woa4"}}),returnDate:(0,n.$e)({and:[Qe,Ze,(e,t)=>e??t],or:{sid:"lvhcuu"}}),seatCount:He.l.outputs.$seatCount,open:be.open.$value,noQuarantine:be.noQuarantine.$value,direct:be.direct.$value,currency:Z.y.outputs.$currency,theme:Te.H.outputs.$theme,market:ee.D.outputs.$market,citizenship:K.W.outputs.$userCitizenship,language:te.l.outputs.$language,locale:Fe.z.outputs.$localeDeprecated,tripClass:J._.outputs.$tripClass,brand:ie.U.outputs.$brand},fn:e=>{let{origin:t,destination:i,departDate:n,returnDate:a,seatCount:r,open:o,noQuarantine:s,direct:l,currency:u,theme:c,market:d,citizenship:p,language:y,locale:h,tripClass:m,brand:g}=e;return{formValues:{origin:t,destination:i,departDate:n,returnDate:a},filters:{open:o||null,noQuarantine:s||null,direct:l},currency:u,theme:c||Be.B.Light,market:d,citizenship:p,language:y,locale:h,seatCount:r,tripClass:m,brand:g}},target:Ke}],or:{sid:"jfwksy"}}),(0,n.UP)({and:[{clock:Ke.doneData,target:ze}],or:{sid:"4p9k80"}}),(0,n.UP)({and:[{clock:Ke.failData,target:Xe}],or:{sid:"4s0j6t"}});const et={inputs:{},internals:{updateCountriesFx:Ke},outputs:{$isLoading:Ke.pending}};var tt=i(48467);const{selectedHoveredCityIata:it,selectedHoveredCountryIata:nt,unselectedHoveredCityIata:at,unselectedHoveredCountryIata:rt,mapUpdateRequested:ot}=B.inputs,{mapDataUpdateFulfilled:st,mapUpdateFinished:lt,selectedCountry:ut}=B.internals,{$countries:ct}=G.outputs,dt=(0,n.GW)((e=>{tt.a.selectCountry(e)}),{sid:"3brutu"}),pt=(0,n.MT)(null,{sid:"-wttnrq"}).on(st,((e,t)=>{let{mapStyle:i}=t;return i})),yt=(0,n.UP)({and:[{clock:nt,source:ct,fn:(e,t)=>e.find((e=>e.iata===t))||null}],or:{sid:"tjqfi4"}}),ht=(0,n.UP)({and:[{clock:it,source:ct,fn:(e,t)=>e.flatMap((e=>e.cities)).find((e=>e.iata===t))||null}],or:{sid:"uuw1hf"}}),mt=(0,n.MT)(null,{sid:"-6ztree"}).on(yt,((e,t)=>t)).on(rt,(()=>null)),gt=(0,n.MT)(null,{sid:"fnoo8h"}).on(ht,((e,t)=>t)).on(at,(()=>null)),vt=(0,n.GW)((e=>{tt.a.hoverCountry(e)}),{sid:"3x2z2r"}),xt=(0,n.GW)((e=>{tt.a.unhoverCountry(e)}),{sid:"42haws"}),ft=(0,n.GW)((e=>{tt.a.hoverCity(e)}),{sid:"ouofra"}),bt=(0,n.GW)((e=>{tt.a.unhoverCity(e)}),{sid:"i8a2v"}),Ct=(0,n.GW)((async e=>{let{cities:t,origin:i,theme:n,mapStyle:a}=e;tt.a.updateStyle(a),await Promise.all([tt.a.addOriginPopup(i,n),tt.a.addMarkers(t,n)])}),{sid:"hsxoz5"});(0,n.UP)({and:[{clock:Ct.done,target:lt}],or:{sid:"-opjkj0"}}),(0,n.UP)({and:[{clock:ut,target:dt}],or:{sid:"-omslk7"}}),(0,n.UP)({and:[{clock:nt,target:vt}],or:{sid:"-wcrahw"}}),(0,n.UP)({and:[{source:it,filter:e=>Boolean(e),target:ft}],or:{sid:"-wa0bj3"}}),(0,n.UP)({and:[{clock:rt,target:xt}],or:{sid:"-vv5vic"}}),(0,n.UP)({and:[{clock:at,target:bt}],or:{sid:"-vsewjj"}}),(0,n.UP)({and:[{clock:[st,ot],source:{countries:ct,mapStyle:pt,origin:Q.q.outputs.$origin,theme:Te.H.outputs.$theme},filter:e=>{const{mapStyle:t,origin:i,theme:n}=e;return Boolean(i&&n&&t)},fn:e=>{let{countries:t,mapStyle:i,origin:n,theme:a}=e;return{cities:t.flatMap((e=>e.cities)),origin:n,theme:a,mapStyle:i}},target:Ct}],or:{sid:"-ve4945"}});const jt={$hoveredCountry:mt,$hoveredCity:gt};var Mt=i(72675),Pt=i(59399),_t=i(64441),It=i(63246),kt=i(49250),$t=i(17514),wt=i(97331),At=i(78031);const{mobileViewChanged:St,selectedCountryIata:Lt,priceMapInitialized:Dt}=B.inputs,{highlightMap:Nt,highlightMapFinished:Ot,mapDataUpdateFulfilled:Bt,mapDataUpdateRejected:Tt,mapDataUpdateRequested:Ft,mapUpdateFinished:Ht}=B.internals,{$isLoading:Ut}=et.outputs,Rt=(0,n.Fj)({sid:"-hiwvwx"}),Wt=(0,n.$e)({and:[Q.q.outputs.$origin,Q.q.outputs.$destination,(0,Mt.x)($t.B.outputs.$isAviaFormActive,wt.N.outputs.$isSimpleSearch),(e,t,i)=>i&&((e,t)=>!!(null!=e&&e.iata&&null!=e&&e.cityIata&&t)&&(0,s.rP)(t))(e,t)],or:{sid:"qqdibw"}});(0,n.UP)({and:[{clock:[kt.Vx.$aviaForm,Wt,be.open.$value,be.noQuarantine.$value,be.direct.$value,Z.y.outputs.$currency,Te.H.outputs.$theme,K.W.outputs.$userCitizenship],source:[It.y.outputs.$isClient,Wt,_t.i.outputs.priceMapFlag.$value],filter:e=>{let[t,i,n]=e;return t&&i&&n},target:Ft}],or:{sid:"21p0nv"}}),(0,n.UP)({and:[{clock:Wt,filter:e=>!e,target:At.G.inputs.hideMap}],or:{sid:"30c21m"}});const Et=Rt.createStore(null,{sid:"gapmu2"}).on(Lt,((e,t)=>{let{source:i}=t;return i})),qt=Rt.createStore(a.F8.Map,{sid:"5asbvs"}).on(St,((e,t)=>t)),Vt=Rt.createStore(a.Px.initial,{sid:"-qrah1q"}).on(Ft,(()=>a.Px.loading)).on(Ht,(()=>a.Px.success)).on(Tt,(()=>a.Px.failed)).on(Nt,(()=>a.Px.loading)).on(Ot,(()=>a.Px.success)),zt=Rt.createStore(!0,{sid:"k2wgxy"}).on(Bt,(()=>!1)),Xt=Rt.createEffect((()=>{St(a.F8.Map)}),{sid:"-9mgcpb"});(0,n.UP)({and:[{clock:Dt,target:_t.i.inputs.requestPriceMapFlags}],or:{sid:"3wx1zs"}}),(0,n.UP)({and:[{clock:Lt,source:Et,filter:(e,t)=>{let{iata:i}=t;return!i&&e===a.KE.Map},target:Xt}],or:{sid:"3zo0yl"}}),(0,n.UP)({and:[{clock:(0,Pt.g)({source:Nt,timeout:600}),source:Ut,filter:e=>!e,target:Ot}],or:{sid:"4fm262"}});const Yt={outputs:{$isFeatureEnabled:_t.i.outputs.priceMapFlag.$value,$isMapVisible:Wt,$status:Vt,$isInitialLoading:zt,$mobileView:qt,$selectedCountrySource:Et,priceMapFilters:be},inputs:{},internals:{}};var Gt=i(65740),Qt=i(863);const{$currentCountry:Jt}=Oe.outputs,{$origin:Zt}=Q.q.outputs,{$departDate:Kt,$returnDate:ei}=ne.J.outputs.exact,{$months:ti,$duration:ii}=ne.J.outputs.months,ni=Jt.map((e=>e?{iata:e.iata,name:e.name,type:r.PlaceType.Country,countryIata:e.iata,countryName:e.name}:null)),ai=(0,n.$e)({and:[Zt,ni,(e,t)=>Boolean(e&&t&&!(0,s._3)(e,t))],or:{sid:"uhj387"}}),ri=(0,n.yM)({sid:"mwzflw"});(0,Gt.s)({source:B.internals.selectedCountry,if:ai,then:ri,else:Qt.Yd.inputs.clearData}),(0,n.UP)({and:[{clock:ri,source:{origin:Zt,destination:ni,departDate:(0,n.$e)({and:[Kt,ti,(e,t)=>e||(t.length>0?t:null)],or:{sid:"gulvhf"}}),returnDate:(0,n.$e)({and:[ei,ii,(e,t)=>e??t],or:{sid:"-pnsr2e"}})},target:Qt.Yd.inputs.requestTravelRestrictions}],or:{sid:"-if2712"}});const{$countries:oi}=G.outputs,{$status:si}=Yt.outputs,{selectOrigin:li}=B.inputs,{forceOriginChoice:ui}=Q.q.inputs,ci=(0,n.$e)({and:[oi,si,(e,t)=>t===a.Px.success&&e.every((e=>!e.minPrice))],or:{sid:"lf40z7"}});(0,n.UP)({and:[{clock:li,target:ui}],or:{sid:"lp19t5"}});const di={$isEmptyPrices:ci,$showNoOriginWarning:(0,n.$e)({and:[{isAviaFormActive:$t.B.outputs.$isAviaFormActive,origin:Q.q.outputs.$origin,destination:Q.q.outputs.$destination},e=>{let{isAviaFormActive:t,origin:i,destination:n}=e;return t&&(0,s.rP)(n)&&!(null!=i&&i.iata)}],or:{sid:"-8htin3"}})};var pi=i(74371),yi=i(13099),hi=i(77195),mi=i(91486);const{highlightMap:gi,selectedCity:vi}=B.internals;(0,n.UP)({and:[{clock:vi,fn:e=>({iata:null==e?void 0:e.iata,name:null==e?void 0:e.name,type:r.PlaceType.City,cityIata:null==e?void 0:e.iata,cityName:null==e?void 0:e.name,countryIata:null==e?void 0:e.country,countryName:null==e?void 0:e.countryName}),target:[hi.H,Q.q.inputs.fillDestination]}],or:{sid:"-wqyare"}}),(0,n.UP)({and:[{source:vi,fn:()=>mi.yh.World,target:yi.Q.inputs.directionSourceUpdated}],or:{sid:"-w7phzr"}}),(0,n.UP)({and:[{clock:[pi.X.aviaForm.inputs.aviaFormSubmitted,kt.Vx.aviaFormSubmitted],target:gi}],or:{sid:"-vsv1z0"}});const xi={inputs:{...B.inputs,...G.inputs,...Oe.inputs,...et.inputs,...Yt.inputs},outputs:{...B.outputs,...G.outputs,...Oe.outputs,...et.outputs,...jt,...Yt.outputs,...di},internals:{...B.internals,...Yt.internals,...et.internals}}},78083:function(e,t,i){i.d(t,{OT:function(){return r},VX:function(){return s},gw:function(){return o},x5:function(){return u},xj:function(){return l}});var n=i(23570),a=i(82525);const r=()=>a.B.outputs.fillApiHost_IN_DANGEROUS_CLIENT_SIDE_ONLY_WAY(`${n.l.outputs.MOBILE_EXPLORE_HOST}/aggregated/v1/web/aviasales/country/map.json`),o=e=>({localIdeographFontFamily:"sans-serif",dragRotate:!1,renderWorldCopies:!0,minZoom:1.3,maxZoom:9,minPitch:0,maxPitch:0,center:e?[22.976,45.68]:[32.336,48.032],zoom:3});let s,l,u;!function(e){e.CityPoints="city-points",e.CityBubbles="city-bubbles",e.HoveredCity="hovered-city",e.CountryLabels="country-labels",e.AllCountryPolygons="all-country-polygons",e.OpenCountryPolygons="open-country-polygons",e.ClosedCountryPolygons="closed-country-polygons",e.AllCountryBorders="all-country-borders",e.OpenCountryBorders="open-country-borders",e.ClosedCountryBorders="closed-country-borders",e.Origin="origin"}(s||(s={})),function(e){e.Cities="cities",e.Countries="country_polygons",e.CountryLabels="country-labels",e.Origin="origin"}(l||(l={})),function(e){e.MarkerLight="marker-light",e.MarkerDark="marker-dark",e.BubbleOpenLight="bubble-open-light",e.BubbleClosedLight="bubble-closed-light",e.BubbleOpenDark="bubble-open-dark",e.BubbleClosedDark="bubble-closed-dark",e.BubbleDefaultLight="bubble-default-light",e.BubbleDefaultDark="bubble-default-dark",e.OriginLight="origin-light",e.OriginDark="origin-dark"}(u||(u={}))},55178:function(e,t,i){i.r(t),i.d(t,{PriceMapWidget:function(){return Oe}});var n=i(67294),a=i(34840),r=i(54423),o=i(19347),s=i(81468),l=i(2667),u=i(45443),c="EkAHhHvdeM1gNDDPqIiv",d="dhgKqbYlCBhBL7J3QVIm",p=i(85893);const{priceMapFilters:y}=u.priceMapPublicApi.outputs,{direct:h}=y,m=()=>{const{isSelected:e,touched:t}=(0,a.eY)({isSelected:h.$value,touched:h.touched}),{t:i}=(0,s.useTranslation)("service_explore");return(0,p.jsx)(l.Chip,{isActive:!1,isDisabled:!1,onClick:t,isSelected:e,className:d,testId:"direct-filter",children:i("filters.direct.label")})},{priceMapFilters:g}=u.priceMapPublicApi.outputs,{open:v}=g,x=()=>{const{isSelected:e,touched:t}=(0,a.eY)({isSelected:v.$value,touched:v.touched}),{t:i}=(0,s.useTranslation)("service_explore");return(0,p.jsx)(l.Chip,{isActive:!1,isDisabled:!1,onClick:t,isSelected:e,className:d,testId:"open-only-filter",children:i("filters.open.label")})},{priceMapFilters:f}=u.priceMapPublicApi.outputs,{noQuarantine:b}=f,C=()=>{const{isSelected:e,touched:t}=(0,a.eY)({isSelected:b.$value,touched:b.touched}),{t:i}=(0,s.useTranslation)("service_explore");return(0,p.jsx)(l.Chip,{isActive:!1,isDisabled:!1,onClick:t,isSelected:e,className:d,testId:"no-quarantine-filter",children:i("filters.noQuarantine.label")})},{$isOpennessInfoAvailable:j,$isInitialLoading:M}=u.priceMapPublicApi.outputs,P=()=>{const{isOpennessInfoAvailable:e,isInitialLoading:t}=(0,a.eY)({isOpennessInfoAvailable:j,isInitialLoading:M});return t?(0,p.jsx)("div",{className:c}):(0,p.jsxs)("div",{className:c,children:[e&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(x,{}),(0,p.jsx)(C,{})]}),(0,p.jsx)(m,{})]})};var _=i(16849),I=i(3400),k=i(866),$=i(94184),w=i.n($),A=i(76540),S=i(53088),L={city:"P3XEcQHhgfLZzBAD_iAU",cityName:"joP7M8NPidbggV4ECjsA",hovered:"IXA97OLptcW1_SWmuAEz","focus-visible":"ug_s8zn6scTzBBIa3y2Q"},D=i(99741);const N=e=>{const{t:t}=(0,s.useTranslation)("widget_price_map"),{iata:i,name:n,minPrice:r}=e,{hoveredCity:o,currency:l}=(0,a.eY)({hoveredCity:u.priceMapPublicApi.outputs.$hoveredCity,currency:S.y.outputs.$currency}),c=(null==o?void 0:o.iata)===i,{onClick:d,onMouseEnter:y,onMouseLeave:h,onFocus:m,onBlur:g}=(e=>{const{selectedCityIata:t,selectedHoveredCityIata:i,unselectedHoveredCityIata:n}=(0,a.eY)({selectedCityIata:u.priceMapPublicApi.inputs.selectedCityIata,selectedHoveredCityIata:u.priceMapPublicApi.inputs.selectedHoveredCityIata,unselectedHoveredCityIata:u.priceMapPublicApi.inputs.unselectedHoveredCityIata});return{onClick:()=>t({iata:e,source:D.Hd.PriceMapList}),onMouseEnter:()=>i(e),onMouseLeave:()=>n(e),onFocus:()=>i(e),onBlur:()=>n(e)}})(i);return(0,p.jsx)("li",{"data-test-id":"city-item",children:(0,p.jsxs)("button",{className:w()(L.city,c&&L.hovered),onClick:d,onMouseEnter:y,onMouseLeave:h,onFocus:m,onBlur:g,children:[(0,p.jsx)(k.Text,{className:L.cityName,type:k.TextType.Body1Regular,pretty:!1,testId:"city-name",children:n}),r&&(0,p.jsx)(k.Text,{type:k.TextType.Body1Semi,className:L.price,children:(0,p.jsx)(A.Price,{value:r,currency:l||"rub",showCurrencySign:!0})}),!r&&(0,p.jsx)(k.Text,{type:k.TextType.Body2Regular,children:t("checkPrice")})]})},i)};var O=i(84714),B=i(863);const{components:{TravelRestrictionsCard:T}}=B.Yd,F=()=>(0,p.jsxs)(O.default,{width:320,height:68,speed:2,viewBox:"0 0 344 68",backgroundColor:"var(--white-graphite_600)",foregroundColor:"var(--ink_50-graphite_500)",className:"VX2n5jdhmEpOWexNjF7w",children:[(0,p.jsx)("rect",{x:"18",y:"24",rx:"0",ry:"0",width:"24",height:"24"}),(0,p.jsx)("rect",{x:"60",y:"24",rx:"0",ry:"0",width:"120",height:"24"}),(0,p.jsx)("rect",{x:"246",y:"24",rx:"0",ry:"0",width:"80",height:"24"})]}),H=()=>{const{data:e,isReady:t,previewClicked:i,isLoading:n}=(0,a.eY)({data:B.Yd.outputs.$data,isLoading:B.Yd.outputs.$isLoading,isReady:B.Yd.outputs.$isDataValid,previewClicked:B.Yd.inputs.previewClicked});return n?(0,p.jsx)(F,{}):t?(0,p.jsx)("div",{className:"g1VDPm8GpytWJjkhHeWK",children:(0,p.jsx)(T,{onClick:i,data:e,compact:!0})}):null};var U="umiRWbMbN1Wp5CMF0Qtn",R="TIU8fqwFfGTaq7ZKsPfk",W="BvWUQDCLuGmpBYbQjCYu",E=i(96026),q=i.n(E);const V=()=>(0,p.jsxs)(O.default,{width:324,height:54,speed:2,viewBox:"0 0 344 60",backgroundColor:"var(--shimmering_picture)",foregroundColor:"var(--shimmering_text)",className:"BuuLPs1P4hUAuHBGwxdM",children:[(0,p.jsx)("rect",{x:"10",y:"15",rx:"0",ry:"0",width:"120",height:"24"}),(0,p.jsx)("rect",{x:"256",y:"15",rx:"0",ry:"0",width:"80",height:"24"})]}),z=()=>(0,p.jsx)(p.Fragment,{children:q()(0,Math.floor(window.innerHeight/54)).map(((e,t)=>(0,p.jsx)(V,{"data-test-id":"country-loader"},t)))}),X=e=>{let{country:t}=e;const{t:i}=(0,s.useTranslation)("widget_price_map"),{isDesktop:o,cities:l,isLoading:c,selectedCountryIata:d}=(0,a.eY)({isDesktop:r.l.$isDesktop,cities:u.priceMapPublicApi.outputs.$currentCountryCities,isLoading:u.priceMapPublicApi.outputs.$currentCountryCitiesLoading,selectedCountryIata:u.priceMapPublicApi.inputs.selectedCountryIata}),{name:y,iata:h}=t,m=(0,n.useCallback)((()=>{d({iata:null})}),[d]);return(0,p.jsxs)("div",{className:"pJbXtusnrsoNrsQjGZAs","data-test-id":"current-country",children:[o?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("button",{onClick:m,className:R,"data-test-id":"go-to-all-countries",children:[(0,p.jsx)(_.Icon16ControlsDisclosure,{className:W}),(0,p.jsx)(k.Text,{type:k.TextType.Body1Semi,children:i("goToAllCountries")})]}),(0,p.jsx)(k.Text,{className:"nQJHQVIiH5lOYUpxkXqg",type:k.TextType.Title1Bold,testId:"county-name",children:y})]}):(0,p.jsxs)("button",{onClick:m,className:R,children:[(0,p.jsx)(I.Icon24ControlsChevron,{className:W}),(0,p.jsx)(k.Text,{type:k.TextType.Title3Bold,children:y})]}),(0,p.jsx)(H,{}),c&&(0,p.jsx)("div",{className:U,children:(0,p.jsx)(z,{})},h),!c&&l.length>0&&(0,p.jsx)("ul",{className:U,"data-test-id":"cities-list",children:l.map((e=>(0,p.jsx)(N,{...e},e.iata)))},h)]})};var Y=i(97216),G=i(20631);const Q=e=>{let{country:t}=e;const{hoveredCountry:i,isOpennessInfoAvailable:r,currency:o}=(0,a.eY)({hoveredCountry:u.priceMapPublicApi.outputs.$hoveredCountry,isOpennessInfoAvailable:u.priceMapPublicApi.outputs.$isOpennessInfoAvailable,currency:S.y.outputs.$currency}),{t:l}=(0,s.useTranslation)("widget_price_map"),{iata:c,name:d,minPrice:y,open:h,cities:m}=t,{onClick:g,onMouseEnter:v,onMouseLeave:x,onFocus:f,onBlur:b}=(e=>{const{selectedCountryIata:t,unselectedHoveredCountryIata:i,selectedHoveredCountryIata:r}=(0,a.eY)({selectedCountryIata:u.priceMapPublicApi.inputs.selectedCountryIata,unselectedHoveredCountryIata:u.priceMapPublicApi.inputs.unselectedHoveredCountryIata,selectedHoveredCountryIata:u.priceMapPublicApi.inputs.selectedHoveredCountryIata}),o=(0,n.useCallback)((()=>{t({iata:e,source:D.KE.List}),i(e)}),[e,t,i]),s=(0,n.useCallback)((()=>{r(e)}),[e,r]),l=(0,n.useCallback)((()=>{i(e)}),[e,i]);return{onClick:o,onMouseEnter:s,onMouseLeave:l,onFocus:s,onBlur:l}})(c);return(0,p.jsx)("li",{"data-test-id":"country-item",children:(0,p.jsxs)("button",{onClick:g,onMouseEnter:v,onMouseLeave:x,onFocus:f,onBlur:b,className:w()("LXoBc7vPkqWyd1d0KVrh",(null==i?void 0:i.iata)===c&&"mGg1S7RUrDF8p0ENmZe1"),children:[(0,p.jsx)(G.Flag,{countryCode:c,className:"mKI47rNWghKpOX6Ikwph"}),(0,p.jsxs)("div",{className:"HBc2wH7hsEw28fXWNFCk",children:[(0,p.jsxs)("div",{className:"JoWgL1haYCpKtxGS9Avx",children:[(0,p.jsx)(G.Text,{type:G.TextType.Body1Semi,testId:"country-name",children:d}),!r&&m.length>0&&(0,p.jsx)(G.Text,{className:"HZKk0PoANtNdshUa4NQ0",type:G.TextType.Body3Regular,children:l("directions",{count:m.length})}),r&&null!=h&&(0,p.jsx)(G.Text,{className:w()(h&&"YNfXPe5_r7u9KZ5R1bm_",!h&&"XJGS6tnS05XkJuyl4CUF"),type:G.TextType.CaptionSemi,children:l(h?"countryOpen":"countryClosed")})]}),y&&(0,p.jsx)(G.Text,{type:G.TextType.Body1Bold,children:(0,p.jsx)(G.Price,{value:y,currency:o||"rub",showCurrencySign:!0})})]})]})})};const J=()=>(0,p.jsxs)(O.default,{width:320,height:60,speed:2,viewBox:"0 0 344 60",backgroundColor:"var(--white-graphite_600)",foregroundColor:"var(--ink_50-graphite_500)",className:"uy_ucxI4tVe59iQtgOc0",children:[(0,p.jsx)("rect",{x:"18",y:"20",rx:"0",ry:"0",width:"24",height:"24"}),(0,p.jsx)("rect",{x:"60",y:"20",rx:"0",ry:"0",width:"120",height:"24"}),(0,p.jsx)("rect",{x:"246",y:"20",rx:"0",ry:"0",width:"80",height:"24"})]}),Z=()=>(0,p.jsx)(p.Fragment,{children:q()(0,Math.floor(window.innerHeight/60)).map(((e,t)=>(0,p.jsx)(J,{"data-test-id":"countries-list-loader"},t)))});var K="ImDS_luMdqXhDQFOO4sC";const ee=()=>{const{t:e}=(0,s.useTranslation)("widget_price_map"),{countries:t,sortingMethod:i,selectSortingMethod:n,status:r,isOpennessInfoAvailable:o}=(0,a.eY)({countries:u.priceMapPublicApi.outputs.$visibleCountries,sortingMethod:u.priceMapPublicApi.outputs.$countriesSortingMethod,selectSortingMethod:u.priceMapPublicApi.inputs.selectCountriesSortingMethod,status:u.priceMapPublicApi.outputs.$status,isOpennessInfoAvailable:u.priceMapPublicApi.outputs.$isOpennessInfoAvailable}),l=r===D.Px.loading;return(0,p.jsxs)("div",{className:"FlxJJ9WLSlIybpqhRfF5",children:[(0,p.jsxs)(k.Text,{type:k.TextType.Title4Bold,transformOnMobile:!0,className:"sAEAQvJWdQuXdQIB8_Gi",children:[(0,p.jsx)("span",{children:e("countryListSort")}),o&&(0,p.jsxs)(Y.R,{value:i,onChange:n,dataTestId:"countries-list-filters",children:[(0,p.jsx)(Y.R.Option,{value:D.WJ.Price,dataTestId:"sort-by-price",children:e("countryListSortByPrice")}),(0,p.jsx)(Y.R.Option,{value:D.WJ.Openness,dataTestId:"sort-by-openness",children:e("countryListSortByOpennes")})]})]}),l?(0,p.jsx)("div",{className:K,children:(0,p.jsx)(Z,{})}):(0,p.jsx)("ul",{"data-test-element":"country-list",className:K,"data-test-id":"countries-list",children:t.map((e=>(0,p.jsx)(Q,{country:e},e.iata)))})]})};var te=i(48467),ie=i(88956),ne=i(82343),ae={button:"detbVXt4bQSYRYCQWLtt"};const re=e=>{let{onClick:t}=e;const{t:i}=(0,s.useTranslation)("widget_price_map");return(0,p.jsxs)(ie.Button,{size:ie.ButtonSize.S,priority:ie.ButtonPriority.Secondary,onClick:t,className:w()("mapboxgl-ctrl",ae.button),inline:!0,testId:"show-whole-world-button",children:[(0,p.jsx)(ie.Button.Icon,{children:(0,p.jsx)(ne.Icon24CommonAnywhere,{})}),(0,p.jsx)(ie.Button.Label,{className:ae.label,children:i("showWholeWorld")})]})};var oe="Ol8QFqEXCt_MACaVzPOM",se="RIZHPHzsbnXO_X7eOngz",le="pWNCRdsUrHOyMqBjwLmk";const ue=()=>{const e=(0,n.useRef)(null);(e=>{const{isMobile:t,mobileViewChanged:i,selectedCountryIata:o,selectedHoveredCountryIata:s,selectedCityIata:l,selectedHoveredCityIata:c,mapUpdateRequested:d}=(0,a.eY)({isMobile:r.l.$isMobile,mobileViewChanged:u.priceMapPublicApi.inputs.mobileViewChanged,selectedCountryIata:u.priceMapPublicApi.inputs.selectedCountryIata,selectedHoveredCountryIata:u.priceMapPublicApi.inputs.selectedHoveredCountryIata,selectedCityIata:u.priceMapPublicApi.inputs.selectedCityIata,selectedHoveredCityIata:u.priceMapPublicApi.inputs.selectedHoveredCityIata,mapUpdateRequested:u.priceMapPublicApi.inputs.mapUpdateRequested});(0,n.useEffect)((()=>{if(e.current){te.a.init(e,t,{countryHovered:e=>{e&&s(e)},cityClicked:e=>l({iata:e,source:D.Hd.PriceMapMap}),cityHovered:e=>c(e)}),d();const i=te.a.getInstance();return()=>null==i?void 0:i.remove()}return()=>{}}),[e,t,i,o,s,l,c,d])})(e);const{currentCountry:t,selectedCountryIata:i}=(0,a.eY)({currentCountry:u.priceMapPublicApi.outputs.$currentCountry,selectedCountryIata:u.priceMapPublicApi.inputs.selectedCountryIata}),o=(0,n.useCallback)((()=>{i({iata:null})}),[i]);return(0,p.jsx)("div",{className:"JIvocGBW0fqckdQz2uIG",ref:e,"data-test-id":"price-map-container",children:t&&(0,p.jsx)(re,{onClick:o})})},ce=()=>{const{currentCountry:e,status:t}=(0,a.eY)({currentCountry:u.priceMapPublicApi.outputs.$currentCountry,status:u.priceMapPublicApi.outputs.$status}),i=t===D.Px.loading;return(0,n.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]),(0,p.jsx)("div",{className:oe,children:(0,p.jsxs)("div",{className:"g1kHf7ZshstF6oDMaIiC",children:[(0,p.jsx)("div",{className:se,"data-test-id":"side-bar",children:e?(0,p.jsx)(X,{country:e}):(0,p.jsx)(ee,{})}),(0,p.jsxs)("div",{className:"U5CGxwAWTZUpQu5zD0sF",children:[i&&(0,p.jsx)(o.Spinner,{className:le,"data-test-id":"price-map-loader"}),(0,p.jsx)(P,{}),(0,p.jsx)(ue,{})]})]})})};var de=i(12369);const pe={[D.F8.Map]:"listView",[D.F8.List]:"mapView"},ye=()=>{const{t:e}=(0,s.useTranslation)("widget_price_map"),{currentCountry:t,currentView:i,status:r,selectedCountrySource:l}=(0,a.eY)({currentCountry:u.priceMapPublicApi.outputs.$currentCountry,currentView:u.priceMapPublicApi.outputs.$mobileView,status:u.priceMapPublicApi.outputs.$status,selectedCountrySource:u.priceMapPublicApi.outputs.$selectedCountrySource}),c=r===D.Px.loading,d=r===D.Px.success&&(!t||l===D.KE.List),{toggleView:y}=((e,t)=>{const{mobileViewChanged:i,selectedCountryIata:r}=(0,a.eY)({mobileViewChanged:u.priceMapPublicApi.inputs.mobileViewChanged,selectedCountryIata:u.priceMapPublicApi.inputs.selectedCountryIata}),o=(0,n.useCallback)((()=>{i(D.F8.Map),setTimeout((()=>{var e;null===(e=te.a.getInstance())||void 0===e||e.resize()}),0)}),[i]),s=(0,n.useCallback)((()=>{t&&r({iata:null}),i(D.F8.List)}),[t,i,r]);return{toggleView:(0,n.useCallback)((()=>{e!==D.F8.List?s():o()}),[e,s,o])}})(i,t);return(0,p.jsxs)("div",{className:w()(oe,i===D.F8.Map&&"E_lnJD6wWDk3m8sDB4PM"),children:[c&&(0,p.jsx)(o.Spinner,{className:le}),i===D.F8.Map&&(0,p.jsx)(P,{}),i===D.F8.List&&(0,p.jsx)("div",{className:"d62b6GxXGP8Gj9thOmes",children:(0,p.jsx)("div",{className:se,children:t?(0,p.jsx)(X,{country:t}):(0,p.jsx)(ee,{})})}),(0,p.jsx)("div",{className:w()("DrsxajFCnxHh2gnSfiap",i===D.F8.List&&"mxRdrFY5a0ZpLTWXtbwl"),children:(0,p.jsx)(ue,{})}),d&&(0,p.jsx)("div",{className:"dl8onBz03qtWga1fr8PG",children:(0,p.jsxs)(ie.Button,{className:"RGaVfb3FiWk8HskB59rx",inline:!0,onClick:y,size:ie.ButtonSize.XS,children:[i===D.F8.List?(0,p.jsx)(ne.Icon24CommonAnywhere,{}):(0,p.jsx)(de.Icon24ControlsList,{}),e(pe[i])]})})]})};var he=i(10178),me=i(93735),ge=i(12588);const ve=()=>{const{t:e}=(0,s.useTranslation)("widget_price_map"),t=(0,a.eY)(u.priceMapPublicApi.inputs.selectOrigin);return(0,p.jsx)(ge.A,{children:(0,p.jsx)(ge.A.Block,{className:"v_1CrFzjhwN7jLtvOlmf","data-test-id":"no-origin-warning",children:(0,p.jsxs)(he.StatusMessage,{children:[(0,p.jsx)(he.StatusMessage.Icon,{className:"AIcFTW0xcTCh9Y5KLYjN",children:(0,p.jsx)(me.Icon24CommonMarker,{})}),(0,p.jsx)(he.StatusMessage.Title,{className:"HNCgXB0yy_BwjV0HoIag",children:e("noOriginWarning")}),(0,p.jsx)(he.StatusMessage.Content,{}),(0,p.jsx)(he.StatusMessage.Actions,{children:(0,p.jsx)(he.StatusMessage.Action,{onClick:t,children:e("chooseOrigin")})})]})})})};var xe=i(49247),fe=i(41671);const be=()=>{const{t:e}=(0,s.useTranslation)("widget_price_map"),t=(0,a.eY)(u.priceMapPublicApi.inputs.selectOrigin);return(0,p.jsx)(fe.fw,{name:"fade",appear:!0,in:!0,children:(0,p.jsx)(ge.A,{children:(0,p.jsxs)(ge.A.Block,{className:"sCFdb_d2UimA0mOotZ2k","data-test-id":"no-prices-warning",children:[(0,p.jsx)(xe.EmojiWorriedFace,{className:"sXdLae_bJZPMidqYl6NE"}),(0,p.jsx)(G.Text,{tag:"h2",className:"cJ6HS52Hmp3VWb3jzWnn",transformOnMobile:!0,type:G.TextType.Title2Bold,pretty:!0,children:e("noPriceTitle")}),(0,p.jsx)(G.Text,{tag:"p",className:"M5nHCwA6XoQXLQ7cRYWe",transformOnMobile:!0,type:G.TextType.Body1Paragraph,pretty:!0,children:e("noPriceText")}),(0,p.jsx)(G.Button,{className:"qV_upLbZD5YHcB6R8PKQ",size:G.ButtonSize.M,priority:G.ButtonPriority.Primary,onClick:t,children:e("noPriceButton")})]})})})},Ce=()=>{const{isDesktop:e,status:t,isMapVisible:i,isEmptyPrices:o,showNoOriginWarning:s}=(0,a.eY)({isDesktop:r.l.$isDesktop,status:u.priceMapPublicApi.outputs.$status,isMapVisible:u.priceMapPublicApi.outputs.$isMapVisible,isEmptyPrices:u.priceMapPublicApi.outputs.$isEmptyPrices,showNoOriginWarning:u.priceMapPublicApi.outputs.$showNoOriginWarning});return s?(0,p.jsx)(n.StrictMode,{children:(0,p.jsx)(ve,{})}):i?o?(0,p.jsx)(n.StrictMode,{children:(0,p.jsx)(be,{})}):t===D.Px.failed?null:e?(0,p.jsx)(ce,{}):(0,p.jsx)(ye,{}):(0,p.jsx)("span",{})};var je=i(51081),Me=i(3786),Pe=i(34943),_e=i(10924),Ie=i(13099);const{createReporter:ke}=_e.I.inputs,$e={pageName:"main",source:null,userEvent:!0},we=(0,Pe.$e)({and:[Ie.Q.outputs.$exploreId,u.priceMapPublicApi.outputs.$selectedCountrySource,(e,t)=>({exploreId:e,selectSource:t,platform:Me.formattedPlatformName})],or:{sid:"-egeck0"}}),Ae=(0,Pe.$e)({and:[Ie.Q.outputs.$exploreId,e=>({exploreId:e,platform:Me.formattedPlatformName})],or:{sid:"-y681vz"}}),Se=(0,Pe.UP)({and:[{clock:u.priceMapPublicApi.inputs.selectedCountryIata,source:we,filter:(e,t)=>Boolean(t.iata)}],or:{sid:"joesna"}}),Le=(0,Pe.UP)({and:[{clock:u.priceMapPublicApi.inputs.selectCountriesSortingMethod,source:Ae}],or:{sid:"-hq486t"}}),De=ke({data:{service:je.Service.Explore,category:"world",label:"country",action:"selected"}}),Ne=ke({data:{service:je.Service.Explore,category:"world",label:"country_list",action:"sorted"}});De({clock:Se,payload:e=>({...$e,...e})}),Ne({clock:Le,payload:e=>({...$e,...e})});const Oe=()=>(0,a.eY)(u.priceMapPublicApi.outputs.$isFeatureEnabled)?(0,p.jsx)(n.StrictMode,{children:(0,p.jsx)(Ce,{})}):null},99741:function(e,t,i){let n,a,r,o,s,l;i.d(t,{F8:function(){return n},Hd:function(){return r},KE:function(){return a},Px:function(){return s},WJ:function(){return o},gO:function(){return l}}),function(e){e.Map="map",e.List="list"}(n||(n={})),function(e){e.Map="map",e.List="list"}(a||(a={})),function(e){e.PriceMapMap="world-map",e.PriceMapList="world-list"}(r||(r={})),function(e){e.Price="price",e.Openness="openness"}(o||(o={})),function(e){e.initial="initial",e.loading="loading",e.success="success",e.failed="failed"}(s||(s={})),function(e){e.EXACT="EXACT",e.FLEXIBLE="FLEXIBLE"}(l||(l={}))}}]);