"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3323],{78942:function(e,s,a){a.r(s),a.d(s,{travelMapCitiesPublicApi:function(){return u}});var t=a(34943),i=a(94690),o=a(13099),r=a(81155),l=a(70161);const n=(0,t.Fj)({sid:"-sr68fq"}),c=n.createEvent({sid:"-qkh29j"}),d=n.createEvent({sid:"-pcz6ma"}),p=(0,t.UP)({and:[{clock:(0,t.$e)({and:[l.Iw.outputs.$exploreIdInited,i.w.citiesModal.outputs.$opened,(e,s)=>e&&s],or:{sid:"-rzw3c8"}}),filter:Boolean}],or:{sid:"24en7q"}});(0,t.UP)({and:[{clock:p,source:{trapPromoSource:i.w.citiesModal.outputs.$trapPromoSource,exploreId:o.Q.outputs.$exploreId},fn:e=>{let{trapPromoSource:s,exploreId:a}=e;return{explore_id:a,trap_promo_source:s}},target:d}],or:{sid:"dyo3o0"}});const u={trapPromoScreenOpened:d,requestTrapCities:r.P.fetchTrapCities,CitiesContentGate:r.P.CitiesContentGate,travelMapCitiesInitialized:c}},67405:function(e,s,a){a.r(s),a.d(s,{TravelMapCitiesWidget:function(){return f}});var t=a(67294),i=a(94184),o=a.n(i),r=a(81468),l=a(34840),n=a(82455),c=a(77875),d=a(866),p=a(46845),u=a(94690),m=a(48475),x=a(81155),M=a(54423),h=a(10178),T=a(19347),g=a(34922),v=a(36812),P=a(79403),j=a(31087),C=a(88946),S=a(85893);const N=e=>{let{place:s}=e;const{isMobile:a,isUserHasPremium:i,openTravelMapModal:o,isAviasales:r}=(0,l.eY)({isMobile:M.l.$isMobile,isUserHasPremium:v.b.outputs.$isAnyPremiumActive,openTravelMapModal:g.IK.modal.inputs.open,isAviasales:P.U.outputs.$isAviasalesBrand}),n=(s.iatas||[])[0],c=(e=>"https://photo.hotellook.com/static/cities/{width}x{height}/{iata}.jpg".replace("{iata}",e))(n),p=(0,t.useCallback)((()=>{o({openSource:j.Ur.TRAP_PROMO,direction:n})}),[n,o]),u=r&&s.isPremium&&i;return(0,S.jsx)("li",{className:"oeQgz_xdOnnXxAdT63Sg","data-test-id":`place-card-${n}`,children:(0,S.jsxs)("button",{className:"WFE39BJvWekrC6dzCVic",tabIndex:-1,onClick:p,children:[(0,S.jsxs)("div",{className:"PpuWM50vkf3oWHVDQPsw",children:[(0,S.jsx)(C.E,{source:c,size:196,caption:s.name,className:"f7n7lB6iJLhlmE3MedzL"}),u&&(0,S.jsx)("span",{className:"inyVBNm7sMGBVZm9a3ZA"})]}),(0,S.jsx)(d.Text,{type:a?d.TextType.Body2Semi:d.TextType.Title4Bold,className:"MbTKB2DUeruA_YXdWKGE",children:s.name}),(0,S.jsx)(d.Text,{type:a?d.TextType.Body3Regular:d.TextType.Body1Regular,className:"sW3PUnAwgmj1wddBDfwh",children:s.country})]})})};var _=a(78942);const y=e=>{let{className:s}=e;(0,l.DD)(_.travelMapCitiesPublicApi.CitiesContentGate);const{data:a,pending:i,error:n,promoSource:c,requestTrapCities:p}=(0,l.eY)({data:x.P.$data,pending:x.P.$pending,error:x.P.$error,promoSource:u.w.citiesModal.outputs.$trapPromoSource,requestTrapCities:_.travelMapCitiesPublicApi.requestTrapCities}),{t:m}=(0,r.useTranslation)("widget_travel_map_cities"),M=(0,t.useCallback)((()=>{p()}),[p]),g=c===u.n.PROFILE;return(0,S.jsx)("section",{className:o()("g45eLME2Qw5LcxZCQHi3",s),children:(0,S.jsxs)("main",{className:"cAvNxAvYu0lKXWGtlV9G",children:[n?(0,S.jsxs)(h.StatusMessage,{children:[(0,S.jsx)(h.StatusMessage.Icon,{mod:h.StatusMessageIconMods.Warning}),(0,S.jsx)(h.StatusMessage.Actions,{children:(0,S.jsx)(h.StatusMessage.Action,{onClick:M})})]}):(0,S.jsxs)("div",{className:"IGiVOI73PfiQNh7bMVB0",children:[(0,S.jsxs)("div",{className:"alWi561YGNH3d1Q0v3wD",children:[(0,S.jsx)(d.Text,{tag:"h2",className:"b6YPPCVyqdDzMwxkk3F2",type:d.TextType.Title3Bold,children:m(g?"heading":"promo_heading")}),(0,S.jsx)(d.Text,{tag:"p",className:"qHpZWm9RqmqdKsEeZJfl",type:d.TextType.Body1Paragraph,children:m(g?"description":"promo_description")})]}),a&&a.places.slice(0,g?a.places.length:16).map((e=>(0,S.jsx)(N,{place:e},e.iatas[0])))]}),i&&(0,S.jsx)(T.Spinner,{className:"EOHDBZCyJ2S684uehop0",size:T.SpinnerSize.L})]})})};const A=()=>{const{t:e}=(0,r.useTranslation)("widget_travel_map_cities"),{isModalOpened:s,promoSource:a,closeModal:i,error:h,isMobile:T}=(0,l.eY)({isModalOpened:u.w.citiesModal.outputs.$opened,promoSource:u.w.citiesModal.outputs.$trapPromoSource,closeModal:u.w.citiesModal.inputs.close,error:x.P.$error,isMobile:M.l.$isMobile});(0,m.cF)(s);const g=(0,t.useCallback)((()=>{i()}),[i]);return(0,S.jsxs)(n.Modal,{className:o()("oKMg9IeseSfZsJJ5MyEt",Boolean(h)&&"arN11rzURAOxBnDz8e8_"),visible:s,onClose:g,padding:0,children:[(0,S.jsxs)(n.Modal.Navigation,{transparent:!0,shadow:!0,children:[(0,S.jsx)(c.Navbar.Title,{children:T&&(0,S.jsx)(d.Text,{type:d.TextType.Body1Semi,children:a===u.n.PROFILE?e("heading"):e("promo_heading")})}),(0,S.jsx)(c.Navbar.RightAccessory,{children:(0,S.jsx)(p.CloseButton,{onClick:g})})]}),(0,S.jsx)(y,{className:"iS8NqG5BqWldOXq8MLKq"})]})};var b=a(51081),B=a(10924);const{forwardToAnalytics:w}=B.I.inputs;w({from:_.travelMapCitiesPublicApi.trapPromoScreenOpened,data:{service:b.Service.Guides,category:"trap_promo",label:"screen",action:"opened"},payload:{pageName:"main",source:null,userEvent:!0}});const f=()=>(0,S.jsx)(t.StrictMode,{children:(0,S.jsx)(A,{})})}}]);