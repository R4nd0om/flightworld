"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[1279],{72585:function(e,t,i){i.d(t,{d:function(){return n},j4:function(){return l},pw:function(){return o}});const n=181,o=4,l=/\/hotels\/(\d+)/},39059:function(e,t,i){i.r(t),i.d(t,{HotelsWidgetIsomorphicFlags:function(){return D}});var n,o,l,a,s,r,c,d,u,p,h,m,f,b,k,g,v,x,y=i(7934),S=i(14581);function H(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function $(e,t,i,n,o){var l={};return Object.keys(n).forEach((function(e){l[e]=n[e]})),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=i.slice().reverse().reduce((function(i,n){return n(e,t,i)||i}),l),o&&void 0!==l.initializer&&(l.value=l.initializer?l.initializer.call(o):void 0,l.initializer=void 0),void 0===l.initializer&&(Object.defineProperty(e,t,l),l=null),l}let j=(n=(0,y.si)(),o=(0,y.Xp)(),l=(0,y.dF)({example:!0}),a=Reflect.metadata("design:type",Boolean),r=$((s=class{constructor(){H(this,"enabled",r,this),this.entry_points={explore_direction_hotels:!1}}}).prototype,"enabled",[n,o,l,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s),D=(c=(0,y.jx)(),d=(0,y.Xp)(),u=(0,S.Type)((()=>j)),p=(0,y.dF)({type:()=>j}),h=Reflect.metadata("design:type",void 0===j?Object:j),m=(0,y.jx)(),f=(0,y.Xp)(),b=(0,y.dF)({type:()=>j}),k=Reflect.metadata("design:type",void 0===j?Object:j),v=$((g=class{constructor(){H(this,"mon-feat-hotelsWidget",v,this),H(this,"serp-exp-hotels",x,this)}}).prototype,"mon-feat-hotelsWidget",[c,d,u,p,h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),x=$(g.prototype,"serp-exp-hotels",[m,f,b,k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{enabled:!1,entry_points:{explore_direction_hotels:!1}}}}),g)},98858:function(e,t,i){i.r(t),i.d(t,{HotelsWidget:function(){return A}});var n=i(67294),o=i(34840),l=i(30523),a=i.n(l),s=i(12588),r=i(41671),c=i(54423),d=i(81468),u=i(85430),p=i(99641),h=i(61863),m=i(85893);const f=e=>{let{type:t="desktop",buttonLink:i,children:n,className:o,onButtonClick:l}=e;const{t:a}=(0,d.useTranslation)("widget_hotels"),s="mobile"===t?p.HY:p.Ri;return(0,m.jsx)(s,{className:o,title:a("blockTitle"),buttonText:a("allHotelsTextButton"),buttonLink:i,buttons:(0,m.jsx)(p.WB,{text:a("landingTextButton"),cashBackType:h.N9.CashbackHotelSerp}),icon:(0,m.jsx)(u.Icon24ColorPersonInBed,{className:"LVOBTHVUd0SO4OSVdmBB"}),onButtonClick:l,children:n})};var b=i(80625),k=i(48475),g=i(53356),v=i(81926),x=i(866),y=i(94184),S=i.n(y);const H=e=>{let{hotel:t,className:i}=e;const{t:n}=(0,d.useTranslation)("widget_hotels");return(0,m.jsxs)("div",{className:S()("Y0PizbGYcTfOUCwATyLf",i),children:[(0,m.jsxs)("div",{className:"qiG4XTlZSsbHYsqTiWJC",children:[(0,m.jsx)(b.Badge,{className:"MO09sBt6EcZ7tfcnAKE2",size:b.BadgeSize.S,color:b.BadgeColor.Green,borderStyle:b.BadgeBorderStyle.Brick,children:t.rating}),(0,m.jsx)(p.ME,{value:t.stars})]}),(0,m.jsx)(x.Text,{type:x.TextType.Body2Regular,truncateMode:x.TruncateTextMode.TwoLines,children:t.name}),(0,m.jsxs)("span",{className:"URi2ZA5loGVGKKy7zEmS",children:[(0,m.jsxs)(x.Text,{className:"VNQ8kNlE6qXbXKBG8F8e",type:x.TextType.Body1Semi,children:[`${n("priceFrom")}`," ",(0,m.jsx)(p.fE,{price:t.priceFrom})]}),(0,m.jsx)(x.Text,{className:"tE9AA54rz4NDzQnd1KXc",type:x.TextType.CaptionRegular,children:n("priceForPeriod")})]})]})},$=e=>{let{hotel:t,onHotelClick:i,onViewItem:n}=e;const o=(0,k.nS)((()=>n(t))),[l]=t.badges,a=(0,g.r)({link:t.searchHotelLink,link_v2:t.searchHotelLinkV2,openSource:v.h0.direction_screen});return(0,m.jsx)(p.d$,{ref:o,href:a,title:t.name,url:t.mainPhotoUrl,content:e=>{let{className:i}=e;return(0,m.jsx)(H,{className:i,hotel:t})},onClick:()=>i(t),className:"jvstg35vM3uqj53l9Zsv",children:l&&(0,m.jsx)(b.Badge,{className:"bsgVyxNWuMHN1POAXUti",size:b.BadgeSize.S,customHexColor:l.color,children:l.name})},t.id)},j=e=>{let{hotels:t,buttonLink:i,onHotelClick:n,onAllHotelsClick:o,onViewItem:l}=e;return(0,m.jsx)(f,{type:"mobile",buttonLink:i,onButtonClick:o,className:"OHhsmsrYk4PgbuIR5MXn",children:t.map((e=>(0,m.jsx)($,{hotel:e,onHotelClick:n,onViewItem:l},e.id)))})};var D=i(72585);const w=e=>{let{hotel:t,onHotelClick:i,onViewItem:n}=e;const o=(0,k.nS)((()=>n(t))),[l]=t.badges,a=(0,g.r)({link:t.searchHotelLink,link_v2:t.searchHotelLinkV2,openSource:v.h0.direction_screen});return(0,m.jsx)(p.ek,{ref:o,href:a,onClick:()=>i(t),image:e=>{let{className:i}=e;return(0,m.jsx)(p.vZ,{radius:14,className:i,children:(0,m.jsxs)("div",{className:"s4Hof7lT_d89kzwSjxcy",children:[(0,m.jsx)(p.G0,{size:D.d,imageUrl:t.mainPhotoUrl}),l&&(0,m.jsx)(b.Badge,{className:"WzwC2q3hBwgt8pVYmcng",size:b.BadgeSize.S,customHexColor:l.color,children:l.name})]})})},content:()=>(0,m.jsx)(H,{hotel:t})})},C=e=>{let{hotels:t,buttonLink:i,onHotelClick:n,onAllHotelsClick:o,onViewItem:l}=e;return(0,m.jsx)(f,{buttonLink:i,onButtonClick:o,className:"sIAjliFPbYBLvyOcIllD",children:(0,m.jsx)("div",{className:"puzoSWuzPuvhQWnU8eTl",children:t.slice(0,D.pw).map((e=>(0,m.jsx)(w,{hotel:e,onHotelClick:n,onViewItem:l},e.id)))})})};var L=i(29862);a().polyfill();const A=()=>{const{isMobile:e,data:t,isDataLoading:i,isVisible:l,isWidgetEnabled:a,saveTitleRef:d,onHotelClick:u,sendShowMoreHotelsClickedAnalitcs:p,sendHotelItemShowedAnalitcs:h}=(0,o.eY)({isMobile:c.l.$isMobile,data:L.hotelsPublicApi.hotels.outputs.$data,isDataLoading:L.hotelsPublicApi.hotels.outputs.$isDataLoading,isVisible:L.hotelsPublicApi.hotels.outputs.$isVisible,isWidgetEnabled:L.hotelsPublicApi.hotels.outputs.$isFeatureEnabled,saveTitleRef:L.hotelsPublicApi.hotels.inputs.titleRefSaved,onHotelClick:L.hotelsPublicApi.hotels.inputs.hotelClicked,sendShowMoreHotelsClickedAnalitcs:L.hotelsPublicApi.analytics.inputs.showMoreHotelsClicked,sendHotelItemShowedAnalitcs:L.hotelsPublicApi.analytics.inputs.hotelItemShowed}),f=a&&l,b=(0,n.useRef)(null),k=!(null!=t&&t.hotels.length),g=(0,n.useCallback)((e=>{p({click_url:e})}),[p]);if((0,n.useEffect)((()=>{d(b)}),[d]),!f||k||i)return null;const{hotels:v,searchLocationLink:x}=t,y=e?j:C;return(0,m.jsx)(n.StrictMode,{children:(0,m.jsx)(s.A,{children:(0,m.jsx)(r.fw,{name:"fade",in:!0,appear:!t,children:(0,m.jsx)(y,{hotels:v,onHotelClick:u,onAllHotelsClick:()=>g(x),buttonLink:x,onViewItem:h})})})})}},29862:function(e,t,i){i.r(t),i.d(t,{hotelsPublicApi:function(){return J}});var n=i(34943),o=i(35529),l=i(73114),a=i(65041),s=i(89717),r=i(6229),c=i(72585);const d=e=>c.j4.test(e),u=e=>{const t=(e=>{const t={iata:e.destinationCityIata,adults:e.adults,locale:e.locale,currency:e.currency,brand:e.brand};return e.children&&(t.children=e.children),e.infants&&(t.infants=e.infants),e.departMonths?(t.dates={period:"flexible",departMonths:e.departMonths},e.tripDuration&&(t.dates.minTripDuration=e.tripDuration.min,t.dates.maxTripDuration=e.tripDuration.max),t):(e.departDate&&(t.dates={period:"exact",departDate:e.departDate},e.returnDate&&(t.dates.returnDate=e.returnDate)),t)})(e),i=JSON.stringify(t.locale);return`{\n  widgets {\n    bestHotelsV1(${n=t,Object.entries(n).map((e=>{let[t,i]=e;return"dates"===t?`${t}: { ${n=i,Object.entries(n).map((e=>{let[t,i]=e;return"period"===t?`${t}: ${"exact"===i?"EXACT":"FLEXIBLE"}`:`${t}: ${JSON.stringify(i)}`})).join(", ")} }`:"brand"===t?`${t}: ${i}`:`${t}: ${JSON.stringify(i)}`;var n})).join(", ")}) {\n      destination {\n        iata\n        translations(filter: { locales: [${i}] })\n      }\n      hotels {\n        id\n        name\n        stars\n        rating\n        priceFrom\n        mainPhotoUrl\n        searchHotelLink\n        searchHotelLinkV2\n        badges {\n          name\n          color\n        }\n      }\n      searchLocationLink\n      offerPartner\n    }\n  }\n}`;var n},p={name:"fetch_hotels",dataTransformer:e=>e.widgets.bestHotelsV1||null},h=(0,n.GW)((e=>s.N.createRequest()({query:u(e),config:p})),{sid:"-nf02i5"}),m=(0,n.Fj)({sid:"luaik6"}),f={outputs:{initialized:(0,n.yM)({sid:"-kkav7a"})}},{createFlag:b}=a.f.inputs,k=b({name:"mon-feat-hotelsWidget",contract:(0,o.Record)({enabled:o.Boolean}),defaultValue:!1,mapValue:e=>{let{enabled:t}=e;return t},requestOn:f.outputs.initialized}).$value,g=b({name:"serp-exp-hotels",contract:(0,o.Record)({enabled:o.Boolean,entry_points:(0,o.Record)({explore_direction_hotels:o.Boolean})}),defaultValue:!1,mapValue:e=>{let{enabled:t,entry_points:i}=e;return t&&i.explore_direction_hotels},requestOn:f.outputs.initialized}).$value,v=m.createEvent({sid:"-kgp61a"}),{$enabled:x,turnOn:y,turnOff:S}=(0,n.MR)({sid:"-254b8w",fn:()=>(0,l.qs)()}),H=m.createEffect(h,{sid:"-z7ivv2"}),$=m.createStore(null,{sid:"pqoryb"}).on(H.doneData,((e,t)=>t)),j=H.pending,D=m.createStore(null,{sid:"-c1kre6"}),w=m.createStore(null,{sid:"hhal0v"}),C={outputs:{$data:$,$isDataLoading:j,$isVisible:x,$isFeatureEnabled:k,$isSerpHotelsFlagEnabled:g},inputs:{hotelClicked:v,titleRefSaved:m.createEvent({sid:"9kr5rt"}),show:y,hide:S},internals:{$titleRef:w,fetchDataFx:H,$hotelDeepLink:D}},L={outputs:{},inputs:{showMoreHotelsClicked:m.createEvent({sid:"-ra4zve"}),hotelItemShowed:m.createEvent({sid:"-ecxuet"})},internals:{sendHotelItemShowedAnalytics:m.createEvent({sid:"-i7922n"})}};var A=i(72675),B=i(53088),_=i(23190),P=i(17514),z=i(97331),E=i(1445),N=i(79403),T=i(66048),I=i(88057),V=i(49434),O=i(23927),M=i(4114),F=i(47120);C.internals.$hotelDeepLink.reset(F.D.outputs.modalClosed);const R=(0,n.$e)({and:[E.q.outputs.$origin,E.q.outputs.$destination,I.J.outputs.exact.$departDate,I.J.outputs.exact.$returnDate,T.l.outputs.$passengers,B.y.outputs.$currency,(0,A.x)(P.B.outputs.$isAviaFormActive,z.N.outputs.$isSimpleSearch),O.z.outputs.$localeDeprecated,N.U.outputs.$brand,(e,t,i,n,o,l,a,s,c)=>{const{departDate:d,departMonths:u,returnDate:p,tripDuration:h}=((e,t)=>{let i,n,o,l;var a;return a=e,Array.isArray(a)?o=e.map((e=>(0,r.getDateISO)(e))):i=e?(0,r.getDateISO)(e):void 0,(e=>!!e&&Boolean(e.min&&e.max))(t)?l=t:n=t?(0,r.getDateISO)(t):void 0,{departDate:i,returnDate:n,departMonths:o,tripDuration:l}})(i||void 0,n||void 0);return{originCityIata:(null==e?void 0:e.cityIata)||"",destinationCityIata:(null==t?void 0:t.cityIata)||"",adults:o.adults,children:o.children,infants:o.infants,departDate:d,returnDate:p,departMonths:u,tripDuration:h,locale:s,isAviaFormActive:a,currency:l,brand:c}}],or:{sid:"-9j9adp"}}),U=(0,n.UP)({and:[{clock:[R.updates,f.outputs.initialized,M.Y.outputs.$isShouldHotelsShow.updates],source:{params:R,isShouldHotelsShow:M.Y.outputs.$isShouldHotelsShow},filter:C.outputs.$isFeatureEnabled}],or:{sid:"po3vzk"}}),{valid:q,__:W}=(0,n.Vl)({and:[U,{valid:e=>{let{params:t,isShouldHotelsShow:i}=e;return i&&(e=>{let{originCityIata:t,destinationCityIata:i,locale:n,adults:o,currency:l,isAviaFormActive:a}=e;return Boolean(t&&i&&n&&o&&l)&&t!==i&&a})(t)}}],or:{sid:"-r2lj3q"}});(0,n.UP)({and:[{clock:q,target:C.inputs.show}],or:{sid:"orvag2"}}),(0,n.UP)({and:[{clock:W,target:C.inputs.hide}],or:{sid:"82xy1d"}}),(0,n.UP)({and:[{clock:q,fn:e=>{let{params:t}=e;return t},target:C.internals.fetchDataFx}],or:{sid:"85ox06"}}),(0,n.UP)({and:[{clock:C.inputs.hotelClicked,fn:e=>e.searchHotelLinkV2,target:C.internals.$hotelDeepLink}],or:{sid:"8kjd0x"}});const X=(0,n.$e)({and:[{hotelDeepLink:C.internals.$hotelDeepLink,isSerpHotelsFlagEnabled:C.outputs.$isSerpHotelsFlagEnabled},e=>{let{hotelDeepLink:t,isSerpHotelsFlagEnabled:i}=e;return!(!i||!t)&&d(t)}],or:{sid:"ha3zqu"}});(0,n.UP)({and:[{clock:C.internals.$hotelDeepLink,source:{searchParams:_.D.outputs.$searchParams,shouldHotelsModalOpen:X},filter:e=>{let{shouldHotelsModalOpen:t}=e;return Boolean(t)},fn:(e,t)=>{let{searchParams:i}=e;const n=new URL(t);n.searchParams.set("source",V.H_.ExploreDirectionHotels);const o=`${i.toString()}&${n.searchParams.toString()}`,l=new URLSearchParams(o);return{pathname:n.pathname,search:l}},target:_.D.inputs.navigateTo}],or:{sid:"9imltb"}});const Y=(0,n.GW)((e=>{const t=null==e?void 0:e.current;null==t||t.scrollIntoView({behavior:"smooth",block:"start"})}),{sid:"-18fiw9"});(0,n.UP)({and:[{clock:C.inputs.titleRefSaved,filter:Boolean,target:C.internals.$titleRef}],or:{sid:"ax7oej"}}),(0,n.UP)({and:[{clock:F.D.outputs.modalClosed,source:C.internals.$titleRef,fn:e=>e,target:Y}],or:{sid:"b0ifyp"}});var G=i(51081),Z=i(70161);const K={pageName:"main",source:null,offerType:"hotels"};(0,Z.iZ)({from:L.inputs.showMoreHotelsClicked,data:{action:"clicked",label:"hotels",category:"direction",service:G.Service.Monetization},payload:{...K,userEvent:!0,clickSource:"item"}}),(0,Z.iZ)({from:(0,n.UP)({and:[{clock:C.inputs.hotelClicked,source:C.outputs.$isSerpHotelsFlagEnabled,filter:(e,t)=>!(d(t.searchHotelLinkV2)&&e),fn:(e,t)=>({click_url:t.searchHotelLink})}],or:{sid:"sl65r7"}}),data:{action:"clicked",label:"hotels",category:"direction",service:G.Service.Monetization},payload:{...K,userEvent:!0,clickSource:"item"}}),(0,n.UP)({and:[{clock:L.inputs.hotelItemShowed,source:B.y.outputs.$currency,fn:(e,t)=>{return{source:"explore",hotel_id:(i=t.searchHotelLinkV2,null===(n=i.match(c.j4))||void 0===n?void 0:n[1]),rating:t.rating,stars:t.stars,price_per_night:t.priceFrom,currency:e};var i,n},target:L.internals.sendHotelItemShowedAnalytics}],or:{sid:"-ufwujx"}}),(0,Z.iZ)({from:L.internals.sendHotelItemShowedAnalytics,data:{action:"showed",label:"offer",category:"hotels",service:G.Service.Serp},payload:{...K,userEvent:!1}});const J={hotels:C,widget:f,analytics:L}}}]);