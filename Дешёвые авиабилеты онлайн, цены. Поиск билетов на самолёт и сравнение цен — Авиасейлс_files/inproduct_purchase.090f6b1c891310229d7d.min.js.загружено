"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[617],{19056:function(e,r,s){s.r(r),s.d(r,{InproductPurchase:function(){return le}});var t=s(67294),o=s(68405),a=s(47166),c=s.n(a),n=s(81468),i=s(34840),u=s(82455),d=s(77875),l=s(46845),p=s(85430),h=s(61863),P=s(43285),g=s(8155),m=s(57790),y=s(96859),v=s(32053),b=s(34943),A=s(54423);const x=e=>void 0===e?null:e,j=(0,b.$e)({and:[{isMobile:A.l.$isMobile.map(x),isTablet:A.l.$isTablet.map(x),isDesktop:A.l.$isDesktop.map(x)}],or:{sid:"kgzhag"}});j.map((e=>Object.values(e).every((e=>"boolean"==typeof e)))),j.map((e=>{let{isDesktop:r}=e;return r}));var k=s(20631),D=s(81323),f=s(2180);const C=(0,i.Bq)({and:[],or:{sid:"d1xj4"}});var T=s(85893);const{GooglePayGate:$}=f.F,{LandingContainer:S}=D.S.containers,U=()=>{const e=(0,i.eY)(m.o.inputs.hideInproductPurchase);return(0,i.DD)($),(0,i.DD)(C),(0,T.jsx)("div",{children:(0,T.jsx)(S,{navbar:(0,T.jsx)(d.Navbar,{transparent:!0,shadow:!1,children:(0,T.jsx)(d.Navbar.RightAccessory,{children:(0,T.jsx)(k.CloseButton,{onClick:e})})})})})};var N=s(80849),w=s(96671),F=s(30893),M=s(17433),L=s(74526),V=s(48293);(0,b.UP)({and:[{clock:o.E.outputs.pay.applePayResult.success,target:[P.V.inputs.inProductPurchase.goToSuccess,L.W.inputs.fetchUserDataFx]}],or:{sid:"myhyg5"}}),(0,b.UP)({and:[{clock:o.E.outputs.pay.applePayResult.alreadyActive,target:P.V.inputs.inProductPurchase.goToAlreadyActivePayment}],or:{sid:"-27rtic"}}),(0,b.UP)({and:[{clock:y.l.outputs.applePaySessionFailures,target:V.a.inputs.showCommonPayErrorModal}],or:{sid:"-1th62y"}}),(0,b.UP)({and:[{clock:V.a.inputs.hideCommonPayErrorModal,target:y.l.inputs.reset}],or:{sid:"-1qq745"}});var I=s(72675),R=s(82097),_=s(36812),Y=s(5525);(0,b.UP)({and:[{clock:Y.g.outputs.payCompletedSuccessfully,target:[P.V.inputs.inProductPurchase.goToSuccess,L.W.inputs.fetchUserDataFx]}],or:{sid:"-i9tqlm"}}),(0,b.UP)({and:[{clock:Y.g.outputs.receivedThreeDs,target:P.V.inputs.inProductPurchase.goToThreeDs}],or:{sid:"-1ttegl"}}),(0,b.UP)({and:[{clock:[Y.g.outputs.payFailed,v.x.outputs.threeDsFailed],target:P.V.inputs.inProductPurchase.goToPurchaseForm}],or:{sid:"-1fir17"}}),(0,b.UP)({and:[{clock:Y.g.outputs.completedWithAlreadyActive,target:P.V.inputs.inProductPurchase.goToAlreadyActivePayment}],or:{sid:"-zkptq"}}),(0,b.UP)({and:[{clock:Y.g.outputs.payFailed,target:V.a.inputs.showCommonPayErrorModal}],or:{sid:"-wtqux"}}),(0,b.UP)({and:[{clock:V.a.inputs.hideCommonPayErrorModal,target:Y.g.inputs.reset}],or:{sid:"-ij3fj"}});const q=(0,b.UP)({and:[{clock:_.b.outputs.$premiumStatus,filter:Boolean}],or:{sid:"4t9k23"}}),E=(0,I.x)(m.o.outputs.$isInproductPurchaseVisible,(0,R.f)(P.V.outputs.inProductPurchase.$screen,h.D$.PurchaseForm));(0,b.UP)({and:[{clock:q,source:{isPayScreenShowing:E,isPremiumActive:_.b.outputs.$isAnyPremiumActive},filter:e=>{let{isPayScreenShowing:r,isPremiumActive:s}=e;return r&&s},target:P.V.inputs.inProductPurchase.goToAlreadyActiveAuth}],or:{sid:"rqeyoq"}}),(0,b.UP)({and:[{clock:f.F.paymentFailedWithAlreadyActiveError,target:P.V.inputs.inProductPurchase.goToAlreadyActivePayment}],or:{sid:"s80doa"}}),(0,b.UP)({and:[{clock:f.F.paymentCompleted,target:P.V.inputs.inProductPurchase.goToSuccess}],or:{sid:"smb13o"}}),(0,b.UP)({and:[{clock:f.F.paymentFailed,target:V.a.inputs.showCommonPayErrorModal}],or:{sid:"sp202h"}}),(0,b.UP)({and:[{clock:f.F.receivedThreeDs,target:P.V.inputs.inProductPurchase.goToThreeDs}],or:{sid:"t3cnhv"}});const B=c().bind({root:"T0ens2cR3P1GkSNZolTj",box:"IlnkhygrBeF1rcAagdKQ","logo-header":"M1Ui4CLe3vCtAhXe20g_","user-box-wrapper":"gac978SboAUSahv6Xu8P","cancellable-subscription-info":"L3I58Ug8RhdbAZACmhp_","third-party-pay-service-button-wrapper":"GhIeL2X4qOzArwf6N645","summary-wrapper":"hKsSjSX36c76JOki87f1","free-promocode":"pHVTVtlolXQpCYQsWyQD","email-form-wrapper":"dmiLXryY172KCFhyFeAf","footer-wrapper":"TxxLJSjarscD9rO3n1bx"}),{ExpiredPromocodeError:O}=N.w.outputs,{PurchaseFormContainer:K}=M.o.containers,W=()=>{const[e,r,s]=(0,i.eY)([M.o.outputs.$isPromocodePaymentError,M.o.inputs.continuePaymentWithoutPromocode,M.o.inputs.cancelPayment]),t=(0,i.eY)(j),o=(0,i.eY)(F.G.outputs.$originalPrice),a=(0,i.eY)(F.G.outputs.$currency);return e?(0,T.jsx)(w.A,{children:(0,T.jsx)(O,{originalPrice:o,currency:a,mobile:t.isMobile,onCancel:s,onContinue:r})}):(0,T.jsx)("main",{className:B("root"),children:(0,T.jsx)(K,{placement:"inproduct"})})};var G=s(48158),X=s(10543);const z=(0,b.MT)("default",{sid:"l43zt2"});(0,b.UP)({and:[{clock:[Y.g.outputs.successScreenTypeReceived,y.l.outputs.successScreenTypeReceived,f.F.successScreenTypeReceived],target:z}],or:{sid:"jw253a"}});const H={$successScreenType:z},Q=()=>{const e=(0,i.eY)(H.$successScreenType),r=(0,i.eY)(X.C.outputs.$durationDays);return(0,T.jsx)(G.k,{type:e,subscriptionDaysDuration:r})};var Z=s(99057);const J=e=>{let{mode:r}=e;return(0,T.jsx)(w.A,{children:(0,T.jsx)(Z.k,{mode:r})})};var ee=s(15794);const re=(0,b.yM)({sid:"cnujd8"});(0,b.UP)({and:[{clock:v.x.inputs.paymentCardChanged,target:re}],or:{sid:"3p5u99"}}),(0,b.UP)({and:[{clock:re,target:[Y.g.inputs.reset,P.V.inputs.inProductPurchase.goToPurchaseForm]}],or:{sid:"-v1ydf3"}});const se={tryWithAnotherCard:re};var te=s(65740),oe=s(61754),ae=s(52172);const ce=(0,i.Bq)({and:[],or:{sid:"1ofyqy"}});(0,b.UP)({and:[{clock:ce.open,filter:ae.r.outputs.$authMethods.map((e=>!e)),target:ae.r.inputs.authMethodsRequested}],or:{sid:"-bum71l"}}),(0,b.UP)({and:[{clock:ce.open,target:oe.b.inputs.launch}],or:{sid:"-bfrr0u"}}),(0,b.UP)({and:[{clock:C.open,source:ce.state,target:D.S.inputs.scrollAreaRefReceived}],or:{sid:"-b1h3lg"}}),(0,b.UP)({and:[{clock:m.o.inputs.showInproductPurchase,source:_.b.outputs.$isFreeTier,fn:e=>({mode:e?h.jo.FreeMarkets:h.jo.Inproduct}),target:D.S.inputs.landingInitialized}],or:{sid:"-awiy97"}}),(0,te.s)({source:D.S.outputs.ctaClickedInInproductMode,if:X.C.outputs.$isOffersSelectionAvailable,then:X.C.inputs.showOffersSelection,else:P.V.inputs.inProductPurchase.goToPurchaseForm}),(0,b.UP)({and:[{clock:X.C.outputs.offerCardClicked,target:P.V.inputs.inProductPurchase.goToPurchaseForm}],or:{sid:"-a0mvu9"}}),(0,b.UP)({and:[{clock:m.o.inputs.hideInproductPurchase,target:D.S.inputs.resetLandingMode}],or:{sid:"-9mc8ev"}}),(0,b.UP)({and:[{clock:m.o.inputs.hideInproductPurchase,source:P.V.outputs.inProductPurchase.$screen,filter:e=>[h.D$.PurchaseSuccess,h.D$.AlreadyActivePayment,h.D$.AlreadyActiveAuth].includes(e),target:P.V.inputs.inProductPurchase.goToLanding}],or:{sid:"-9jl9g2"}}),(0,b.UP)({and:[{clock:P.V.inputs.inProductPurchase.goToLanding,target:N.w.inputs.promocodeReset}],or:{sid:"-91g1v5"}});const ne=c().bind({"background-container":"wkDZKltOi67yG9c1qDfR",navbar:"KXgwlsY82vINOiTe22kb",content:"sjtqitPPy_xKa6gUOAJi","default-background":"x9MUbfhaq6_NH5GiAjXu","features-background":"IfhvIQeIbZP6KfbqN6c1","mobile-back-button":"A1dLOD9l8ZWsvKD5K9zW"}),{ThreeDsContainer:ie}=v.x.containers,{ApplePayServiceGate:ue}=y.l.inputs,de=()=>{const{t:e}=(0,n.useTranslation)("widget_premium_pay"),r=(0,i.eY)(m.o.outputs.$isInproductPurchaseVisible),s=(0,i.eY)(P.V.outputs.inProductPurchase.$screen),o=(0,i.eY)(P.V.inputs.inProductPurchase),a=(0,i.eY)(m.o.inputs.hideInproductPurchase),c=(0,i.eY)(se.tryWithAnotherCard),y=(0,i.eY)(D.S.inputs.landingScrolled),v=(0,i.eY)(j),b=(0,t.useRef)(null);(0,i.DD)(ce,b),(0,i.DD)(ue);const A=(0,t.useMemo)((()=>{switch(s){case h.D$.Landing:return(0,T.jsx)(U,{});case h.D$.PurchaseForm:return(0,T.jsx)(W,{});case h.D$.AlreadyActivePayment:return(0,T.jsx)(J,{mode:"pay"});case h.D$.AlreadyActiveAuth:return(0,T.jsx)(J,{mode:"auth"});case h.D$.ThreeDs:return(0,T.jsx)(ie,{useLogo:!0,testId:"inproduct-landing-3ds-iframe"});case h.D$.PurchaseSuccess:return(0,T.jsx)(Q,{});default:return null}}),[s]),x=(0,t.useMemo)((()=>{switch(s){case h.D$.PurchaseForm:return(0,T.jsxs)(d.Navbar,{transparent:!0,shadow:!1,children:[(0,T.jsx)(d.Navbar.LeftAccessory,{children:(0,T.jsx)(d.Navbar.Back,{onClick:o.goToLanding})}),(0,T.jsx)(d.Navbar.Title,{title:e("screenTitle.payment")}),(0,T.jsx)(d.Navbar.RightAccessory,{children:(0,T.jsx)(l.CloseButton,{onClick:a})})]});case h.D$.AlreadyActivePayment:return(0,T.jsxs)(d.Navbar,{transparent:!0,shadow:!1,children:[(0,T.jsx)(d.Navbar.Title,{title:e("screenTitle.payment")}),(0,T.jsx)(d.Navbar.RightAccessory,{children:(0,T.jsx)(l.CloseButton,{onClick:a})})]});case h.D$.AlreadyActiveAuth:return(0,T.jsxs)(d.Navbar,{transparent:!0,shadow:!1,children:[(0,T.jsx)(d.Navbar.Title,{title:e("screenTitle.authorization")}),(0,T.jsx)(d.Navbar.RightAccessory,{children:(0,T.jsx)(l.CloseButton,{onClick:a})})]});case h.D$.ThreeDs:return(0,T.jsxs)(d.Navbar,{transparent:!0,shadow:!1,children:[(0,T.jsxs)(d.Navbar.LeftAccessory,{children:[!v.isMobile&&(0,T.jsx)(d.Navbar.Back,{onClick:c}),v.isMobile&&(0,T.jsx)("button",{onClick:c,className:ne("mobile-back-button"),children:(0,T.jsx)(p.Icon24ControlsChevron,{})})]}),(0,T.jsx)(d.Navbar.Title,{title:e("screenTitle.three_ds")}),(0,T.jsx)(d.Navbar.RightAccessory,{children:(0,T.jsx)(l.CloseButton,{onClick:a})})]});case h.D$.PurchaseSuccess:return(0,T.jsx)(d.Navbar,{transparent:!0,shadow:!1,children:(0,T.jsx)(d.Navbar.RightAccessory,{children:(0,T.jsx)(l.CloseButton,{background:"bright",onClick:a})})});case h.D$.Landing:default:return null}}),[a,e,s,o,v.isMobile,c]),k=(0,t.useMemo)((()=>{switch(s){case h.D$.Landing:return ne("features-background");case h.D$.PurchaseSuccess:case h.D$.ThreeDs:case h.D$.PurchaseForm:case h.D$.AlreadyActivePayment:case h.D$.AlreadyActiveAuth:default:return ne("default-background")}}),[s]),f=(0,t.useMemo)((()=>s===h.D$.PurchaseSuccess?"accent":"default"),[s]);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(u.Modal,{className:k,visible:r,onClose:a,noHeader:!0,rootClassName:"premium-pay-modal",scrollAreaRef:b,onScroll:y,children:[(0,T.jsx)("div",{className:ne("navbar"),children:x}),(0,T.jsx)("div",{className:ne("content"),children:A}),s!==h.D$.Landing&&(0,T.jsx)("div",{className:ne("background-container"),children:(0,T.jsx)(g.E,{theme:f})})]}),(0,T.jsx)(ee.p,{})]})},le=()=>(0,T.jsx)(t.StrictMode,{children:(0,T.jsx)(de,{})})}}]);