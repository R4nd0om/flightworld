"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[1497],{36653:function(e,t,i){i.d(t,{V:function(){return S},E:function(){return L}});var o=i(34943),n=i(76588),a=i(80472),r=i(82525),l=i(71694),s=i(23570),c=i(79403),d=i(23927),p=i(35555),u=i(35529),m=i(34966);const y=(0,u.Record)({type:(0,u.Literal)("poi"),id:m.J}),k=(0,u.Record)({type:(0,u.Literal)("national_park"),id:m.J}),h=(0,u.Record)({type:(0,u.Literal)("city_pois"),id:u.String,blocks:(0,u.Array)(y)}),b=(0,u.Record)({type:(0,u.Literal)("premium")}),g=(0,u.Record)({type:(0,u.Literal)("national_parks_collection"),blocks:(0,u.Array)(k)}),x=(0,u.Record)({type:(0,u.Literal)("tours_collection"),title:u.String,blocks:(0,u.Array)(k)}),v=(0,u.Record)({type:(0,u.Literal)("city_poi"),id:u.String,blocks:(0,u.Array)(y)}),C=(0,u.Record)({type:(0,u.Literal)("price_map")}),T=(0,u.Record)({type:(0,u.Literal)("city_poi_collection"),id:u.String,blocks:(0,u.Array)(y)}),f=(0,u.Record)({type:(0,u.Literal)("national_park_poi"),id:m.J,blocks:(0,u.Array)(y)}),P=(0,u.Record)({type:(0,u.Literal)("choose_destination")}),j=(0,u.Record)({type:(0,u.Literal)("poi_compilation_v1")}),B=(0,u.Record)({id:m.J,type:(0,u.Literal)("poi_compilation_v2")}),_=(0,u.Union)(h,b,g,x,v,C,T,f,P,j,B,u.Unknown),N=(0,u.Record)({blocks:(0,u.Array)(_)});let S;!function(e){let t,i;!function(e){e.CityPois="city_pois",e.Premium="premium",e.NationalParksCollection="national_parks_collection",e.ToursCollection="tours_collection",e.CityPoi="city_poi",e.PriceMap="price_map",e.CityPoiCollection="city_poi_collection",e.NationalParkPoi="national_park_poi",e.ChooseDestination="choose_destination",e.PoiCompilationV1="poi_compilation_v1",e.PoiCompilationV2="poi_compilation_v2",e.HotTickets="hot_tickets",e.Unknown="unknown"}(t||(t={})),e.BlockType=t,function(e){e.POI="POI",e.City="City",e.NationalPark="NationalPark",e.Island="Island",e.Region="Region",e.Country="Country",e.Unknown="Unknown"}(i||(i={})),e.LocationType=i}(S||(S={}));const{EXPLORE_PERSONALIZATION_URL_V1:I}=s.l.outputs,{urlWithApiHost:w}=r.B.outputs,{$brand:E}=c.U.outputs,{$localeDeprecated:M}=d.z.outputs,{$auid:A}=p.Y.outputs,L=(0,o.MR)({sid:"-ifpd9f",fn:()=>(0,n.s5)({name:"main_screen",initialData:[],params:(0,o.MR)({sid:"-1vmlo6",fn:()=>(0,n.t6)()}),request:{method:"GET",url:w(l.Nv`${I}/blocks/main_screen.json`),query:{source:(0,o.$e)({and:[{brand:E,locale:M,auid:A}],or:{sid:"binvy7"}}),fn:(e,t)=>{let{originIata:i}=e,{brand:o,locale:n,auid:a}=t;return{origin:i,brand:o,locale:n,auid:a??""}}}},response:{contract:(0,a.v)(N),mapData:e=>{let{result:t}=e;return t.blocks.map((0,u.match)((0,u.when)(P,(()=>({type:S.BlockType.ChooseDestination}))),(0,u.when)(b,(()=>({type:S.BlockType.Premium}))),(0,u.when)(C,(()=>({type:S.BlockType.PriceMap}))),(0,u.when)(j,(()=>({type:S.BlockType.PoiCompilationV1}))),(0,u.when)(B,(e=>({type:S.BlockType.PoiCompilationV2,compilationId:e.id}))),(0,u.when)(f,(e=>({type:S.BlockType.NationalParkPoi,parkId:e.id,poiId:e.blocks[0].id}))),(0,u.when)(g,(e=>({type:S.BlockType.NationalParksCollection,parkIds:e.blocks.map((e=>e.id))}))),(0,u.when)(x,(e=>({type:S.BlockType.ToursCollection,title:e.title,parkIds:e.blocks.map((e=>e.id))}))),(0,u.when)(v,(e=>({type:S.BlockType.CityPoi,iata:e.id,poiId:e.blocks[0].id}))),(0,u.when)(h,(e=>({type:S.BlockType.CityPois,iata:e.id,poiIds:e.blocks.map((e=>e.id))}))),(0,u.when)(T,(e=>({type:S.BlockType.CityPoiCollection,iata:e.id,poiIds:e.blocks.map((e=>e.id))}))),(0,u.when)(u.Unknown,(()=>({type:S.BlockType.Unknown}))))).filter((e=>e.type!==S.BlockType.Unknown))}}})})},4284:function(e,t,i){i.d(t,{h:function(){return pe}});var o={};i.r(o),i.d(o,{$list:function(){return Q},$preview:function(){return J},fetchFx:function(){return ee},notFetched:function(){return oe}});var n={};i.r(n),i.d(n,{$lists:function(){return re},$previews:function(){return ae},fetchFx:function(){return le},notFetched:function(){return de}});var a=i(34943),r=i(8681),l=i(49767),s=i(79403),c=i(53088),d=i(53788),p=i(1445),u=i(85045),m=i(35529),y=i(34966);const k=(0,m.Record)({name:(0,m.Dictionary)(y.C,m.String),slug:m.String,iata:m.String.nullable()}),h=(0,m.Dictionary)(m.String,m.String),b=(0,m.Record)({value:m.Number,currency:m.String}),g=(0,m.Record)({main_tag:h,entity:k.extend({type:(0,m.Literal)("POI")}).nullable(),content:(0,m.Record)({ark_id:y.J,poi_id:m.Number,tabs_entities:(0,m.Array)((0,m.Record)({id:m.Number}).optional()),description:(0,m.Dictionary)(m.String,m.String),images:(0,m.Array)((0,m.Record)({image_url:m.String}))}),min_price:b.nullable()}),x=(0,m.Record)({main_tag:h,entity:k.extend({type:(0,m.Literal)("CITY")}).nullable(),content:(0,m.Record)({ark_id:y.J}),min_price:b.nullable()}),v=(0,m.Record)({main_tag:h,entity:k.extend({type:(0,m.Literal)("NATIONAL_PARK")}).nullable(),content:(0,m.Record)({ark_id:y.J,description:(0,m.Dictionary)(m.String,m.String),images_urls:(0,m.Array)(m.String)}),min_price:b.nullable()}),C=(0,m.Record)({main_tag:h,entity:k.extend({type:(0,m.Literal)("ISLAND")}).nullable(),content:(0,m.Record)({ark_id:y.J}),min_price:b.nullable()}),T=(0,m.Record)({main_tag:h,entity:k.extend({type:(0,m.Literal)("COUNTRY")}).nullable(),content:(0,m.Record)({ark_id:y.J}),min_price:b.nullable()}),f=(0,m.Record)({main_tag:h,entity:k.extend({type:(0,m.Literal)("REGION")}).nullable(),content:(0,m.Record)({ark_id:y.J}),min_price:b.nullable()}),P=(0,m.Union)(g,x,v,C,m.Unknown),j=(0,m.Record)({locations_main_page_v2:(0,m.Array)(P)});var B=i(36653),_=i(27856),N=i.n(_);function S(e){try{const t=N().sanitize(e),i=document.createElement("div");return i.innerHTML=t,i.textContent||""}catch(e){return""}}const I=(e,t)=>e.locations_main_page_v2.reduce(((e,i)=>{if(g.guard(i)){var o,n;const{entity:a,content:r,main_tag:l,min_price:s}=i;if(null===(o=r.tabs_entities)||void 0===o||null===(n=o[0])||void 0===n||!n.id)return e;e.pois[r.ark_id]={type:B.V.LocationType.POI,tag:l[t],iata:null==a?void 0:a.iata,name:null==a?void 0:a.name[t],slug:null==a?void 0:a.slug,id:r.ark_id,description:S(r.description[t]),images:r.images.map((e=>e.image_url)),layerId:r.tabs_entities[0].id,poiId:r.poi_id,price:s}}if(v.guard(i)){const{entity:o,content:n,main_tag:a,min_price:r}=i;e.parks[n.ark_id]={type:B.V.LocationType.NationalPark,tag:a[t],id:n.ark_id,name:null==o?void 0:o.name[t],slug:null==o?void 0:o.slug,iata:null==o?void 0:o.iata,description:S(i.content.description[t]),images:i.content.images_urls,price:r}}if(C.guard(i)){const{entity:o,content:n,main_tag:a,min_price:r}=i;e.islands[n.ark_id]={type:B.V.LocationType.Island,tag:a[t],iata:null==o?void 0:o.iata,name:null==o?void 0:o.name[t],slug:null==o?void 0:o.slug,id:n.ark_id,price:r}}if(x.guard(i)){const{entity:o,content:n,main_tag:a,min_price:r}=i;null!=o&&o.iata&&(e.cities[o.iata]={type:B.V.LocationType.City,tag:a[t],iata:null==o?void 0:o.iata,name:null==o?void 0:o.name[t],slug:null==o?void 0:o.slug,id:n.ark_id,price:r})}if(T.guard(i)){const{entity:o,content:n,main_tag:a,min_price:r}=i;e.countries[n.ark_id]={type:B.V.LocationType.Country,tag:a[t],iata:null==o?void 0:o.iata,name:null==o?void 0:o.name[t],slug:null==o?void 0:o.slug,id:n.ark_id,price:r}}if(f.guard(i)){const{entity:o,content:n,main_tag:a,min_price:r}=i;e.regions[n.ark_id]={type:B.V.LocationType.Region,tag:a[t],iata:null==o?void 0:o.iata,name:null==o?void 0:o.name[t],slug:null==o?void 0:o.slug,id:n.ark_id,price:r}}return e}),{cities:{},pois:{},parks:{},islands:{},regions:{},countries:{}}),{$brand:w}=s.U.outputs,{$language:E}=l.l.outputs,{ariadneData:M}=r.a.inputs,{$currency:A}=c.y.outputs,{$market:L}=d.D.outputs,{$origin:R}=p.q.outputs,{$tripClass:O}=u._.outputs,U=(0,a.yM)({sid:"-di4x16"}),V=(0,a.MT)({},{sid:"yo7iiw"});(0,a.UP)({and:[{clock:U,target:V}],or:{sid:"r5bvnn"}});const $=(0,a.$e)({and:[{ids:V,language:E,brand:w,origin:R,market:L,currency:A,trip_class:O},e=>{let{ids:t,language:i,brand:o,origin:n,currency:a,market:r,trip_class:l}=e;return{brand:o,locales:[i],input:{ark_ids:t.arkIds??[],iatas:t.iatas??[],origin:(null==n?void 0:n.cityIata)??(null==n?void 0:n.iata)??"",market:r,currency:a,trip_class:l}}}],or:{sid:"cwclhj"}}),q=M({graphQL:{query:"\n  query GetLocationsMainPageV2($brand: Brand!, $locales: [String!], $input: LocationsV2Input!) {\n    locations_main_page_v2(\n      brand: $brand,\n      input: $input,\n    ) {\n      main_tag(filters: { locales: $locales })\n      entity {\n        type\n        name(filters: { locales: $locales })\n        slug\n        iata\n      }\n      content {\n        __typename\n        ... on POIContent {\n          ark_id\n          poi_id\n          tabs_entities {\n            id\n          }\n          description(filters: { locales: $locales })\n          images {\n            image_url\n          }\n        }\n        ... on NationalParkContent {\n          ark_id\n          description(filters: { locales: $locales })\n          images_urls\n        }\n        ... on CityContent {\n          ark_id\n        }\n        ... on IslandContent {\n          ark_id\n        }\n        ... on RegionContent {\n          ark_id\n        }\n        ... on CountryContent {\n          ark_id\n        }\n      }\n      min_price {\n        value\n        currency\n      }\n    }\n  }\n",operationName:"locations_main_page_v2",variables:$},fetch:{clock:U},contract:j,mapResult:{source:E,fn:I},validate:{source:E,fn:(e,t)=>{let{result:i}=e;try{return I(i.data,t),!0}catch{return!1}}}});var z=i(73114),D=i(23927),F=i(90558),Z=i(82525),K=i(71694),Y=i(23570);const H=Y.l.outputs.EXPLORE_PERSONALIZATION_URL_V1,G={requestFx:F.R.inputs.createRequestEffect({method:"get",name:"requestPoiCompilationV1Fx",modificators:[Z.B.outputs.withApiHostFilling(K.Nv`${H}/poi_compilation.json`)]}),transformData:e=>{var t;return{title:e.title,places:(null===(t=e.pois)||void 0===t?void 0:t.map((e=>({locationId:e.location_ark_id,poiId:e.poi_ark_id}))))??[]}}},W=Y.l.outputs.EXPLORE_PERSONALIZATION_URL_V2,X={requestFx:F.R.inputs.createRequestEffect({method:"get",name:"requestPoiCompilationV2Fx",modificators:[Z.B.outputs.withApiHostFilling(K.Nv`${W}/poi_compilation.json`)]}),transformData:e=>(e.compilations||[]).reduce(((e,t)=>{var i;return e[t.ark_id]={title:t.title,places:(null===(i=t.pois)||void 0===i?void 0:i.map((e=>({locationId:e.location_ark_id,poiId:e.poi_ark_id}))))??[]},e}),{})},J=(0,a.MT)(null,{sid:"6afs93"}),Q=(0,a.MT)(null,{sid:"-xu6315"}),ee=(0,a.ub)({and:{source:{brand:s.U.outputs.$brand,locale:D.z.outputs.$localeDeprecated},mapParams:(e,t)=>{let{limit:i}=e,{brand:o,locale:n}=t;return{data:{limit:i,brand:o,locale:n}}},effect:G.requestFx},or:{sid:"-hglgmr"}}),{limited:te,__:ie}=(0,a.Vl)({and:[(0,a.MR)({sid:"4fri4n",fn:()=>(0,z.Ph)(ee)}),{limited:e=>void 0!==e.config.params.limit}],or:{sid:"-b6g9h"}});(0,a.UP)({and:[{clock:te,fn:e=>G.transformData(e.data),target:J}],or:{sid:"-28ncu7"}}),(0,a.UP)({and:[{clock:ie,fn:e=>G.transformData(e.data),target:Q}],or:{sid:"-1tswtg"}});const oe=(0,a.yM)({sid:"-knfboa"});var ne=i(35555);const ae=(0,a.MT)(null,{sid:"-ki98vk"}),re=(0,a.MT)(null,{sid:"-4esss"}),le=(0,a.ub)({and:{source:{brand:s.U.outputs.$brand,locale:D.z.outputs.$localeDeprecated,auid:ne.Y.outputs.$auid},mapParams:(e,t)=>{let{limit:i,ark_ids:o}=e,{brand:n,locale:a,auid:r}=t;return{data:{limit:i,brand:n,locale:a,auid:r,ark_ids:o}}},effect:X.requestFx},or:{sid:"-kjc489"}}),{limited:se,__:ce}=(0,a.Vl)({and:[(0,a.MR)({sid:"-75sckd",fn:()=>(0,z.Ph)(le)}),{limited:e=>void 0!==e.config.params.limit}],or:{sid:"-bwqayh"}});(0,a.UP)({and:[{clock:se,fn:e=>X.transformData(e.data),target:ae}],or:{sid:"-ibzfd2"}}),(0,a.UP)({and:[{clock:ce,fn:e=>X.transformData(e.data),target:re}],or:{sid:"-i8onsw"}});const de=(0,a.yM)({sid:"-mb1437"}),pe={locations:{fetch:U,data:q},poiCompilation:{v1:o,v2:n}}},45878:function(e,t,i){i.d(t,{zQ:function(){return c},p$:function(){return r},BO:function(){return n},x9:function(){return a}});var o=i(36653);const n={[o.V.BlockType.ChooseDestination]:{square:!1,cols:2},[o.V.BlockType.PriceMap]:{square:!1,cols:2},[o.V.BlockType.CityPoi]:{square:!0,cols:1},[o.V.BlockType.NationalParkPoi]:{square:!0,cols:1},[o.V.BlockType.CityPois]:{square:!0,cols:1},[o.V.BlockType.Premium]:{square:!1,cols:1},[o.V.BlockType.CityPoiCollection]:{square:!1,cols:2},[o.V.BlockType.NationalParksCollection]:{square:!1,cols:2},[o.V.BlockType.ToursCollection]:{square:!1,cols:2},[o.V.BlockType.PoiCompilationV1]:{square:!1,cols:2},[o.V.BlockType.PoiCompilationV2]:{square:!1,cols:2},[o.V.BlockType.HotTickets]:{square:!1,cols:1},[o.V.BlockType.Unknown]:{}};function a(e,t){const i=e.filter((e=>function(e,t){switch(e.type){case o.V.BlockType.ChooseDestination:case o.V.BlockType.PriceMap:case o.V.BlockType.Premium:case o.V.BlockType.NationalParksCollection:case o.V.BlockType.ToursCollection:case o.V.BlockType.PoiCompilationV1:case o.V.BlockType.PoiCompilationV2:return!0;case o.V.BlockType.CityPoi:return Boolean(t.pois[e.poiId]&&Object.values(t.cities).find((t=>t.iata===e.iata)));case o.V.BlockType.NationalParkPoi:return Boolean(t.pois[e.poiId]&&t.parks[e.parkId]);case o.V.BlockType.CityPois:case o.V.BlockType.CityPoiCollection:return Boolean(Object.values(t.cities).find((t=>t.iata===e.iata)));default:return!1}}(e,t)));return function(e,t){const i=e=>Array.isArray(e),o=[];return e.forEach((e=>{let{item:t,cols:n}=e;if(2===n)return void o.push(t);const a=o.findIndex((e=>i(e)&&e.length<2));-1===a?o.push([t]):o[a].push(t)})),o.filter((e=>!i(e)||2===e.length)).flat(1)}(i.map((e=>({item:e,cols:n[e.type].cols}))))}function r(e){let t=[],i=[];return e.forEach((e=>{switch(e.type){case o.V.BlockType.CityPois:case o.V.BlockType.CityPoiCollection:i=i.concat(e.iata),t=t.concat(e.poiIds);break;case o.V.BlockType.CityPoi:i=i.concat(e.iata),t=t.concat(e.poiId);break;case o.V.BlockType.NationalParkPoi:t=t.concat(e.parkId,e.poiId);break;case o.V.BlockType.NationalParksCollection:case o.V.BlockType.ToursCollection:t=t.concat(e.parkIds)}})),{arkIds:t,iatas:i}}var l=i(44908),s=i.n(l);function c(e){const t=e.reduce(((e,t)=>(e.push(t.poiId),e.push(t.locationId),e)),[]);return s()(t)}},89339:function(e,t,i){i.r(t),i.d(t,{MainContentWidget:function(){return yi}});var o=i(67294),n=i(34840),a=i(94184),r=i.n(a),l={positioner:"SUUCJXpwdbx6qOxdoYA_",layout:"YrHZt599o3cfY8kkm6HP",item:"zzHeDc4V3KzW1l30vRJe",square:"uv7GNe8pHSk5HRXqJH5z",cols_1:"TzR_RLxXxWTrgWAVBKG7",cols_2:"n64p4ANMyIuGeqa1N7rj"},s=i(85893);const c=e=>{let{children:t,className:i}=e;return(0,s.jsx)("div",{className:r()(l.positioner,i),children:(0,s.jsx)("div",{className:l.layout,children:t})})};c.Item=e=>{let{children:t,square:i=!1,cols:o=1,className:n}=e;return(0,s.jsx)("div",{className:r()(l.item,i&&l.square,l[`cols_${o}`],n),children:t})};const d=e=>{let{className:t}=e;return(0,s.jsxs)("div",{className:r()("YjhbgLkUlk3oYc2AReFj",t),children:[(0,s.jsx)("div",{className:"ccIKmvOBfF9C3oqnE6vZ"}),(0,s.jsx)("div",{className:"A1a4VYyXmK0uyOKFrQRB"}),(0,s.jsx)("div",{className:"JRXGh9iOwfsL7EZzDcMg"})]})};const p=e=>{let{className:t}=e;return(0,s.jsxs)("div",{className:r()("sBhfLzZl5Q1LNv5VQR54",t),children:[(0,s.jsx)("div",{className:"cgoA_eZJM3IjHYs3w2OH"}),(0,s.jsx)("div",{className:"yPEOtbDpuCeHZ2YxJNGW"}),(0,s.jsx)("div",{className:"wK7oOwHm1m4x8vznm_4a"})]})};const u=new Array(4).fill("park"),m=()=>(0,s.jsxs)("div",{className:"fUIFq5KziJTMNViJBrPx",children:[(0,s.jsx)("div",{className:"sChttOpRw69BZElFWxOu"}),(0,s.jsx)("div",{className:"jn0__OiO2zDBIEQCMDM9"}),(0,s.jsx)("div",{className:"llzz7BJgb5fPaItB0CdQ",children:u.map(((e,t)=>(0,s.jsxs)("div",{className:"fIoOVEBpmBt1NbITnlRN",children:[(0,s.jsx)("div",{className:"fp5dnbZhNqGEJ76qhxbm"}),(0,s.jsx)("div",{className:"kfMtxeulBcd5PAfCtoSV"})]},t)))})]});const y=e=>{let{href:t,children:i,onClick:o,...n}=e;const a=r()("KWPoGkACMTpTVMBdnFfA",n.className);return t?(0,s.jsx)("a",{className:a,href:t,onClick:o,children:i}):(0,s.jsx)("button",{className:a,onClick:o,children:i})};const k=e=>{let{children:t}=e;return(0,s.jsx)("noindex",{className:"mtSVSrZMgvsRAkC5Q8Mj",children:t})};var h=i(866),b=i(88956),g=i(81468),x=i(20631),v=i(20658),C={nav:"OJ66Z7DfakdsBE0_lNGr",navButton:"Q4xxw4FFz_w7yH7lZn4p",icon:"WTyl449fWUq5VSrXZXlV",front:"VxY8Rc6Dv6XezK55gEMv"};const T=e=>{let{className:t,children:i}=e;return(0,s.jsx)("nav",{className:r()(C.nav,t),children:i})},f=e=>{let{onClick:t,disabled:i,children:o}=e;return(0,s.jsx)(x.Button,{className:C.navButton,priority:x.ButtonPriority.Secondary,disabled:i,onClick:t,children:o})};T.Back=e=>{const{t:t}=(0,g.useTranslation)("component_nav_button");return(0,s.jsxs)(f,{...e,children:[(0,s.jsx)(x.Icon16ControlsChevron,{className:r()(C.icon,C.back)}),(0,s.jsx)("span",{className:v.visuallyHidden,children:t("back")})]})},T.Forward=e=>{const{t:t}=(0,g.useTranslation)("component_nav_button");return(0,s.jsxs)(f,{...e,children:[(0,s.jsx)(x.Icon16ControlsChevron,{className:r()(C.icon,C.front)}),(0,s.jsx)("span",{className:v.visuallyHidden,children:t("forward")})]})};var P=i(88946),j=i(42657),B=i(29643);const _=[B.BreakpointName.Mobile];const N=e=>{let{children:t}=e;const i=(0,o.useRef)(null),n=o.Children.count(t),{scrollRef:a,itemWidth:l,canScrollForward:c,canScrollBack:d,notAllDesktopItemsVisible:p,handleScroll:u,handleScrollBack:m,handleScrollForward:y}=((e,t)=>{const{ref:i,isAlreadyRendered:n}=(0,x.useResizeObserver)(),a=(0,j.useCurrentBreakpoint)(B.breakpoints),r=(null==a?void 0:a.is(_))??!1,[l,s]=(0,o.useState)(0),[c,d]=(0,o.useState)(!1),[p,u]=(0,o.useState)(!0);(0,x.useIsomorphicLayoutEffect)((()=>{if(e.current&&i.current&&n&&!r){const t=36;s((e.current.clientWidth-t)/4)}}),[n,e,i,r,l]);const m=!r&&t>4||!1,y=(0,o.useCallback)((e=>{const{scrollLeft:o,scrollWidth:n,clientWidth:a}=e.target;m&&o>=t*(l+12)&&i.current&&(i.current.scrollLeft=0),m&&(d(o>0),u(o+a<n))}),[t,i,l,m]),k=l+12,h=(0,o.useCallback)((()=>{var e;null===(e=i.current)||void 0===e||e.scrollTo({left:i.current.scrollLeft-k,behavior:"smooth"})}),[i,k]),b=(0,o.useCallback)((()=>{var e;null===(e=i.current)||void 0===e||e.scrollTo({left:i.current.scrollLeft+k,behavior:"smooth"})}),[i,k]);return{scrollRef:i,itemWidth:r?0:l,canScrollBack:c,canScrollForward:p,notAllDesktopItemsVisible:m,handleScrollBack:h,handleScrollForward:b,handleScroll:y}})(i,n),k=p?t.concat(t):t;return(0,s.jsxs)("div",{className:"HbO7QfoVArgrVJwH8yjO",ref:i,"data-test-id":"collection-slider",children:[p&&(0,s.jsxs)(T,{className:"FRwIJ8fgbj4ArvdjPchU",children:[(0,s.jsx)(T.Back,{onClick:m,disabled:!d}),(0,s.jsx)(T.Forward,{onClick:y,disabled:!c})]}),(0,s.jsx)("ul",{className:r()("PPJeWjmxRDE9v89_1ZV4",p&&"qz1IEWmUScE9_Kn2GW7u"),ref:a,onScroll:u,children:o.Children.map(k,((e,t)=>(0,s.jsx)("li",{className:r()(e.props.className,"ioZsfHgHPr6X_8GXpJw3"),style:l?{width:l}:{},children:e},t)))})]})};N.Item=e=>{let{imageUrl:t,caption:i,className:o}=e;return(0,s.jsxs)("figure",{className:r()("bLbNbOwFztBV9rrRyohO",o),"data-test-id":"collection-item",children:[(0,s.jsx)(P.E,{className:"aUhvPQ_trdhsLQzKIhbs",source:t,caption:i,size:191}),(0,s.jsx)(x.Text,{className:"NzdMKXmRlo2QfvMgUF2x",tag:"figcaption",transformOnMobile:!0,type:x.TextType.Body1Semi,title:i,children:i})]})};const S=(e,t)=>{let{children:i,dataTestId:o}=e;return(0,s.jsx)("div",{ref:t,className:"Is2ypLEHxhRmRMu6vV_L","data-test-id":o,children:i})},I=(0,o.forwardRef)(S);I.Label=e=>{let{children:t}=e;return(0,s.jsx)(h.Text,{className:"PEBdE26yrKk2hRpnW_Pf",tag:"h2",type:h.TextType.Body2AllCaps,mobileType:h.TextType.Body3AllCaps,children:t})},I.Title=e=>{let{children:t,dataTest:i}=e;return(0,s.jsx)(h.Text,{className:"xnBhMR3bwg0PkIiK6mHo",tag:"h3",type:h.TextType.Title1Bold,mobileType:h.TextType.Title3Bold,testId:"collection-title","data-test":i,children:t})},I.Slider=N,I.Button=e=>{let{children:t,onClick:i}=e;return(0,s.jsx)(b.Button,{className:"MWl9u0M69vLhQPUS5kdg",size:b.ButtonSize.M,mod:b.ButtonMod.Custom,onClick:i,testId:"collection-button",children:t})};var w=i(49247),E=i(85430),M=i(22861),A=i(4541),L="pMMnj1r_6AYmKvgJYjYP";const R=parseInt("4400ms",10),O=e=>{let{places:t,currentPlace:i}=e;return(0,s.jsx)("div",{className:"JjbB_v0CdNCNzp7ktfZ_",children:t.map((e=>(0,s.jsx)(P.E,{size:388,source:e.photo,caption:e.name,className:r()("Du50uucFqe7cQoyPCWCm",e===i?"GA7BPyGFRDO9X_1wpwjX":"yxKus7zi40kjArq5S0ha")},e.photo)))})};var U=i(29584);const V=e=>{let{title:t}=e;return(0,s.jsx)(U.BrandText,{className:"BXvQATkIuv98MMvxjydu",type:U.BrandTextType.Title1Bold,mobileType:U.BrandTextType.Title2Bold,tag:"h3",pretty:!1,children:t},t)},$=[B.BreakpointName.Mobile,B.BreakpointName.MobileLandscape],q=e=>{let{places:t,city:i,onPlaceChange:a}=e;const{name:r,price:l}=i,{t:c}=(0,g.useTranslation)("widget_main_content"),d=(0,j.useCurrentBreakpoint)(B.breakpoints),p=(null==d?void 0:d.is($))??!1,{currentPlace:u}=(e=>{const[t,i]=(0,o.useState)(e[0]);return(0,o.useEffect)((()=>{setTimeout((()=>{const o=(e.indexOf(t)+1)%e.length;i(e[o])}),R)}),[t,e]),{currentPlace:t}})(t),m=(0,n.eY)(A.mainContentPublicApi.outputs.$isMinPricesEnabled);(0,o.useEffect)((()=>{a&&a(u.id)}),[u,a]);const y=c("cityPois.buttonText",{cityName:r.vi||r.su});return(0,s.jsxs)("div",{className:"yb5UF_F3S08MKSRnmF8A",children:[(0,s.jsx)(O,{currentPlace:u,places:t}),(0,s.jsxs)("div",{className:"J_B6cM44MRuQnDAG_MUE",children:[(0,s.jsx)(h.Text,{className:"XCiKE5lAMacxbOlrkaSt",tag:"h2",type:h.TextType.Body3AllCaps,children:u.category}),(0,s.jsx)(V,{title:u.name}),m&&l?(0,s.jsxs)(b.Button,{className:L,size:p?b.ButtonSize.S:b.ButtonSize.M,mod:b.ButtonMod.Custom,testId:"city-pois-button",children:[(0,s.jsx)(b.Button.Icon,{className:"jNz_3tjd8xEm8OPAhZ7s",children:(0,s.jsx)(E.Icon24TransportPlane,{})}),(0,s.jsx)(b.Button.Label,{className:"g5dazxzlR4XGI9C3M0WG",children:(0,s.jsx)(g.Trans,{t:c,i18nKey:"cityPois.buttonTextWithPrice",values:{cityName:r.su},components:{price:(0,s.jsx)(M.A,{value:l.value,currency:l.currency,showCurrencySign:!0,mode:"standard","data-test-id":"city-pois-card-price"}),span:(0,s.jsx)("span",{className:"HPrnbiEFxCF7mDHBNfrQ"})}})})]}):(0,s.jsxs)(b.Button,{className:L,size:p?b.ButtonSize.S:b.ButtonSize.M,mod:b.ButtonMod.Custom,testId:"city-pois-button",children:[!p&&(0,s.jsx)(b.Button.Icon,{children:(0,s.jsx)(w.EmojiSparkles,{width:24,height:24})}),`${y}${p?" ›":""}`]})]})]})};var z=i(80625),D=i(31314),F="nvr3b37S0rA6y2I2nVC0";const Z=[B.BreakpointName.Mobile,B.BreakpointName.MobileLandscape],K=e=>{let{label:t,title:i,description:o,imageUrl:a,city:r,onClick:l}=e;const{t:c}=(0,g.useTranslation)("widget_main_content"),d=(0,n.eY)(A.mainContentPublicApi.outputs.$isMinPricesEnabled),p=(0,j.useCurrentBreakpoint)(B.breakpoints),u=(null==p?void 0:p.is(Z))??!1;return(0,s.jsxs)("div",{className:"cU5FbNUYadqqedThqrIY","data-test-id":"poi-card",children:[(0,s.jsx)(P.E,{className:"BvAOSR6seB6yPL29_Muq",source:a,caption:t,size:388}),(0,s.jsxs)("div",{className:"ysGl1Tb0SqxiBMkJ5zvt",children:[d&&r?(0,s.jsxs)(z.Badge,{className:"eGisI0ZiMRB5MJdsSiX7",size:u?z.BadgeSize.M:z.BadgeSize.L,color:z.BadgeColor.Custom,borderStyle:z.BadgeBorderStyle.Brick,children:[(0,s.jsx)(z.Badge.Icon,{children:(0,s.jsx)(E.Icon24TransportPlane,{className:"RYCwiwGLxihoI9JTY6Ia"})}),r.price?(0,s.jsx)("span",{className:F,children:(0,s.jsx)(g.Trans,{t:c,i18nKey:"cityPois.buttonTextWithPrice",values:{cityName:r.name.su},components:{price:(0,s.jsx)(M.A,{value:r.price.value,currency:r.price.currency,showCurrencySign:!0,mode:"standard","data-test-id":"city-poi-card-price"}),span:(0,s.jsx)("span",{className:"O7GHDKyPkKI41mKKzgHE"})}})}):(0,s.jsx)("span",{className:F,children:r.name.su})]}):(0,s.jsx)(h.Text,{tag:"h2",type:h.TextType.Body3AllCaps,className:"PB14ZmNsFghk2zmiHU5h",testId:"poi-card-name",children:t}),(0,s.jsx)(U.BrandText,{tag:"h3",type:U.BrandTextType.Title1Bold,className:"y5T6CqIehZFAiAaI0DfJ",pretty:!1,children:i}),(0,s.jsx)(h.Text,{tag:"p",type:h.TextType.Body2Paragraph,truncateMode:h.TruncateTextMode.TwoLines,className:"BY1RbxGhaeiVV28_5LEP",children:o})]}),l&&(0,s.jsx)(D.j,{className:"DWlz7ftXQjNuhzjIQ6En",onClick:l})]})};var Y={block:"oXn7gwPZdHgCJ1xLiPDP"};const H=[B.BreakpointName.Mobile,B.BreakpointName.MobileLandscape],G=()=>{const e=(0,j.useCurrentBreakpoint)(B.breakpoints),t=(null==e?void 0:e.is(H))??!1;return(0,s.jsxs)(c,{className:Y.layout,children:[(0,s.jsx)(c.Item,{className:Y.block,square:!0,children:(0,s.jsx)(d,{})}),!t&&(0,s.jsx)(c.Item,{className:Y.block,square:!0,children:(0,s.jsx)(d,{})}),(0,s.jsx)(c.Item,{cols:2,children:(0,s.jsx)(m,{})}),(0,s.jsx)(c.Item,{className:Y.block,square:!0,children:(0,s.jsx)(p,{})}),!t&&(0,s.jsx)(c.Item,{className:Y.block,square:!0,children:(0,s.jsx)(p,{})})]})};var W=i(36653),X=i(41671),J=i(34943),Q=i(39018),ee=i(79403),te=i(1445);const{forceDestinationChoice:ie}=te.q.inputs,oe=(0,J.yM)({sid:"-u8qac0"}),ne=(0,J.yM)({sid:"-k1e4y0"});(0,J.UP)({and:[{clock:oe,target:ie}],or:{sid:"-ppc2xv"}}),(0,J.UP)({and:[{clock:oe,filter:ee.U.outputs.$isWayAwayBrand,fn:()=>({type:"click_great_idea"}),target:Q.n.inputs.sendEvent}],or:{sid:"-pml3z2"}});const ae={outputs:{bannerClicked:oe,bannerShowed:ne}};var re=i(51081),le=i(10924);let se;!function(e){let t,i,o;!function(e){e.Showed="showed",e.Clicked="clicked",e.Opened="opened",e.Shown="shown"}(t||(t={})),e.Action=t,function(e){e.ZeroState="zero_state",e.PoiCollection="poi_collection",e.PremiumPurchase="premium_purchase"}(i||(i={})),e.Category=i,function(e){e.ChooseDestination="choose_destination",e.PremiumPromo="premium_promo",e.PriceMap="price_map",e.LocationsBigCard="locations_big_card",e.PoiBigCard="poi_big_card",e.CityPois="city_pois",e.PoiCollection="poi_collection",e.LocationsCollection="locations_collection",e.Screen="screen",e.EntryPoint="entry_point"}(o||(o={})),e.Label=o}(se||(se={}));const ce=(0,n.Bq)({and:[],or:{sid:"-36cb80"}}),de=(0,J.MT)(null,{sid:"-fz0mcr"}).on(ce.state.updates,((e,t)=>t));le.I.inputs.createReporter({data:{category:se.Category.ZeroState,label:se.Label.ChooseDestination,action:se.Action.Showed,service:re.Service.Explore}})({clock:(0,J.UP)({and:[{clock:ae.outputs.bannerShowed,source:{origin:te.q.outputs.$origin,params:de},fn:e=>{let{origin:t,params:i}=e;return{origin:null==t?void 0:t.iata,blockOrder:null==i?void 0:i.order}}}],or:{sid:"-vvljvd"}}),payload:e=>({pageName:"main",userEvent:!1,source:null,...e})}),le.I.inputs.createReporter({data:{category:se.Category.ZeroState,label:se.Label.ChooseDestination,action:se.Action.Clicked,service:re.Service.Explore}})({clock:(0,J.UP)({and:[{clock:ae.outputs.bannerClicked,source:{origin:te.q.outputs.$origin,params:de},fn:e=>{let{origin:t,params:i}=e;return{origin:null==t?void 0:t.iata,blockOrder:null==i?void 0:i.order}}}],or:{sid:"-uh0ha5"}}),payload:e=>({pageName:"main",userEvent:!0,source:null,...e})});const pe={Gate:ce};var ue={root:"qN51E3ubuv67uKUyfFD3",heading:"hP0wERRWOxmaGFBpa8tJ",description:"lRXgapwtvbyiURjDlAmq",icon:"zmN8ULbVeIs6_hsD2vBL"};const me=e=>{let{order:t}=e;(0,n.DD)(pe.Gate,{order:t});const{t:i}=(0,g.useTranslation)("widget_main_content"),{bannerClicked:o,bannerShowed:a}=(0,n.eY)({bannerClicked:ae.outputs.bannerClicked,bannerShowed:ae.outputs.bannerShowed}),r=(0,X.LT)(a);return(0,s.jsxs)("div",{className:ue.root,ref:r,"data-test-id":"choose-destination-block",children:[(0,s.jsx)(E.Icon24TransportPlane,{className:ue.icon}),(0,s.jsxs)("div",{className:ue.wrapper,children:[(0,s.jsx)(h.Text,{className:ue.heading,tag:"h2",type:h.TextType.Title1Bold,mobileType:h.TextType.Title3Bold,children:i("chooseDestination.heading")}),(0,s.jsx)(h.Text,{className:ue.description,tag:"p",type:h.TextType.Title3Regular,mobileType:h.TextType.Body1Regular,children:i("chooseDestination.description")})]}),(0,s.jsx)(b.Button,{inline:!0,className:ue.button,size:b.ButtonSize.M,onClick:o,testId:"choose-destination-button",children:i("chooseDestination.buttonText")})]})};var ye=i(91486),ke=i(31087);const he=(0,J.yM)({sid:"-ls3xwp"}),be=(0,J.yM)({sid:"i3opm0"});(0,J.UP)({and:[{clock:be,fn:e=>{let{poi:t,location:i}=e;return{poi:t,location:i,trapSource:ke.Ur.ZERO_STATE_POI_BIG_CARD,poiOpenSource:ke.sL.zeroState,directionSource:ye.yh.ZeroStateCityPoi}},target:A.mainContentPublicApi.inputs.placeClicked}],or:{sid:"-ryr6gz"}}),le.I.inputs.createReporter({data:{category:se.Category.ZeroState,label:se.Label.PoiBigCard,action:se.Action.Showed,service:re.Service.Explore}})({clock:(0,J.UP)({and:[{clock:he,source:{origin:te.q.outputs.$origin},filter:(e,t)=>{let{city:i}=t;return Boolean(i)},fn:(e,t)=>{let{origin:i}=e,{city:o,order:n}=t;return{origin:null==i?void 0:i.iata,destination:null==o?void 0:o.iata,locationId:null==o?void 0:o.id,blockOrder:n}}}],or:{sid:"-rxlt6i"}}),payload:e=>({pageName:"main",userEvent:!1,source:null,...e})});const ge={inputs:{blockShowed:he,placeClicked:be}};const xe=e=>{let{block:t,order:i}=e;const{city:a,poi:r}=(0,n.K3)({store:A.mainContentPublicApi.outputs.$locations,keys:[t],fn:e=>({city:e.cities[t.iata]??null,poi:e.pois[t.poiId]??null})}),{placeClicked:l,blockShowed:c}=(0,n.eY)({placeClicked:ge.inputs.placeClicked,blockShowed:ge.inputs.blockShowed}),d=(0,o.useCallback)((()=>{l({location:a,poi:r})}),[a,r,l]),p=(0,o.useCallback)((()=>{c({city:a,order:i})}),[a,i,c]),u=(0,X.LT)(p);return r&&a?(0,s.jsx)("div",{ref:u,className:"hgHwAAmNkEyT2TbfdhGL","data-test-id":"city-poi-card",children:(0,s.jsx)(K,{label:a.name.su,title:r.name.su,description:r.description,imageUrl:r.images[0],city:a,onClick:d})}):null};var ve=i(96799),Ce=i(13099),Te=i(77195);const fe=(0,J.yM)({sid:"-p3dp0a"}),Pe=(0,J.yM)({sid:"-gspxo7"}),je=(0,J.yM)({sid:"5sknbu"});(0,J.UP)({and:[{clock:je,fn:e=>{let{poi:t,location:i}=e;return{poi:t,location:i,trapSource:ke.Ur.ZERO_STATE_POI_COLLECTION,poiOpenSource:ke.sL.zeroState,directionSource:ye.yh.ZeroStateCityPoiCollection}},target:A.mainContentPublicApi.inputs.placeClicked}],or:{sid:"-9br2ut"}}),(0,J.UP)({and:[{clock:fe,fn:e=>{let{city:t}=e;return{iata:t.iata??"",cityIata:t.iata??"",name:t.name.su??"",type:ve.PlaceType.City}},target:[Te.H,te.q.inputs.fillDestination]}],or:{sid:"-8tlv9w"}}),(0,J.UP)({and:[{clock:fe,filter:ee.U.outputs.$isWayAwayBrand,fn:e=>{let{city:t}=e;return{type:"open_discover",city:t.name.su}},target:Q.n.inputs.sendEvent}],or:{sid:"-8c0gac"}}),(0,J.UP)({and:[{clock:fe,fn:()=>ye.yh.ZeroStateCityPoiCollection,target:Ce.Q.inputs.directionSourceUpdated}],or:{sid:"-7uytw5"}}),le.I.inputs.createReporter({data:{category:se.Category.ZeroState,label:se.Label.PoiCollection,action:se.Action.Showed,service:re.Service.Explore}})({clock:(0,J.UP)({and:[{clock:Pe,source:{origin:te.q.outputs.$origin},fn:(e,t)=>{let{origin:i}=e,{city:o,order:n}=t;return{origin:null==i?void 0:i.iata,destination:null==o?void 0:o.iata,blockOrder:n}}}],or:{sid:"48rini"}}),payload:e=>({pageName:"main",userEvent:!1,source:null,...e})});const Be={inputs:{discoverButtonClicked:fe,blockShowed:Pe,placeClicked:je}},_e=e=>{let{block:t,order:i}=e;const{t:a}=(0,g.useTranslation)("widget_main_content"),{city:r,pois:l}=(0,n.K3)({store:A.mainContentPublicApi.outputs.$locations,keys:[t],fn:e=>({city:e.cities[t.iata]??null,pois:t.poiIds.map((t=>e.pois[t]??null)).filter(Boolean)})}),{placeClicked:c,discoverButtonClicked:d,blockShowed:p,isMinPricesFlagEnabled:u}=(0,n.eY)({placeClicked:Be.inputs.placeClicked,discoverButtonClicked:Be.inputs.discoverButtonClicked,blockShowed:Be.inputs.blockShowed,isMinPricesFlagEnabled:A.mainContentPublicApi.outputs.$isMinPricesEnabled}),m=(0,o.useCallback)((()=>{d({city:r})}),[r,d]),k=(0,o.useCallback)((()=>{p({city:r,order:i})}),[r,i,p]),h=(0,X.LT)(k);return r&&l.length?(0,s.jsxs)(I,{ref:h,dataTestId:"city-poi-collection",children:[(0,s.jsx)(I.Label,{children:a("cityPoiCollection.label")}),(0,s.jsx)(I.Title,{dataTest:r.name.su,children:a("cityPoiCollection.title",{cityName:r.name.ro??r.name.su})}),(0,s.jsx)(I.Slider,{children:l.map((e=>(0,s.jsx)(y,{onClick:()=>c({location:r,poi:e}),children:(0,s.jsx)(I.Slider.Item,{caption:e.name.su,imageUrl:e.images[0]})},e.id)))}),u&&r.price?(0,s.jsx)(I.Button,{onClick:m,children:(0,s.jsx)(b.Button.Label,{children:(0,s.jsx)(g.Trans,{t:a,i18nKey:"cityPoiCollection.buttonTextWithPrice",components:{price:(0,s.jsx)(M.A,{value:r.price.value,currency:r.price.currency,showCurrencySign:!0,mode:"standard","data-test-id":"city-poi-collection-price"})}})})}):(0,s.jsxs)(I.Button,{onClick:m,children:[(0,s.jsx)(b.Button.Icon,{children:(0,s.jsx)(w.EmojiSparkles,{width:24,height:24})}),(0,s.jsx)(b.Button.Label,{children:a("cityPoiCollection.buttonText",{cityName:r.name.vi||r.name.su})})]})]}):null};var Ne=i(97650);const Se=(0,J.MT)({},{sid:"4lgelh"}),Ie=(0,J.yM)({sid:"7q4qkb"}),we=(0,J.yM)({sid:"-ov8rit"}),Ee=(0,J.UP)({and:[{clock:we,source:{origin:te.q.outputs.$origin,seenPois:Se},filter:(e,t)=>{let{seenPois:i}=e,{id:o,isInView:n}=t;return Boolean(!i[o]&&n)},fn:(e,t)=>{let{origin:i}=e,{id:o,city:n,order:a}=t;return{origin:null==i?void 0:i.iata,destination:null==n?void 0:n.iata,blockOrder:a,poiId:o}}}],or:{sid:"5kustq"}});Se.on(Ee,((e,t)=>{let{poiId:i}=t;return{...e,[i]:!0}})),le.I.inputs.createReporter({data:{category:se.Category.ZeroState,label:se.Label.CityPois,action:se.Action.Showed,service:re.Service.Explore}})({clock:Ee,payload:e=>({pageName:"main",userEvent:!1,source:null,...e})}),(0,J.UP)({and:[{clock:Ie,fn:e=>{let{city:t}=e;return{iata:t.iata??"",cityIata:t.iata??"",name:t.name.su??"",type:ve.PlaceType.City}},target:[Te.H,te.q.inputs.fillDestination]}],or:{sid:"jidoea"}}),(0,J.UP)({and:[{clock:Ie,filter:ee.U.outputs.$isWayAwayBrand,fn:e=>{let{city:t}=e;return{type:"open_discover",city:t.name.su}},target:Q.n.inputs.sendEvent}],or:{sid:"jzz3du"}}),(0,J.UP)({and:[{clock:Ie,fn:()=>ye.yh.ZeroStateCityPois,target:Ce.Q.inputs.directionSourceUpdated}],or:{sid:"kh0ps1"}});const Me={inputs:{cardClicked:Ie,poiChanged:we}};const Ae=e=>{let{block:t,order:i}=e;const{city:a,places:r}=(0,n.K3)({store:A.mainContentPublicApi.outputs.$locations,keys:[t],fn:e=>({city:e.cities[t.iata]??null,places:t.poiIds.map((t=>e.pois[t]??null)).filter(Boolean).map((e=>({id:e.id,category:e.tag,name:e.name.su,photo:e.images[0]})))})}),{poiChanged:l,cardClicked:c}=(0,n.eY)({poiChanged:Me.inputs.poiChanged,cardClicked:Me.inputs.cardClicked}),[p,u]=(0,Ne.YD)({threshold:.5}),m=(0,o.useCallback)((e=>{l({id:e,city:a,order:i,isInView:u})}),[a,i,u,l]),y=(0,o.useCallback)((()=>{c({city:a})}),[a,c]);return a&&r.length?(0,s.jsx)("div",{ref:p,className:"tRQ1Qir3exHHZEASHIXa",onClick:y,"data-test-id":"pois-card","data-test":a.name.su,children:(0,s.jsx)(q,{places:r,city:a,onPlaceChange:m})}):(0,s.jsx)(d,{})};var Le=i(23190);const Re=(0,J.yM)({sid:"-h02ozy"}),Oe=(0,J.yM)({sid:"-15s8zi"});(0,J.UP)({and:[{clock:Re,fn:()=>ye.yh.ZeroStateCityLocationsCollection,target:Ce.Q.inputs.directionSourceUpdated}],or:{sid:"-dv0a6e"}}),(0,J.UP)({and:[{clock:Re,filter:ee.U.outputs.$isWayAwayBrand,fn:e=>{let{park:t}=e;return{type:"open_sight",name:null==t?void 0:t.name.su}},target:[Te.H,Q.n.inputs.sendEvent]}],or:{sid:"-drpim8"}}),le.I.inputs.createReporter({data:{category:se.Category.ZeroState,label:se.Label.LocationsCollection,action:se.Action.Showed,service:re.Service.Explore}})({clock:(0,J.UP)({and:[{clock:Oe,source:{origin:te.q.outputs.$origin},fn:(e,t)=>{let{origin:i}=e,{order:o}=t;return{origin:null==i?void 0:i.iata,blockOrder:o,locationType:"national_park"}}}],or:{sid:"5dp75m"}}),payload:e=>({pageName:"main",userEvent:!1,source:null,...e})});const Ue={inputs:{parkClicked:Re,blockShowed:Oe}},{SpaNavigation:Ve}=Le.D.containers,$e=e=>{let{block:t,order:i}=e;const{t:a}=(0,g.useTranslation)("widget_main_content"),{parks:r}=(0,n.K3)({store:A.mainContentPublicApi.outputs.$locations,keys:[t],fn:e=>({parks:t.parkIds.map((t=>e.parks[t]??null)).filter(Boolean)})}),{parkClicked:l,blockShowed:c}=(0,n.eY)({parkClicked:Ue.inputs.parkClicked,blockShowed:Ue.inputs.blockShowed}),d=(0,o.useCallback)((e=>{l({park:e})}),[l]),p=(0,o.useCallback)((()=>{c({order:i})}),[i,c]),u=(0,X.LT)(p);return r.length?(0,s.jsxs)(I,{ref:u,dataTestId:"national-park-collection",children:[(0,s.jsx)(I.Label,{children:a("nationalParksCollection.label")}),(0,s.jsx)(I.Title,{children:a("nationalParksCollection.title")}),(0,s.jsx)(I.Slider,{children:r.map((e=>(0,s.jsx)(Ve,{children:(0,s.jsx)(y,{href:`parks/${e.slug}`,onClick:()=>d(e),children:(0,s.jsx)(I.Slider.Item,{caption:e.name.su,imageUrl:e.images[0]})})},e.id)))})]}):null},qe=(0,J.yM)({sid:"-te58mb"}),ze=(0,J.yM)({sid:"co15ym"});(0,J.UP)({and:[{clock:ze,fn:e=>{let{poi:t,location:i}=e;return{poi:t,location:i,trapSource:ke.Ur.ZERO_STATE_POI_BIG_CARD,poiOpenSource:ke.sL.zeroState,directionSource:ye.yh.ZeroStateCityPoi}},target:A.mainContentPublicApi.inputs.placeClicked}],or:{sid:"-lmf0g9"}}),le.I.inputs.createReporter({data:{category:se.Category.ZeroState,label:se.Label.LocationsBigCard,action:se.Action.Showed,service:re.Service.Explore}})({clock:(0,J.UP)({and:[{clock:qe,source:{origin:te.q.outputs.$origin},fn:(e,t)=>{let{origin:i}=e,{park:o,order:n}=t;return{origin:null==i?void 0:i.iata,blockOrder:n,locationType:"national_park",locationId:null==o?void 0:o.id}}}],or:{sid:"-lsi2v4"}}),payload:e=>({pageName:"main",userEvent:!1,source:null,...e})});const De={inputs:{blockShowed:qe,placeClicked:ze}};const Fe=e=>{let{block:t,order:i}=e;const{park:a,poi:r}=(0,n.K3)({store:A.mainContentPublicApi.outputs.$locations,keys:[t],fn:e=>({park:e.parks[t.parkId]??null,poi:e.pois[t.poiId]??null})}),{placeClicked:l,blockShowed:c}=(0,n.eY)({placeClicked:De.inputs.placeClicked,blockShowed:De.inputs.blockShowed}),d=(0,o.useCallback)((()=>{l({location:a,poi:r})}),[a,r,l]),p=(0,o.useCallback)((()=>{c({park:a,order:i})}),[a,i,c]),u=(0,X.LT)(p);return a&&r?(0,s.jsx)("div",{ref:u,className:"kSilkyNCkcm6ht2Roffq","data-test-id":"national-park-poi",children:(0,s.jsx)(K,{label:a.name.su,title:r.name.su,description:r.description,imageUrl:r.images[0],onClick:d})}):null},Ze=(0,J.yM)({sid:"-z7uvr"}),Ke=(0,J.yM)({sid:"-oq41f3"});(0,J.UP)({and:[{clock:Ze,fn:()=>ye.yh.ZeroStateCityLocationsCollection,target:Ce.Q.inputs.directionSourceUpdated}],or:{sid:"m0dlh9"}}),(0,J.UP)({and:[{clock:Ze,filter:ee.U.outputs.$isWayAwayBrand,fn:e=>{let{park:t}=e;return{type:"open_sight",name:null==t?void 0:t.name.su}},target:[Te.H,Q.n.inputs.sendEvent]}],or:{sid:"m3od1f"}}),le.I.inputs.createReporter({data:{category:se.Category.ZeroState,label:se.Label.LocationsCollection,action:se.Action.Showed,service:re.Service.Explore}})({clock:(0,J.UP)({and:[{clock:Ke,source:{origin:te.q.outputs.$origin},fn:(e,t)=>{let{origin:i}=e,{order:o}=t;return{origin:null==i?void 0:i.iata,blockOrder:o,locationType:"national_park"}}}],or:{sid:"-7kjhlr"}}),payload:e=>({pageName:"main",userEvent:!1,source:null,...e})});const Ye={inputs:{parkClicked:Ze,blockShowed:Ke}},{SpaNavigation:He}=Le.D.containers,Ge=e=>{let{block:t,order:i}=e;const{parks:a}=(0,n.K3)({store:A.mainContentPublicApi.outputs.$locations,keys:[t],fn:e=>({parks:t.parkIds.map((t=>e.parks[t]??null)).filter(Boolean)})}),{parkClicked:r,blockShowed:l}=(0,n.eY)({parkClicked:Ye.inputs.parkClicked,blockShowed:Ye.inputs.blockShowed}),c=(0,o.useCallback)((e=>{r({park:e})}),[r]),d=(0,o.useCallback)((()=>{l({order:i})}),[i,l]),p=(0,X.LT)(d);return a.length?(0,s.jsxs)(I,{ref:p,dataTestId:"tours-collection",children:[(0,s.jsx)(I.Title,{children:t.title}),(0,s.jsx)(I.Slider,{children:a.map((e=>(0,s.jsx)(He,{children:(0,s.jsx)(y,{href:`parks/${e.slug}`,onClick:()=>c(e),children:(0,s.jsx)(I.Slider.Item,{caption:e.name.su,imageUrl:e.images[0]})})},e.id)))})]}):null};var We=i(82455),Xe=i(19347),Je=i(77875),Qe=i(46845);const et=e=>{let{imageUrl:t,name:i,location:o,price:a,className:l}=e;const{t:c}=(0,g.useTranslation)("widget_main_content"),d=(0,n.eY)(A.mainContentPublicApi.outputs.$isMinPricesEnabled),p=`${i}, ${o}`;return(0,s.jsxs)("figure",{className:r()("GJ5fPj0pYb6Yr_44iw6c",l),"data-test-id":"poi-item",children:[(0,s.jsx)(P.E,{className:"oD6JpLorXlgeXYpCBuyI",source:t,caption:p,size:191}),(0,s.jsxs)("figcaption",{className:"pHq3rKuk00TOZhvofzbJ",title:p,children:[(0,s.jsx)(x.Text,{className:"XYkx2fX2lX2bN5mQeTE8",type:x.TextType.Body1Semi,transformOnMobile:!0,children:i}),(0,s.jsx)(x.Text,{className:"EBZ1bVocOEcABRhVfXNU",type:x.TextType.Body1Regular,mobileType:x.TextType.Body3Regular,testId:"poi-item-name",children:o}),d&&a&&(0,s.jsx)(x.Text,{className:"zZwIvzbyoFwp2CA8d3RG",type:x.TextType.Body1Regular,mobileType:x.TextType.Body3Regular,children:(0,s.jsx)(g.Trans,{t:c,i18nKey:"poiCompilation.minPrice",components:{price:(0,s.jsx)(M.A,{value:a.value,currency:a.currency,showCurrencySign:!0,mode:"standard","data-test-id":"poi-compilation-item-price"})}})})]})]})};var tt={root:"OPRL9CxwZOiRXE_ngSon"};const it=e=>{let{children:t,className:i}=e;return(0,s.jsx)("ul",{className:r()(tt.root,i),children:t})};it.Item=e=>{let{children:t,className:i}=e;return(0,s.jsx)("li",{className:r()(tt.item,i),children:t})};var ot=i(4284);const nt=(0,J.$e)({and:[ot.h.poiCompilation.v1.$preview,ot.h.poiCompilation.v2.$previews,ot.h.poiCompilation.v1.$list,ot.h.poiCompilation.v2.$lists,A.mainContentPublicApi.outputs.$locations,(e,t,i,o,n)=>({v1:{preview:e,list:i},v2:{previews:t,lists:o},locations:n})],or:{sid:"-uzebgj"}}),at=(0,J.yM)({sid:"-xnsz"}),rt=(0,J.yM)({sid:"-xyi75k"}),lt=(0,J.yM)({sid:"-3030a2"});(0,J.UP)({and:[{clock:lt,fn:e=>{let{place:t,source:i}=e;return{poi:t.poi,location:t.location,trapSource:ke.Ur.ZERO_STATE_POI_COLLECTION,poiOpenSource:"list"===i?ke.sL.poiCollection:ke.sL.zeroState,directionSource:ye.yh.ZeroStateCityPoiCollection}},target:A.mainContentPublicApi.inputs.placeClicked}],or:{sid:"6fq62l"}});const{createReporter:st}=le.I.inputs,ct=st({data:{category:se.Category.ZeroState,label:se.Label.PoiCollection,action:se.Action.Showed,service:re.Service.Explore}}),dt=st({data:{category:se.Category.PoiCollection,label:se.Label.Screen,action:se.Action.Opened,service:re.Service.Explore}});ct({clock:(0,J.UP)({and:[{clock:rt,source:{origin:te.q.outputs.$origin},fn:(e,t)=>{let{origin:i}=e,{title:o,order:n}=t;return{origin:null==i?void 0:i.iata,collectionName:o,blockOrder:n}}}],or:{sid:"-qjtnpp"}}),payload:e=>({pageName:"main",userEvent:!1,source:null,...e})}),dt({clock:(0,J.UP)({and:[{clock:at,fn:e=>{let{title:t}=e;return{collectionName:t}}}],or:{sid:"-plqexb"}}),payload:e=>({pageName:"main",userEvent:!0,source:null,...e})});var pt=i(65740);(0,pt.s)({source:at,if:e=>{let{ark_ids:t}=e;return Boolean(null==t?void 0:t.length)},then:ot.h.poiCompilation.v2.fetchFx.prepend((e=>({ark_ids:(null==e?void 0:e.ark_ids)||[]}))),else:ot.h.poiCompilation.v1.fetchFx.prepend((()=>({})))});const ut={outputs:{$data:nt,blockShowed:rt},inputs:{modalOpened:at,placeClicked:lt}};function mt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.reduce(((t,i)=>{let{poiId:o,locationId:n}=i;const a=e.find((e=>e.id===n)),r=e.find((e=>e.id===o));return r&&a&&t.push({poi:r,location:a}),t}),[])}const yt=e=>{let{block:t,order:i}=e;const{t:a}=(0,g.useTranslation)("widget_main_content"),{ref:r,modal:l,placeClicked:c,preview:d,list:p}=function(e){let{block:t,order:i}=e;const[a,r]=(0,o.useState)(!1),{isListLoading:l,blockShowed:s,placeClicked:c,modalOpened:d}=(0,n.eY)({isListLoading:ot.h.locations.data.$pending,blockShowed:ut.outputs.blockShowed,placeClicked:ut.inputs.placeClicked,modalOpened:ut.inputs.modalOpened}),{preview:p,list:u,title:m}=(0,n.K3)({store:ut.outputs.$data,keys:[t],fn:e=>{var i,o,n,a,r,l;let{v1:s,v2:c,locations:d}=e;const p=Object.values(d).flatMap((e=>Object.values(e)));var u,m,y;return t.type===W.V.BlockType.PoiCompilationV1?{preview:mt(p,null==s||null===(u=s.preview)||void 0===u?void 0:u.places),list:mt(p,null==s||null===(m=s.list)||void 0===m?void 0:m.places),title:(null===(y=s.preview)||void 0===y?void 0:y.title)||""}:{preview:mt(p,null==c||null===(i=c.previews)||void 0===i||null===(o=i[t.compilationId])||void 0===o?void 0:o.places),list:mt(p,null==c||null===(n=c.lists)||void 0===n||null===(a=n[t.compilationId])||void 0===a?void 0:a.places),title:(null==c||null===(r=c.previews)||void 0===r||null===(l=r[t.compilationId])||void 0===l?void 0:l.title)||""}}}),y=(0,o.useCallback)((()=>{r(!0),t.type===W.V.BlockType.PoiCompilationV1?d({title:m}):d({title:m,ark_ids:[t.compilationId]})}),[t,m,r,d]),k=(0,o.useCallback)((()=>{r(!1)}),[r]),h=(0,o.useCallback)((()=>{s({order:i,title:m})}),[s,i,m]),b=(0,X.LT)(h);return{modal:{visible:a,open:y,close:k},preview:{title:m,items:p},list:{loading:l,title:m,items:u},placeClicked:c,onShow:h,ref:b}}({block:t,order:i});return d.items.length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(I,{ref:r,dataTestId:"poi-compilation-collection",children:[(0,s.jsx)(I.Title,{children:d.title}),(0,s.jsx)(I.Slider,{children:d.items.map((e=>(0,s.jsx)(y,{onClick:()=>c({place:e,source:"preview"}),children:(0,s.jsx)(et,{imageUrl:e.poi.images[0],name:e.poi.name.su,location:e.location.name.su,price:e.location.price})},e.poi.id)))}),(0,s.jsx)(I.Button,{onClick:l.open,children:a("poiCompilation.buttonText")})]}),(0,s.jsxs)(We.Modal,{visible:l.visible,onClose:l.close,children:[(0,s.jsxs)(We.Modal.Navigation,{children:[(0,s.jsx)(Je.Navbar.Title,{title:p.title}),(0,s.jsx)(Je.Navbar.RightAccessory,{children:(0,s.jsx)(Qe.CloseButton,{onClick:l.close})})]}),p.loading?(0,s.jsx)(Xe.Spinner,{}):(0,s.jsx)(it,{children:p.items.map((e=>(0,s.jsx)(it.Item,{children:(0,s.jsx)(y,{onClick:()=>c({place:e,source:"list"}),children:(0,s.jsx)(et,{imageUrl:e.poi.images[0],name:e.poi.name.su,location:e.location.name.su,price:e.location.price})})},e.poi.id)))})]})]}):null};var kt=i(12972);const ht=e=>(0,s.jsx)(b.Button,{...e,mod:b.ButtonMod.Custom,size:b.ButtonSize.M,className:r()("JRO382Pzkh8iEK5w3Zgc",e.className)});const bt=()=>{const{t:e}=(0,g.useTranslation)("widget_main_content");return(0,s.jsxs)("section",{className:"puFc982wj3Hj7NblvgNE","data-test-id":"plus-promo",children:[(0,s.jsx)(h.Text,{className:"plCZcdXXG__hOYPO_vQk",tag:"h2",type:h.TextType.Body3AllCaps,children:e("plus.waPlus")}),(0,s.jsx)(kt.BurdGlassesLight,{className:"YgusYFadxXgepP3KB2Hw"}),(0,s.jsx)(U.BrandText,{tag:"h3",className:"qu_XLzvQOoBrRT4bNNcB",type:U.BrandTextType.Title1Bold,mobileType:U.BrandTextType.Title2Bold,children:e("plus.noPremiumTitle")}),(0,s.jsx)(h.Text,{tag:"p",className:"iLo4xhcHrYHApW1gzz8a",type:h.TextType.Body1Paragraph,mobileType:h.TextType.Body2Paragraph,children:e("plus.noPremiumDescription")}),(0,s.jsx)(ht,{className:"w4lytpPl7eSqYplgbAHQ",children:e("plus.openLandingButton")})]})};const gt=e=>{let{url:t}=e;const{t:i}=(0,g.useTranslation)("widget_main_content");return(0,s.jsxs)("section",{className:"mw1ZxobXlTWiT81yYvH7","data-test-id":"plus-summary",children:[(0,s.jsx)(h.Text,{className:"fE197ehKupVU76r4Omt4",tag:"h2",type:h.TextType.Body3AllCaps,children:i("plus.myPlus")}),(0,s.jsx)(kt.BurdGlassesLight,{className:"moPdHsT7Ctp4exbGbE_v"}),(0,s.jsx)(U.BrandText,{tag:"h3",className:"qsmaUZIfUDpYHO4z1EeK",type:U.BrandTextType.Title1Bold,mobileType:U.BrandTextType.Title2Bold,children:i("plus.premiumTitle")}),(0,s.jsx)(h.Text,{tag:"p",className:"ajGhrYyWV_CblyKGJQpz",type:h.TextType.Body1Paragraph,mobileType:h.TextType.Body2Paragraph,children:i("plus.premiumDescription")}),(0,s.jsx)(ht,{href:t,className:"iKxIl6wfG_usaiUu5p0U",children:i("plus.profileLink")})]})};const xt=(e,t)=>{let{children:i,onClick:o}=e;return(0,s.jsx)("div",{ref:t,className:"PtDqJWn4rHHvjXM7e0jZ",onClick:o,"data-test-id":"premium-banner",children:i})},vt=(0,o.forwardRef)(xt),Ct=[{tKey:"more.benefits.cashbackV1",Icon:E.Icon24PremiumPercent},{tKey:"more.benefits.supportV1",Icon:E.Icon24PremiumBubble},{tKey:"more.benefits.guides",Icon:E.Icon24PremiumNotes},{tKey:"more.benefits.locals",Icon:E.Icon24PremiumPin}],Tt=[{tKey:"more.benefits.cashbackAviaV2",Icon:E.Icon24PremiumPercent},{tKey:"more.benefits.cashbackRestV2",Icon:E.Icon24PremiumPercent},{tKey:"more.benefits.supportV2",Icon:E.Icon24PremiumBubble},{tKey:"more.benefits.locals",Icon:E.Icon24PremiumPin}];const ft=e=>{let{isAviaCashbackExperimentEnabled:t}=e;const{t:i}=(0,g.useTranslation)("widget_main_content"),o=t?Tt:Ct;return(0,s.jsxs)("section",{className:"r6m3RPU5S2eNXnjyLdh1","data-test-id":"more-promo",children:[(0,s.jsx)("div",{className:"ZcDDDdKrk7hqWkcOxqu2"}),(0,s.jsx)(h.Text,{type:h.TextType.Title3Bold,mobileType:h.TextType.Title4Semi,children:(0,s.jsx)("ul",{className:"WEmKNdMXPGoXQT3mopb3",children:o.map((e=>(0,s.jsx)("li",{className:"LOdOk3dkNTpDXjPavho_",children:(0,s.jsx)(g.Trans,{defaults:i(e.tKey),components:{icon:(0,s.jsx)(e.Icon,{className:"Fwk7FFTMY0Tm4C17NZeJ"})}})},e.tKey)))})}),(0,s.jsx)(ht,{className:"VrrdN6xa5dwlw78OQ1cb",children:i("more.openLandingButton")})]})};const Pt=e=>{let{brandName:t,title:i,description:o,url:n,buttonTitle:a,testId:r}=e;return(0,s.jsxs)("section",{className:"SZbzlqEXMx4Wam0iVHEy","data-test-id":r,children:[(0,s.jsx)(h.Text,{className:"dGNzySr1gsu2rbgz6roa",tag:"h2",type:h.TextType.Body3AllCaps,children:t}),(0,s.jsx)(h.Text,{tag:"h3",className:"kCaimPEF4cOT2udtGEEQ",type:h.TextType.Title1Bold,children:i}),(0,s.jsx)(h.Text,{tag:"p",className:"ebSGNbbxYGNO4CZkngDL",type:h.TextType.Body1Paragraph,mobileType:h.TextType.Body2Paragraph,children:o}),(0,s.jsx)(ht,{href:n,className:"zeQY91diW67EYr1AbtCH",children:a})]})},jt=e=>{let{url:t,isAviaCashbackExperimentEnabled:i}=e;const{t:o}=(0,g.useTranslation)("widget_main_content"),n=o("more.asMore"),a=o("more.premiumTitle"),r=o("more."+(i?"premiumDescriptionV2":"premiumDescriptionV1")),l=o("more.profileLink");return(0,s.jsx)(Pt,{brandName:n,title:a,description:r,buttonTitle:l,url:t,testId:"more-summary"})};const Bt=e=>{let{onClick:t}=e;const{t:i}=(0,g.useTranslation)("widget_main_content");return(0,s.jsxs)("header",{className:"BRpXqXbmMrSta6aGI9vQ",children:[(0,s.jsx)(h.Text,{transformOnMobile:!0,className:"WZ87kUkjxEOFzDpQzr4J",tag:"h2",type:h.TextType.Title2Bold,children:i("more.asMore")}),(0,s.jsxs)(b.Button,{className:"gpKdt6uewuB9MYto1ytS",size:b.ButtonSize.Custom,priority:b.ButtonPriority.Tertiary,onClick:t,children:[(0,s.jsx)(b.Button.Label,{type:h.TextType.Body1Semi,children:i("more.whatsThis")}),(0,s.jsx)(E.Icon16ControlsDisclosure,{})]})]})},_t=e=>{let{url:t}=e;const{t:i}=(0,g.useTranslation)("widget_main_content"),o=i("more.asMore"),n=i("more.expiredSubscription.premiumTitle"),a=i("more.expiredSubscription.premiumDescription"),r=i("more.expiredSubscription.profileLink");return(0,s.jsx)(Pt,{brandName:o,title:n,description:a,buttonTitle:r,url:t,testId:"more-expired"})};var Nt=i(63246),St=i(52172),It=i(36812),wt=i(23570),Et=i(71694),Mt=i(61863),At=i(9212);const{$isAnyPremiumActive:Lt}=It.b.outputs,{$isWayAwayBrand:Rt,$brand:Ot}=ee.U.outputs,{entryPointInteracted:Ut}=At.X.inputs,{MORE_PROFILE_PAGE_URL:Vt}=wt.l.outputs,{navigateTo:$t}=Le.D.inputs,qt=(0,J.yM)({sid:"jkgmy8"}),zt=(0,J.yM)({sid:"9fpj9b"}),Dt=(0,J.yM)({sid:"tmwzq3"}),Ft=(0,J.yM)({sid:"-2m882m"});(0,pt.s)({source:qt,if:Lt,then:Ft,else:Dt}),(0,J.UP)({and:[{clock:zt,target:Ft}],or:{sid:"-atmrfv"}}),(0,J.UP)({and:[{clock:Dt,fn:()=>Mt.N9.MainContent,target:Ut}],or:{sid:"-aqvsh2"}}),(0,J.UP)({and:[{clock:Dt,filter:Rt,fn:()=>({type:"info_cashback"}),target:Q.n.inputs.sendEvent}],or:{sid:"-ac1cgb"}});const Zt=Ot.map((e=>(0,Et.G1)(Vt,{brand:e})));(0,J.UP)({and:[{clock:Ft,source:Zt,fn:e=>({pathname:e,type:"reload"}),target:$t}],or:{sid:"-9tcca1"}});const Kt={outputs:{bannerClicked:qt,expiredSubscriptionBannerClicked:zt,$profileUrl:Zt}};var Yt=i(53788);const Ht=(0,J.yM)({sid:"-wei0sa"}),Gt=le.I.inputs.createReporter({data:{category:se.Category.ZeroState,label:se.Label.PremiumPromo,action:se.Action.Showed,service:re.Service.Explore}}),Wt=le.I.inputs.createReporter({data:{category:se.Category.PremiumPurchase,label:se.Label.EntryPoint,action:se.Action.Shown,service:re.Service.Explore}});Gt({clock:(0,J.UP)({and:[{clock:Ht,source:{origin:te.q.outputs.$origin},fn:(e,t)=>{let{origin:i}=e,{order:o}=t;return{origin:null==i?void 0:i.iata,blockOrder:o}}}],or:{sid:"-7na8fx"}}),payload:e=>({pageName:"main",userEvent:!1,source:null,...e})}),Wt({clock:(0,J.UP)({and:[{clock:Ht,source:Yt.D.outputs.$market}],or:{sid:"-6pqs8w"}}),payload:e=>({userEvent:!1,source:"main_screen",market:e})});const Xt={blockShowed:Ht},{$isWayAwayBrand:Jt,$isAviasalesBrand:Qt}=ee.U.outputs,{$isAnyPremiumActive:ei,$isPremiumExpired:ti}=It.b.outputs,{$appNotInited:ii}=Nt.y.outputs,oi=e=>{let{order:t}=e;const{ref:i}=function(e){const t=(0,n.eY)(Xt.blockShowed),i=(0,o.useCallback)((()=>{t({order:e})}),[t,e]);return{ref:(0,X.LT)(i)}}(t),{hasSubscription:a,isPremiumExpired:r,bannerClicked:l,expiredSubscriptionBannerClicked:c,profileUrl:p,isWayAwayBrand:u,isAviasalesBrand:m,isPlaceholder:y,isAviaCashbackExperimentEnabled:k}=(0,n.eY)({isWayAwayBrand:Jt,isAviasalesBrand:Qt,hasSubscription:ei,isPremiumExpired:ti,isPlaceholder:ii,isAviaCashbackExperimentEnabled:St.r.outputs.$isAviaCashbackExperimentEnabled,profileUrl:Kt.outputs.$profileUrl,bannerClicked:Kt.outputs.bannerClicked,expiredSubscriptionBannerClicked:Kt.outputs.expiredSubscriptionBannerClicked});return y?(0,s.jsx)(vt,{children:(0,s.jsx)(d,{})}):u?(0,s.jsx)(vt,{ref:i,onClick:l,children:a?(0,s.jsx)(gt,{url:p}):(0,s.jsx)(bt,{})}):m?a?(0,s.jsx)(vt,{ref:i,onClick:l,children:(0,s.jsx)(jt,{url:p,isAviaCashbackExperimentEnabled:k})}):r?(0,s.jsx)(vt,{ref:i,onClick:c,children:(0,s.jsx)(_t,{url:p})}):(0,s.jsxs)("div",{children:[(0,s.jsx)(Bt,{onClick:l}),(0,s.jsx)(vt,{ref:i,onClick:l,children:(0,s.jsx)(ft,{isAviaCashbackExperimentEnabled:k})})]}):null},ni=(0,J.yM)({sid:"-51y549"}),ai=(0,J.yM)({sid:"-erwrcg"});(0,J.UP)({and:[{clock:ai,target:[Te.H,te.q.inputs.fillDestination]}],or:{sid:"1qnltt"}}),(0,J.UP)({and:[{clock:ai,filter:ee.U.outputs.$isWayAwayBrand,fn:()=>({type:"open_price_map"}),target:Q.n.inputs.sendEvent}],or:{sid:"1teksm"}});const ri={outputs:{bannerShowed:ni,bannerClicked:ai}};var li=i(78031);const si=(0,n.Bq)({and:[],or:{sid:"-nir37v"}}),ci=(0,J.MT)(null,{sid:"g72gcy"}).on(si.state.updates,((e,t)=>t));le.I.inputs.createReporter({data:{category:se.Category.ZeroState,label:se.Label.PriceMap,action:se.Action.Showed,service:re.Service.Explore}})({clock:(0,J.UP)({and:[{clock:ri.outputs.bannerShowed,source:{origin:te.q.outputs.$origin,params:ci},fn:e=>{let{origin:t,params:i}=e;return{origin:null==t?void 0:t.iata,blockOrder:null==i?void 0:i.order}}}],or:{sid:"nc5mso"}}),payload:e=>({pageName:"main",userEvent:!1,source:null,...e})}),(0,J.UP)({and:[{clock:ri.outputs.bannerClicked,fn:()=>ye.yh.ZeroState,target:li.G.inputs.sourceSelected}],or:{sid:"-5a0qps"}});const di={Gate:si};const pi=e=>{let{order:t}=e;(0,n.DD)(di.Gate,{order:t});const{t:i}=(0,g.useTranslation)("widget_main_content"),{bannerShowed:a,bannerClicked:r}=(0,n.eY)({bannerShowed:ri.outputs.bannerShowed,bannerClicked:ri.outputs.bannerClicked}),l=(0,X.LT)(a),c=(0,o.useCallback)((()=>{return r((e=i("priceMapBanner.anywhere"),{type:ve.PlaceType.Anywhere,iata:"",name:e,weight:0}));var e}),[r,i]);return(0,s.jsxs)("div",{onClick:c,className:"uKwI5OwybrWratfWmL5b",ref:l,"data-test-id":"price-map-banner",children:[(0,s.jsx)(h.Text,{className:"PzP7sObJkazVxZPdK_6L",tag:"h2",type:h.TextType.Body3AllCaps,children:i("priceMapBanner.priceMap")}),(0,s.jsx)(h.Text,{className:"IOgOQxbvxNF5MKeO4SYR",type:h.TextType.Title1Bold,tag:"p",mobileType:h.TextType.Title3Bold,transformOnMobile:!0,children:i("priceMapBanner.planAdventure")}),(0,s.jsx)(b.Button,{className:"XFeDQsWjYlB4wMWhEPin",size:b.ButtonSize.M,mod:b.ButtonMod.Custom,testId:"price-map-banner-button",children:(0,s.jsx)(h.Text,{type:h.TextType.Body1Semi,children:i("priceMapBanner.exploreMap")})})]})};x.ComponentLayout.Small;var ui=i(45878);const mi=()=>{const e=(0,n.eY)(A.mainContentPublicApi.outputs.$visibleBlocks);return(0,s.jsx)(c,{className:Y.layout,children:e.map(((e,t)=>{const i=`${e.type}_${t}`,o=t+1;switch(e.type){case W.V.BlockType.ChooseDestination:return(0,s.jsx)(c.Item,{className:Y.block,...ui.BO[e.type],children:(0,s.jsx)(me,{order:o})},i);case W.V.BlockType.PriceMap:return(0,s.jsx)(c.Item,{className:Y.block,...ui.BO[e.type],children:(0,s.jsx)(pi,{order:o})},i);case W.V.BlockType.CityPoi:return(0,s.jsx)(c.Item,{className:Y.block,...ui.BO[e.type],children:(0,s.jsx)(xe,{block:e,order:o})},i);case W.V.BlockType.NationalParkPoi:return(0,s.jsx)(c.Item,{className:Y.block,...ui.BO[e.type],children:(0,s.jsx)(Fe,{block:e,order:o})},i);case W.V.BlockType.CityPois:return(0,s.jsx)(c.Item,{className:Y.block,...ui.BO[e.type],children:(0,s.jsx)(Ae,{block:e,order:o})},i);case W.V.BlockType.Premium:return(0,s.jsx)(c.Item,{className:Y.block,...ui.BO[e.type],children:(0,s.jsx)(oi,{order:o})},i);case W.V.BlockType.CityPoiCollection:return(0,s.jsx)(c.Item,{...ui.BO[e.type],children:(0,s.jsx)(_e,{block:e,order:o})},i);case W.V.BlockType.NationalParksCollection:return(0,s.jsx)(c.Item,{...ui.BO[e.type],children:(0,s.jsx)($e,{block:e,order:o})},i);case W.V.BlockType.ToursCollection:return(0,s.jsx)(c.Item,{...ui.BO[e.type],children:(0,s.jsx)(Ge,{block:e,order:o})},i);case W.V.BlockType.PoiCompilationV1:case W.V.BlockType.PoiCompilationV2:return(0,s.jsx)(c.Item,{...ui.BO[e.type],children:(0,s.jsx)(yt,{block:e,order:o})},i);default:return null}}))})},yi=()=>{const{isVisible:e,isError:t,blocks:i}=(0,n.eY)({isVisible:A.mainContentPublicApi.outputs.$isVisible,isError:A.mainContentPublicApi.outputs.$isError,blocks:A.mainContentPublicApi.outputs.$visibleBlocks});return!e||t?(0,s.jsx)(o.StrictMode,{children:(0,s.jsx)("span",{})}):(0,s.jsx)(o.StrictMode,{children:(0,s.jsx)(k,{children:i.length?(0,s.jsx)(mi,{}):(0,s.jsx)(G,{})})})}},4541:function(e,t,i){i.r(t),i.d(t,{mainContentPublicApi:function(){return se}});var o=i(4284),n=i(34943),a=i(72675),r=i(65740),l=i(91115),s=i(55230),c=i(1445),d=i(17514),p=i(97331),u=i(34922),m=i(85839),y=i(73114);const k=(0,n.yM)({sid:"-6fk10l"});var h=i(48366),b=i(35529),g=i(64441),x=i(65041);const{createFlag:v}=x.f.inputs,{mainContentFlag:C,zeroStateContentFlag:T}=g.i.outputs,{requestMainContentFlags:f}=g.i.inputs,P=v({name:"ex-exp-mainContentPrices",contract:(0,b.Record)({enabled:b.Boolean}),defaultValue:!1,mapValue:e=>{let{enabled:t}=e;return t},requestOn:f});(0,n.UP)({and:[{clock:k,target:f}],or:{sid:"-bupti9"}});const j=(0,h.G)({predicate:!0,stores:[C.$value,T.$value]}),B=P.$value,{matchPage:_,pages:N}=l.$.outputs,{$destination:S}=c.q.outputs,{$isAviaFormActive:I}=d.B.outputs,{$isSimpleSearch:w}=p.N.outputs,{$originIata:E,$destinationIata:M,$destinationIsAnywhere:A}=s.i.outputs,{$isGuidesModalOpened:L}=u.IK.modal.outputs,R=(0,n.$e)({and:[{isEnabled:j,isAviaForm:(0,a.x)(I,w),isMainPage:_(N.MainPage).$isOpen,isGuidesModalOpened:L,isOriginValid:E.map((e=>Boolean(e))),origin:E,isParamsDestinationEmpty:(0,n.$e)({and:[M,A,(e,t)=>!t&&!e],or:{sid:"-g3f3xd"}}),isDirectionDestinationEmpty:S.map((e=>(0,m.Tu)(e)))}],or:{sid:"r8y6on"}}),O=(0,n.yM)({sid:"smd6rw"});(0,n.UP)({and:[{clock:[R.updates,k],source:R,target:O}],or:{sid:"-bmc2vc"}});const U=R.map((e=>{let{isEnabled:t,isAviaForm:i,isMainPage:o,isGuidesModalOpened:n,isParamsDestinationEmpty:a,isDirectionDestinationEmpty:r}=e;return t&&i&&(o&&a||n&&r)})),{$enabled:V,turnOn:$,turnOff:q}=(0,n.MR)({sid:"v8ty3p",fn:()=>(0,y.qs)()});(0,r.s)({source:O,if:U,then:$,else:q});var z=i(29260),D=i(36653),F=i(45878),Z=i(63246);const K=(0,n.MT)(null,{sid:"-7jn3o8"});(0,n.UP)({and:[{clock:D.E.finished.success,fn:e=>{let{params:{originIata:t}}=e;return t},target:K}],or:{sid:"2r67fm"}}),(0,n.UP)({and:[{clock:$,source:{isClient:Z.y.outputs.$isClient,originOfLoadedBlocks:K,deps:R},filter:e=>{let{isClient:t,originOfLoadedBlocks:i,deps:o}=e;return t&&o.isOriginValid&&o.origin!==i},fn:e=>{let{deps:t}=e;return{originIata:t.origin}},target:D.E.start}],or:{sid:"2ugyzs"}});const Y=D.E.$data,H=(0,n.MT)({},{sid:"fi71ta"});(0,n.UP)({and:[{clock:Y.updates,fn:e=>(0,F.p$)(e),target:H}],or:{sid:"-lp4blu"}});const G=(0,n.MT)({},{sid:"-v4b1yz"});(0,r.s)({source:Y.updates,if:e=>e.some((e=>e.type===D.V.BlockType.PoiCompilationV1)),then:o.h.poiCompilation.v1.fetchFx.prepend((()=>({limit:10}))),else:o.h.poiCompilation.v1.notFetched}),(0,r.s)({source:Y.updates.map((e=>e.filter((e=>e.type===D.V.BlockType.PoiCompilationV2)))),if:e=>Boolean(e.length),then:o.h.poiCompilation.v2.fetchFx.prepend((e=>({limit:10,ark_ids:e.map((e=>e.compilationId))}))),else:o.h.poiCompilation.v2.notFetched});const W=(0,z.m)({events:{poiCompilationV1:(0,n.TS)([o.h.poiCompilation.v1.$preview.updates,o.h.poiCompilation.v1.fetchFx.fail.filter({fn:e=>{let{params:t}=e;return 10===t.limit}}).map((()=>null)),o.h.poiCompilation.v1.notFetched],{sid:"15277i"}),poiCompilationV2:(0,n.TS)([o.h.poiCompilation.v2.$previews.updates,o.h.poiCompilation.v2.fetchFx.fail.filter({fn:e=>{let{params:t}=e;return 10===t.limit}}).map((()=>null)),o.h.poiCompilation.v2.notFetched],{sid:"ma6kan"})}});(0,n.UP)({and:[{clock:W,fn:e=>{let{poiCompilationV1:t,poiCompilationV2:i}=e;const o=[...(null==t?void 0:t.places)||[],...Object.values(i||{}).flatMap((e=>e.places))];return{arkIds:(0,F.zQ)(o)}},target:G}],or:{sid:"-ivedu1"}});const X=(0,z.m)({events:[H.updates,G.updates]}).map((e=>e.reduce(((e,t)=>(e.arkIds=e.arkIds.concat(t.arkIds??[]),e.iatas=e.iatas.concat(t.iatas??[]),e)),{arkIds:[],iatas:[]}))),J=(0,n.yM)({sid:"62cr4y"});(0,r.s)({source:X,if:e=>{let{arkIds:t=[],iatas:i=[]}=e;return t.length>0||i.length>0},then:o.h.locations.fetch,else:J});const Q=(0,n.MT)({cities:{},pois:{},parks:{},islands:{},regions:{},countries:{}},{sid:"-xsq039"});(0,n.UP)({and:[{clock:o.h.locations.data.$data.updates,source:Q,filter:(e,t)=>null!==t,fn:(e,t)=>({...e,...t}),target:Q}],or:{sid:"h3y16j"}});const ee=(0,n.MT)([],{sid:"5v5dl4"}),te=(0,z.m)({events:{blocks:Y.updates,locations:(0,n.TS)([Q.updates,J],{sid:"75raq2"})},reset:$});(0,n.UP)({and:[{clock:te,source:{blocks:Y,locations:Q},fn:e=>{let{blocks:t,locations:i}=e;return(0,F.x9)(t,i)},target:ee}],or:{sid:"patdkk"}});const ie=(0,n.MT)(!1,{sid:"-g4utzp"}).on(D.E.finished.failure,(()=>!0)).on(o.h.locations.data.$error,(()=>!0)).reset(te);var oe=i(39018),ne=i(79403),ae=i(75427),re=i(13099);const le=(0,n.yM)({sid:"rqu5xl"});(0,n.UP)({and:[{clock:le,fn:e=>{let{poi:t,location:i,trapSource:o,poiOpenSource:n}=e;return{layer:t.layerId,poi:t.poiId.toString(),direction:i.iata??i.id,slug:i.slug,openSource:o,poiOpenSource:n}},target:ae.Y.inputs.open}],or:{sid:"izfaju"}}),(0,n.UP)({and:[{clock:le,fn:e=>{let{directionSource:t}=e;return t},target:re.Q.inputs.directionSourceUpdated}],or:{sid:"jtnz6p"}}),(0,n.UP)({and:[{clock:le,filter:ne.U.outputs.$isWayAwayBrand,fn:e=>{let{location:t}=e;return{type:"open_sight",name:t.name.su}},target:oe.n.inputs.sendEvent}],or:{sid:"jwyqqv"}});const se={outputs:{$isVisible:V,$isError:ie,$visibleBlocks:ee,$locations:Q,$isMinPricesEnabled:B},inputs:{initialized:k,placeClicked:le},internals:{api:o.h,$blocks:Y}}}}]);